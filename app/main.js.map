{"version":3,"file":"main.js","sources":["../src/js/store-schema.js","../src/js/reducers.js","../src/js/GambierStore.js","../src/js/utils-mainProcess.js","../src/js/projectDirectory.js","../src/js/projectCitations.js","../src/js/mainMenu.js","../src/main.js"],"sourcesContent":["export const StoreSchema = {\n  \n  // appStartupTime: {\n  //   type: 'string',\n  //   default: 'undefined'\n  // },\n\n  changed: { type: 'array', default: [] },\n\n  selectedFolderId: {\n    type: 'integer',\n    default: 0,\n  },\n\n  selectedFileId: {\n    type: 'integer',\n    default: 0,\n  },\n\n  projectDirectory: {\n    descrition: 'User specified path to directory containing their project files',\n    type: 'string',\n    default: 'undefined'\n  },\n\n  projectCitations: {\n    descrition: 'User specified path to CSL-JSON file containing their citatons',\n    type: 'string',\n    default: 'undefined'\n  },\n\n  contents: { type: 'array', default: [] },\n\n\n  // hierarchy: {\n  //   description: 'Snapshot of hierarchy of project directory: files and directories. This is a recursive setup: directories can contain directories. Per: https://json-schema.org/understanding-json-schema/structuring.html#id1. Note: `id` can be anything, but it must be present, or our $refs will not work.',\n  //   $schema: \"http://json-schema.org/draft-07/schema#\",\n  //   $id: \"anything-could-go-here\",\n  //   definitions: {\n  //     'fileOrDirectory': {\n  //       type: 'object',\n  //       required: ['typeOf', 'name', 'path'],\n  //       properties: {\n  //         typeOf: { type: 'string', enum: ['File', 'Directory'] },\n  //         name: { type: 'string' },\n  //         path: { type: 'string' },\n  //         created: { type: 'string', format: 'date-time' },\n  //         modified: { type: 'string', format: 'date-time' },\n  //         children: {\n  //           type: 'array',\n  //           items: { $ref: '#/definitions/fileOrDirectory' }\n  //         }\n  //       }\n  //     }\n  //   },\n  //   type: 'array',\n  //   items: { $ref: '#/definitions/fileOrDirectory' },\n  //   default: []\n  // }\n}","function getRootDir(contents) {\n  return contents.find((d) => d.type == 'directory' && d.isRoot)\n}\n\nfunction getDirectoryById(contents, id){\n  return contents.find((d) => d.type == 'directory' && d.id == id)\n}\n\nfunction getFirstFileInDirectory(contents, directoryId) {\n  const files = contents.filter((f) => f.type == 'file' && f.parentId == directoryId)\n  return files[0]\n}\n\n/**\n * Check if contents contains item by type and id\n */\nfunction hasContentById(contents, type, id) {\n  return contents.some((d) => d.type == type && d.id == id)\n}\n\n/**\n * `state = {}` gives us a default, for possible first run 'undefined'.\n */\nfunction reducers(state = {}, action) {\n\n  const newState = Object.assign({}, state)\n\n  newState.lastAction = action.type\n  newState.changed = [] // Reset on every action \n\n  switch (action.type) {\n\n    case 'SET_PROJECT_DIRECTORY': {\n      newState.projectDirectory = action.path\n      newState.changed.push('projectDirectory')\n      break\n    }\n\n    case 'MAP_HIERARCHY': {\n      newState.contents = action.contents\n\n      // Handle first run and error conditions:\n      // If a folder has not been selected yet, or if the previously-selected \n      // folder does not exist in updated contents, select root directory.\n      if (\n        newState.selectedFolderId == 0 ||\n        !hasContentById(newState.contents, 'directory', newState.selectedFolderId)\n      ) {\n        \n        // Set `selectedFolderId`\n        const rootDir = getRootDir(newState.contents)\n        newState.selectedFolderId = rootDir.id\n\n        // If rootDir has child files, set `selectedFileId` to first one.\n        // Else, set `selectedFileId` to zero (effectively means 'undefined')\n        if (rootDir.childFileCount > 0) {\n          const firstFile = getFirstFileInDirectory(newState.contents, newState.selectedFolderId)\n          newState.selectedFileId = firstFile.id\n        } else {\n          newState.selectedFileId = 0\n        }\n        \n        newState.changed.push('selectedFolderId')\n        newState.changed.push('selectedFileId')\n      }\n\n      newState.changed.push('contents')\n      break\n    }\n\n    case 'OPEN_FOLDER': {\n\n      // Set `state.selectedFolderId`\n      newState.selectedFolderId = action.id\n\n      const selectedFolder = newState.contents.find((d) => d.type == 'directory' && d.id == action.id)\n\n      // Set `state.selectedFileId` to folder's selected file\n      newState.selectedFileId = selectedFolder.selectedFileId\n\n      newState.changed.push('selectedFolderId')\n      newState.changed.push('selectedFileId')\n\n      break\n    }\n\n    case 'OPEN_FILE': {\n      newState.selectedFileId = action.fileId\n\n      // Find directory that contains selected file, \n      // and set its `selectedFileId` property.\n      const selectedFolder = newState.contents.find((d) => d.type == 'directory' && d.id == action.parentId)\n      selectedFolder.selectedFileId = action.fileId\n\n      newState.changed.push('selectedFileId')\n      newState.changed.push('selectedFolder.selectedFileId')\n\n      break\n    }\n\n    case 'SET_STARTUP_TIME': {\n      newState.appStartupTime = action.time\n      newState.changed.push('appStartupTime')\n      break\n    }\n\n    case 'RESET_HIERARCHY': {\n      newState.contents = []\n      newState.changed.push('contents')\n      break\n    }\n  }\n\n  return newState\n}\n\nexport default reducers","import Store from 'electron-store'\nimport { StoreSchema } from './store-schema'\nimport reducers from './reducers'\n\nimport colors from 'colors'\nimport deepEql from 'deep-eql'\nimport { updatedDiff, detailedDiff } from 'deep-object-diff'\n\nclass GambierStore extends Store {\n  constructor() {\n    // Note: `super` lets us access and call functions on object's parent (MDN)\n    // We pass in our config options for electron-store\n    // Per: https://github.com/sindresorhus/electron-store#options\n    super({\n      name: \"store\",\n      schema: StoreSchema\n    })\n  }\n\n  getCurrentState() {\n    return this.store\n  }\n\n  dispatch(action) {\n\n    // Get next state\n    const nextState = reducers(this.getCurrentState(), action)\n\n    // Optional: Log the changes (useful for debug)\n    this.logTheAction(action)\n    this.logTheDiff(this.getCurrentState(), nextState)\n\n    // Set the next state\n    this.set(nextState)\n  }\n\n  logTheAction(action) {\n    console.log(\n      `Action:`.bgBrightGreen.black,\n      `${action.type}`.bgBrightGreen.black.bold,\n      `(GambierStore.js)`.green\n    )\n  }\n\n  logTheDiff(current, next) {\n    const hasChanged = !deepEql(current, next)\n    if (hasChanged) {\n      // const diff = detailedDiff(current, next)\n      // console.log(diff)\n      console.log('Has changed'.yellow)\n    } else {\n      console.log('No changes')\n    }\n  }\n}\n\nexport const store = new GambierStore()","import { pathExists } from 'fs-extra'\nimport diff from 'deep-diff'\n\nasync function isWorkingPath(pth) {\n\n  if (pth == 'undefined') {\n    return false\n  } else {\n    if (await pathExists(pth)) {\n      return true\n    } else {\n      return false\n    }\n  }\n}\n\nfunction applyDiffs(oldContents, newContents) {\n\n  diff.observableDiff(oldContents, newContents, (d) => {\n    console.log(d)\n    // Apply all changes except to the name property...\n    // if (d.path[d.path.length - 1] !== 'name') {\n    // }\n    diff.applyChange(oldContents, newContents, d);\n  })\n\n  return oldContents\n}\n\nexport { applyDiffs, isWorkingPath }","import { readdir, readFile, stat } from 'fs-extra'\nimport chokidar from 'chokidar'\nimport path from 'path'\nimport matter from 'gray-matter'\nimport removeMd from 'remove-markdown'\nimport { applyDiffs, isWorkingPath } from './utils-mainProcess'\nimport diff from 'deep-diff'\n\n/**\n * Map projectDirectory and save as a flattened hierarchy `contents` property of store (array).\n */\nclass ProjectDirectory {\n\n  constructor() {\n    this.store\n    this.watcher\n    this.directory = ''\n  }\n\n  async setup(store) {\n\n    // Save local 1) reference to store, and 2) value of directory\n    this.store = store\n    this.directory = store.store.projectDirectory\n\n    // Setup change listener for store\n    this.store.onDidAnyChange((newState, oldState) => {\n      this.onStoreChange(newState, oldState)\n    })\n\n    // Map project directory\n    this.mapProjectDirectory()\n\n    // Start watcher\n    this.startWatching(this.directory)\n  }\n\n  startWatching(directory) {\n    if (directory == 'undefined') return\n\n    this.watcher = chokidar.watch(directory, {\n      ignored: /(^|[\\/\\\\])\\../, // Ignore dotfiles\n      ignoreInitial: true,\n      persistent: true,\n      awaitWriteFinish: {\n        stabilityThreshold: 400,\n        pollInterval: 200\n      }\n    })\n\n    this.watcher.on('all', (event, path) => {\n      console.log(\"startWatching: this.watcher.on\")\n      console.log(event)\n      console.log(path)\n      this.mapProjectDirectory()\n    })\n  }\n\n  /**\n   * Remap directory and update watcher if projectDirectory changes\n   */\n  async onStoreChange(newState, oldState) {\n\n    let newDir = newState.projectDirectory\n    let oldDir = oldState.projectDirectory\n\n    // We update the local saved directory value\n    this.directory = newDir\n\n    // If the directory has changed...\n    if (newDir !== oldDir) {\n\n      // Unwatch the old directory\n      if (oldDir !== 'undefined') {\n        await this.watcher.close()\n      }\n\n      // Remap\n      this.mapProjectDirectory()\n\n      // Start watcher\n      this.startWatching(this.directory)\n    }\n  }\n\n  /**\n   * Check if path is valid. \n   * If true, map directory, update store, and add watcher.\n   * Else, tell store to `RESET_HIERARCHY` (clears to `[]`)\n   */\n  async mapProjectDirectory() {\n    \n    if (this.directory == 'undefined' || '') return\n\n    if (await isWorkingPath(this.directory)) {\n      let contents = await this.mapDirectoryRecursively(this.directory)\n      contents = await this.getFilesDetails(contents)\n      contents = this.applyDiffs(this.store.store.contents, contents)\n      this.store.dispatch({ type: 'MAP_HIERARCHY', contents: contents })\n    } else {\n      this.store.dispatch({ type: 'RESET_HIERARCHY' })\n    }\n  }\n\n  applyDiffs(oldContents, newContents) {\n\n    diff.observableDiff(oldContents, newContents, (d) => {\n      // console.log(d)\n      // console.log(d.path)\n      // Apply all changes except to the name property...\n      if (d.path !== undefined) {\n        if (d.path[d.path.length - 1] !== 'selectedFileId') {\n          diff.applyChange(oldContents, newContents, d);\n        }\n      } else {\n        diff.applyChange(oldContents, newContents, d);\n      }\n    })\n  \n    return oldContents\n  }\n\n  /**\n   * Populate this.contents with flat array of directory contents. One object for each directory and file found. Works recursively.\n   * @param {*} directoryPath - Directory to look inside.\n   * @param {*} parentObj - If passed in, we 1) get parent id, and 2) increment its directory counter (assuming the directory ). Is left undefined (default) for the top-level directory.\n   */\n  async mapDirectoryRecursively(directoryPath, parentId = undefined) {\n\n    let arrayOfContents = []\n\n    let contents = await readdir(directoryPath, { withFileTypes: true })\n\n    // Filter contents to (not-empty) directories, and markdown files.\n    contents = contents.filter((c) => c.isDirectory() || c.name.includes('.md'))\n\n    // If the directory has no children we care about (.md files or directories), \n    // we return an empty array.\n    if (contents.length == 0) {\n      return arrayOfContents\n    }\n\n    // Get stats for directory\n    const stats = await stat(directoryPath)\n\n    // Create object for directory\n    const thisDir = {\n      type: 'directory',\n      id: stats.ino,\n      name: directoryPath.substring(directoryPath.lastIndexOf('/') + 1),\n      path: directoryPath,\n      modified: stats.mtime.toISOString(),\n      childFileCount: 0,\n      childDirectoryCount: 0,\n      selectedFileId: 0,\n      isRoot: false,\n    }\n\n    // If parentId was passed, set `thisDir.parentId` to it\n    // Else this directory is the root, so set `isRoot: true`\n    if (parentId !== undefined) {\n      thisDir.parentId = parentId\n    } else {\n      thisDir.isRoot = true\n    }\n\n    for (let c of contents) {\n\n      // Get path\n      const cPath = path.join(directoryPath, c.name)\n\n      if (c.isFile()) {\n        // Increment file counter\n        thisDir.childFileCount++\n\n        // Push new file object\n        arrayOfContents.push({\n          type: 'file',\n          name: c.name,\n          path: cPath,\n          parentId: thisDir.id\n        })\n      } else if (c.isDirectory()) {\n\n        // Get child directory contents\n        // If not empty, increment counter and push to arrayOfContents\n        const subDirContents = await this.mapDirectoryRecursively(cPath, thisDir.id)\n        if (subDirContents.length !== 0) {\n          thisDir.childDirectoryCount++\n          arrayOfContents = arrayOfContents.concat(subDirContents)\n        }\n      }\n    }\n\n    // Finally, if it is not empty, push thisDir to `arrayOfContents`\n    if (arrayOfContents.length !== 0) {\n      arrayOfContents.push(thisDir)\n    }\n\n    return arrayOfContents\n  }\n\n  /**\n   * Go through each file in `this.contents` and add details loaded from stats (e.g. created) and gray-matter (e.g. excerpt, tags, title). We use Promise.all() to run this in parallel, so we're processing files in a batch, instead of sequentially one-by-one.\n   */\n  async getFilesDetails(contents) {\n\n    await Promise.all(\n      contents.map(async (f) => {\n\n        // Ignore directories\n        if (f.type == 'file') {\n\n          // Return a promise ()\n          return readFile(f.path, 'utf8').then(async str => {\n\n            // Get stats\n            const stats = await stat(f.path)\n\n            // Get front matter\n            const md = matter(str, { excerpt: extractExcerpt })\n\n            // Set fields from stats\n            f.id = stats.ino\n            f.modified = stats.mtime.toISOString()\n            f.created = stats.birthtime.toISOString()\n            f.excerpt = md.excerpt\n\n            // Set fields from front matter (if it exists)\n            // gray-matter `isEmpty` property returns \"true if front-matter is empty\".\n            if (!f.isEmpty) {\n\n              // If `tags` exists in front matter, use it. Else, set as empty `[]`.\n              f.tags = md.data.hasOwnProperty('tags') ? md.data.tags : []\n\n              // If title exists in front matter, use it. Else, use name, minus extension.\n              if (md.data.hasOwnProperty('title')) {\n                f.title = md.data.title\n              } else {\n                f.title = f.name.slice(0, f.name.lastIndexOf('.'))\n              }\n            }\n          })\n        }\n      })\n    )\n    // console.log(contents)\n    return contents\n  }\n}\n\nfunction extractExcerpt(file) {\n\n  // gray-matter passes extract function the file.\n  // file.contents give us the input string, with front matter stripped.\n\n  // Remove h1, if it exists. Then trim to 200 characters.\n  let excerpt = file.content\n    .replace(/^# (.*)\\n/gm, '')\n    .substring(0, 400)\n\n  // Remove markdown formatting. Start with remove-markdown rules.\n  // Per: https://github.com/stiang/remove-markdown/blob/master/index.js\n  // Then add whatever additional changes I want (e.g. new lines).\n  excerpt = removeMd(excerpt)\n    .replace(/^> /gm, '')         // Block quotes\n    .replace(/^\\n/gm, '')         // New lines at start of line (usually doc)\n    .replace(/\\n/gm, ' ')         // New lines in-line (replace with spaces)\n    .replace(/\\t/gm, ' ')         // Artifact left from list replacement\n    .replace(/\\[@.*?\\]/gm, '')    // Citations\n    .replace(/:::.*?:::/gm, ' ')  // Bracketed spans\n    .replace(/\\s{2,}/gm, ' ')     // Extra spaces\n    .substring(0, 200)            // Trim to 200 characters\n\n  file.excerpt = excerpt\n}\n\nexport const projectDirectory = new ProjectDirectory()\n","import { readdir, readFile, stat } from 'fs-extra'\nimport chokidar from 'chokidar'\nimport path from 'path'\nimport colors from 'colors'\n\nclass ProjectCitations {\n  constructor() {\n    this.store\n    this.watcher\n    this.citationsPath = ''\n  }\n\n  async setup(store) {\n    // console.log(\"projectCitations: setup\".bgRed)\n    this.citationsPath = store.store.projectCitations\n    // console.log(this.citationsPath.bgRed)\n  }\n\n  startWatching() {\n    // console.log(\"projectCitations: startWatching\".bgRed)\n    this.watcher = chokidar.watch(this.citationsPath, {\n      ignored: /(^|[\\/\\\\])\\../, // Ignore dotfiles\n      ignoreInitial: true,\n      persistent: true,\n      awaitWriteFinish: {\n        stabilityThreshold: 400,\n        pollInterval: 200\n      }\n    })\n\n    this.watcher.on('all', (event, path) => {\n      // console.log(\"startWatching: this.watcher.on\".bgRed)\n      console.log(event)\n      console.log(path)\n      this.onCitationsEvent()\n    })\n  }\n\n  onCitationsEvent() {\n    // console.log(\"projectCitations: onCitationsEvent\".bgRed)\n  }\n\n  getCitations() {\n    return \"Some citations for you to enjoy\"\n  }\n}\n\nexport const projectCitations = new ProjectCitations()","import { Menu } from 'electron'\nimport electron from 'electron'\n\nconst app = electron.app\n\n// const { Menu } = require('electron')\n// const electron = require('electron')\n// const app = electron.app\n\nconst template = [\n  {\n    label: 'Edit',\n    submenu: [\n      {\n        role: 'undo'\n      },\n      {\n        role: 'redo'\n      },\n      {\n        type: 'separator'\n      },\n      {\n        role: 'cut'\n      },\n      {\n        role: 'copy'\n      },\n      {\n        role: 'paste'\n      },\n      {\n        role: 'pasteandmatchstyle'\n      },\n      {\n        role: 'delete'\n      },\n      {\n        role: 'selectall'\n      }\n    ]\n  },\n  {\n    label: 'View',\n    submenu: [\n      {\n        label: 'Reload',\n        accelerator: 'CmdOrCtrl+R',\n        click(item, focusedWindow) {\n          if (focusedWindow) focusedWindow.reload()\n        }\n      },\n      {\n        label: 'Toggle Developer Tools',\n        accelerator: process.platform === 'darwin' ? 'Alt+Command+I' : 'Ctrl+Shift+I',\n        click(item, focusedWindow) {\n          if (focusedWindow) focusedWindow.webContents.toggleDevTools()\n        }\n      },\n      {\n        type: 'separator'\n      },\n      {\n        role: 'resetzoom'\n      },\n      {\n        role: 'zoomin'\n      },\n      {\n        role: 'zoomout'\n      },\n      {\n        type: 'separator'\n      },\n      {\n        role: 'togglefullscreen'\n      }\n    ]\n  },\n  {\n    role: 'window',\n    submenu: [\n      {\n        role: 'minimize'\n      },\n      {\n        role: 'close'\n      }\n    ]\n  },\n  {\n    role: 'help',\n    submenu: [\n      {\n        label: 'Learn More',\n        click() { require('electron').shell.openExternal('http://electron.atom.io') }\n      }\n    ]\n  }\n]\n\nif (process.platform === 'darwin') {\n  const name = app.name\n  template.unshift({\n    label: name,\n    submenu: [\n      {\n        role: 'about'\n      },\n      {\n        type: 'separator'\n      },\n      {\n        role: 'services',\n        submenu: []\n      },\n      {\n        type: 'separator'\n      },\n      {\n        role: 'hide'\n      },\n      {\n        role: 'hideothers'\n      },\n      {\n        role: 'unhide'\n      },\n      {\n        type: 'separator'\n      },\n      {\n        role: 'quit'\n      }\n    ]\n  })\n  // Edit menu.\n  template[1].submenu.push(\n    {\n      type: 'separator'\n    },\n    {\n      label: 'Speech',\n      submenu: [\n        {\n          role: 'startspeaking'\n        },\n        {\n          role: 'stopspeaking'\n        }\n      ]\n    }\n  )\n  // Window menu.\n  template[3].submenu = [\n    {\n      label: 'Close',\n      accelerator: 'CmdOrCtrl+W',\n      role: 'close'\n    },\n    {\n      label: 'Minimize',\n      accelerator: 'CmdOrCtrl+M',\n      role: 'minimize'\n    },\n    {\n      label: 'Zoom',\n      role: 'zoom'\n    },\n    {\n      type: 'separator'\n    },\n    {\n      label: 'Bring All to Front',\n      role: 'front'\n    }\n  ]\n}\n\nexport function create() {\n  const menu = Menu.buildFromTemplate(template)\n  Menu.setApplicationMenu(menu)\n}\n","// External dependencies\nimport { app, BrowserWindow, clipboard, dialog, ipcMain } from 'electron'\nimport path from 'path'\nimport { readdir, readFile, pathExists, stat } from 'fs-extra'\n\n// Bundled dependencies\nimport { store } from './js/GambierStore'\nimport { projectDirectory } from './js/projectDirectory'\nimport { projectCitations } from './js/projectCitations'\nimport * as mainMenu from './js/mainMenu'\n\n// Dev only\nimport colors from 'colors'\n\n// -------- Process variables -------- //\n\nprocess.env.ELECTRON_DISABLE_SECURITY_WARNINGS = true\n\n// -------- Reload -------- //\n\n// Not sure how this works with our packaged build. Want it for dev, but not distribution.\nconst watchAndReload = [\n  path.join(__dirname, '**/*.js'),\n  path.join(__dirname, '**/*.html'),\n  path.join(__dirname, '**/*.css'),\n  path.join(__dirname, '**/*.xml')\n  // 'main.js',\n  // '**/*.js',\n  // '**/*.html',\n  // '**/*.css',\n  // '**/*.xml',\n  // '**/*.png',\n  // '**/*.jpg',\n]\n\n// require('electron-reload')(watchAndReload, {\n//   // awaitWriteFinish: {\n//   //   stabilityThreshold: 10,\n//   //   pollInterval: 50\n//   // },\n//   electron: path.join(__dirname, '../node_modules', '.bin', 'electron'),\n//   // argv: ['--inspect=5858'],\n// })\n\n// -------- Create window -------- //\n\n// Keep a global reference of the window object, if you don't, the window will be closed automatically when the JavaScript object is garbage collected.\nlet win\n\nconsole.log(`--------------- Startup ---------------`.bgYellow.black, `(Main.js)`.yellow)\n\nfunction createWindow() {\n\n  console.log(`Create window`.bgBrightBlue.black, `(Main.js)`.brightBlue)\n\n  // Create the browser window.\n  win = new BrowserWindow({\n    show: false,\n    width: 1600,\n    height: 900,\n    webPreferences: {\n      scrollBounce: false,\n      // Security\n      allowRunningInsecureContent: false,\n      contextIsolation: true,\n      enableRemoteModule: false,\n      nativeWindowOpen: false,\n      nodeIntegration: false,\n      nodeIntegrationInWorker: false,\n      nodeIntegrationInSubFrames: false,\n      safeDialogs: true,\n      sandbox: true,\n      webSecurity: true,\n      webviewTag: false,\n      // Preload\n      preload: path.join(__dirname, 'js/preload.js')\n    }\n  })\n\n  // Open DevTools\n  // win.webContents.openDevTools();\n\n  // Load index.html\n  win.loadFile(path.join(__dirname, 'index.html'))\n\n  // Populate OS menus\n  mainMenu.create()\n\n  // Setup project directory and citations\n  projectDirectory.setup(store)\n  projectCitations.setup(store)\n\n  // Send state to render process once dom is ready\n  win.once('ready-to-show', () => {\n    console.log(`ready-to-show`.bgBrightBlue.black, `(Main.js)`.brightBlue)\n  })\n\n  // -------- TEMP DEVELOPMENT STUFF -------- //\n  // store.clear()\n  // store.reset()\n  // This triggers a change event, which subscribers then receive\n  // store.dispatch({ type: 'SET_STARTUP_TIME', time: new Date().toISOString() })\n\n  // setTimeout(() => {\n  //   store.dispatch({type: 'SET_PROJECT_DIRECTORY', path: '/Users/josh/Documents/Climate\\ research/GitHub/climate-research/src/Empty'})\n  // }, 1000)\n\n  // setTimeout(() => {\n  //   store.dispatch({type: 'SET_PROJECT_DIRECTORY', path: '/Users/josh/Documents/Climate\\ research/GitHub/climate-research/src'})\n  // }, 1000)\n\n  // setTimeout(() => {\n  //   store.dispatch({type: 'SET_PROJECT_DIRECTORY', path: '/Users/arasd'})\n  // }, 4000)\n\n  // setTimeout(() => {\n  //   store.dispatch({type: 'SET_PROJECT_DIRECTORY', path: '/Users/josh/Documents/Climate\\ research/GitHub/climate-research/src/Notes'})\n  // }, 6000)\n}\n\n\n// -------- Kickoff -------- //\n\n// Set this to shut up console warnings re: deprecated default \n// If not set, it defaults to `false`, and console then warns us it will default `true` as of Electron 9.\n// Per: https://github.com/electron/electron/issues/18397\napp.allowRendererProcessReuse = true\n\napp.whenReady().then(createWindow)\n\n\n// -------- Store -------- //\n\nstore.onDidAnyChange((newState, oldState) => {\n  win.webContents.send('stateChanged', newState, oldState)\n})\n\n\n// -------- IPC: Send/Receive -------- //\n\nipcMain.on('showWindow', (event) => {\n  console.log(\"win.show()\".yellow)\n  win.show()\n})\n\nipcMain.on('hideWindow', (event) => {\n  console.log(\"win.hide()\".yellow)\n  win.hide()\n})\n\nipcMain.on('selectProjectDirectory', async (event) => {\n  const selection = await dialog.showOpenDialog(win, {\n    title: 'Select Project Directory',\n    properties: ['openDirectory', 'createDirectory']\n  })\n  if (!selection.canceled) {\n    store.dispatch({ type: 'SET_PROJECT_DIRECTORY', path: selection.filePaths[0] })\n  }\n})\n\nipcMain.on('dispatch', (event, action) => {\n  store.dispatch(action)\n})\n\n\n// -------- IPC: Invoke -------- //\n\nipcMain.handle('ifPathExists', async (event, filepath) => {\n  const exists = await pathExists(filepath)\n  return { path: filepath, exists: exists }\n})\n\nipcMain.handle('getState', async (event) => {\n  console.log(\"getState\")\n  return store.store\n})\n\nipcMain.handle('getCitations', (event) => {\n  return projectCitations.getCitations()\n})\n\nipcMain.handle('getFileById', async (event, id, encoding) => {\n\n  // Get path of file with matching id\n  const filePath = store.store.contents.find((f) => f.id == id).path\n\n  // Load file and return\n  let file = await readFile(filePath, encoding)\n  return file\n})\n\nipcMain.handle('pathJoin', async (event, path1, path2) => {\n  // console.log(path1)\n  // console.log(path2)\n  return path.join(path1, path2)\n})\n\nipcMain.handle('getHTMLFromClipboard', (event) => {\n  // console.log(clipboard.availableFormats())\n  return clipboard.readHTML()\n})\n\nipcMain.handle('getFormatOfClipboard', (event) => {\n  return clipboard.availableFormats()\n})"],"names":["pathExists","readdir","stat","readFile","electron","Menu","BrowserWindow","mainMenu.create","app","ipcMain","dialog","clipboard"],"mappings":"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"}