{"version":3,"file":"main.js","sources":["../src/js/main/reducers.js","../src/js/main/Store.js","../src/js/shared/utils.js","../src/js/main/AppearanceManager.js","../src/js/main/DbManager.js","../src/js/main/actions/deleteFile.js","../src/js/main/actions/deleteFiles.js","../src/js/main/actions/selectProjectDirectoryFromDialog.js","../src/js/main/getCitation.js","../src/js/main/IpcManager.js","../src/js/main/menus/Separator.js","../src/js/main/menus/App.js","../src/js/main/menus/File.js","../src/js/main/menus/Edit.js","../src/js/main/menus/Select.js","../src/js/main/menus/Format.js","../src/js/main/menus/View.js","../src/js/main/menus/Window.js","../src/js/main/MenuBarManager.js","../src/js/main/watcher/mapDocument.js","../src/js/main/watcher/mapMedia.js","../src/js/main/watcher/mapFolder.js","../src/js/main/watcher/mapProject.js","../src/js/main/watcher/Watcher.js","../src/js/main/WindowManager.js","../src/js/main/ProjectManager.js","../src/js/main/PreferencesManager.js","../src/js/main/main.js"],"sourcesContent":["import { BrowserWindow, dialog, systemPreferences } from 'electron'\nimport produce, { enablePatches } from 'immer'\nimport { newProject, newPanel } from './Store.js'\nimport { accessSync, renameSync, existsSync, readdirSync } from 'fs-extra'\nimport fs from 'fs'\nimport path from 'path'\nimport { nanoid } from 'nanoid/non-secure'\n\n\nenablePatches()\n\nexport const update = (state, action, window) =>\n  produce(state, (draft) => {\n\n    // Set a few useful, commonly-used variables\n    const project = draft.projects.byId[window?.projectId]\n\n    switch (action.type) {\n\n\n      // ------------------------ APP-WIDE ------------------------ //\n\n      case 'START_COLD_START': {\n\n        // Update appStatus \n        draft.appStatus = 'coldStarting'\n\n        // Set platform, if it's blank\n        if (!draft.platform) {\n          if (process.platform === 'darwin') {\n            draft.platform = 'mac'\n          } else if (process.platform === 'win32') {\n            draft.platform = 'win'\n          }\n        }\n\n        if (draft.projects.allIds.length) {\n          draft.projects.allIds.forEach((id) => {\n\n            const project = draft.projects.byId[id]\n\n            // Delete existing projects that 1) are missing their directory, or 2) have an inaccessible directory\n            const directoryIsMissing = !project.directory\n            const directoryIsInaccessible = !isDirectoryAccessible(project.directory)\n            if (directoryIsMissing || directoryIsInaccessible) {\n              delete draft.projects.byId[id]\n            }\n\n            // Set unsavedChanages on all panels to false\n            // This shouldn't be necessary, when app is working normally, user is saving changes before closing, etc. Should only be needed when app crashes with unsaved changes. They're lost, unfortunately, so this should be false on next cold start.\n            project.panels.forEach((p) => p.unsavedChanges = false)\n\n            // Same as above...\n            project.window.status = 'open'\n          })\n\n          // Update `allIds` to match `byId`\n          draft.projects.allIds = Object.keys(draft.projects.byId)\n        }\n\n        // Set keyboard nav\n        draft.system.keyboardNavEnabled = systemPreferences.getUserDefault('AppleKeyboardUIMode', 'boolean')\n\n        // If theme has not yet been defined, use the default (first one).\n        if (!draft.theme.id) {\n          draft.theme.id = draft.theme.installed[0].id\n        }\n\n        // If there are no projects, create a new empty one.\n        if (!draft.projects.allIds.length) {\n          const id = nanoid()\n          draft.projects.byId[id] = { ...newProject }\n          draft.projects.allIds.push(id)\n        }\n\n        // Make sure preferences are closed\n        draft.prefs.isOpen = false\n\n        // Reset cursor position histories\n        // The first time each session that we open a doc, we want the \n        // cursor to start at the top.\n        draft.cursorPositionHistory = {}\n\n        break\n      }\n\n      case 'FINISH_COLD_START': {\n        draft.appStatus = 'open'\n        break\n      }\n\n      case 'START_TO_QUIT': {\n        draft.appStatus = 'wantsToQuit'\n        break\n      }\n\n      case 'CAN_SAFELY_QUIT': {\n        draft.appStatus = 'safeToQuit'\n        break\n      }\n\n      // FOCUSED/UNFOCUSED WINDOW\n\n      case 'FOCUSED_WINDOW': {\n        draft.focusedWindowId = window.projectId\n        break\n      }\n\n      case 'NO_WINDOW_FOCUSED': {\n        draft.focusedWindowId = \"\"\n        break\n      }\n\n      // PREFERENCES\n\n      case 'OPEN_PREFERENCES': {\n        draft.prefs.isOpen = true\n        break\n      }\n\n      case 'FOCUS_PREFERENCES_WINDOW': {\n        const prefsWindow = BrowserWindow.getAllWindows().find(({ projectId }) => projectId == 'preferences')\n        prefsWindow.focus()\n        // draft.focusedWindowId = 'preferences'\n        break\n      }\n\n      case 'CLOSE_PREFERENCES': {\n        draft.prefs.isOpen = false\n        break\n      }\n\n      // THEME\n\n      case 'SAVE_SYSTEM_COLORS': {\n        draft.systemColors = action.colors\n        break\n      }\n\n      case 'SET_THEME': {\n        draft.theme.id = action.id\n        draft.theme.isDark = draft.theme.installed[action.id].isDark\n        break\n      }\n\n      case 'SET_DARK_MODE': {\n        draft.darkMode = action.value\n        break\n      }\n\n      case 'SET_TABBABLES': {\n        if (action.blockquote) draft.tabbables.blockquote = action.blockquote\n        if (action.citation) draft.tabbables.citation = action.citation\n        if (action.code) draft.tabbables.code = action.code\n        if (action.emphasis) draft.tabbables.emphasis = action.emphasis\n        if (action.fencedcodeblock) draft.tabbables.fencedcodeblock = action.fencedcodeblock\n        if (action.footnote) draft.tabbables.footnote = action.footnote\n        if (action.header) draft.tabbables.header = action.header\n        if (action.hr) draft.tabbables.hr = action.hr\n        if (action.image) draft.tabbables.image = action.image\n        if (action.link) draft.tabbables.link = action.link\n        if (action.list) draft.tabbables.list = action.list\n        if (action.math) draft.tabbables.math = action.math\n        if (action.strikethrough) draft.tabbables.strikethrough = action.strikethrough\n        if (action.strong) draft.tabbables.strong = action.strong\n        if (action.taskList) draft.tabbables.taskList = action.taskList\n        break\n      }\n\n      // SYSTEM VALUES\n      // E.g. Keyboard navigation turned on...\n\n      case 'SET_SYSTEM_VALUES': {\n        draft.system = action.values\n        break\n      }\n\n      // CHROMIUM VALUES\n      // E.g. Dark mode, high contrast mode, inverted colors...\n\n      case 'SAVE_CHROMIUM_VALUES': {\n        draft.chromium = action.values\n        break\n      }\n\n      // TYPOGRAPHY\n\n      // Font size\n      case 'SET_EDITOR_FONT_SIZE': {\n        const { min, max } = draft.editorFont\n        if (action.value >= min && action.value <= max) {\n          draft.editorFont.size = action.value\n        }\n        break\n      }\n\n      case 'INCREASE_EDITOR_FONT_SIZE': {\n        if (draft.editorFont.size < draft.editorFont.max) {\n          draft.editorFont.size += draft.editorFont.increment\n        }\n        break\n      }\n\n      case 'DECREASE_EDITOR_FONT_SIZE': {\n        if (draft.editorFont.size > draft.editorFont.min) {\n          draft.editorFont.size -= draft.editorFont.increment\n        }\n        break\n      }\n\n      // Line height\n      case 'SET_EDITOR_LINE_HEIGHT': {\n        const { min, max } = draft.editorLineHeight\n        if (action.value >= min && action.value <= max) {\n          draft.editorLineHeight.size = action.value\n        }\n        break\n      }\n\n      case 'INCREASE_EDITOR_LINE_HEIGHT': {\n        if (draft.editorLineHeight.size < draft.editorLineHeight.max) {\n          let newSize = (draft.editorLineHeight.size * 10 + draft.editorLineHeight.increment * 10) / 10\n          draft.editorLineHeight.size = newSize\n        }\n        break\n      }\n\n      case 'DECREASE_EDITOR_LINE_HEIGHT': {\n        if (draft.editorLineHeight.size > draft.editorLineHeight.min) {\n          let newSize = (draft.editorLineHeight.size * 10 - draft.editorLineHeight.increment * 10) / 10\n          draft.editorLineHeight.size = newSize\n        }\n        break\n      }\n\n      // Max line width\n      case 'SET_EDITOR_MAX_LINE_WIDTH': {\n        const { min, max } = draft.editorMaxLineWidth\n        if (action.value >= min && action.value <= max) {\n          draft.editorMaxLineWidth.size = action.value\n        }\n        break\n      }\n\n      // DEVELOPER OPTIONS\n      \n      case 'SET_DEVELOPER_OPTIONS': {\n        draft.developer = action.options\n        break\n      }\n\n      // MARKDOWN\n\n      case 'SET_MARKDOWN_OPTIONS': {\n        draft.markdown = action.options\n        break\n      }\n\n\n\n      // ------------------------ PROJECT-SPECIFIC ------------------------ //\n\n      // CREATE, EDIT, REMOVE\n\n      case 'CREATE_NEW_PROJECT': {\n        const id = nanoid()\n        draft.projects.byId[id] = { ...newProject }\n        draft.projects.allIds.push(id)\n        break\n      }\n\n      case 'REMOVE_PROJECT': {\n        delete draft.projects.byId[window.projectId]\n        draft.projects.allIds = Object.keys(draft.projects.byId)\n        break\n      }\n\n      case 'SET_PROJECT_DIRECTORY': {\n        // Do we have write permissions for the selected directory? If yes, proceed. \n        // Else, if current directory is valid, keep using it.\n        // Else, set directory as blank.\n        if (isDirectoryAccessible(action.directory)) {\n          project.directory = action.directory\n        } else {\n          if (isDirectoryAccessible(project.directory)) {\n            // Do nothing\n          } else {\n            project.directory = \"\"\n          }\n        }\n\n        // Reset panels\n        // Tell panel to load first file in project\n        project.focusedPanelIndex = 0\n        project.panels = [{ ...newPanel, id: nanoid() }]\n\n        break\n      }\n\n      case 'PROJECT_FILES_MAPPED': {\n\n        // If nothing is selected in the project yet, select\n        // the first doc. Most likely to happen when user\n        // specifies new project directory (e.g. first run).\n\n        // Get the active sidebar tab.\n        // If undefined, set to 'project'\n        const activeSidebarTab = project.sidebar.tabsById[project.sidebar.activeTabId]\n        if (activeSidebarTab == undefined) {\n          project.sidebar.activeTabId == 'project'\n          activeSidebarTab = project.sidebar.tabsById.project\n        }\n\n        const nothingIsSelected = activeSidebarTab.selected.length == 0\n        const projectIsEmpty = !action.firstDocId\n\n        // If nothing is selected, try to select first doc in active sidebar.\n        // Else, if project is empty, create new doc.\n        if (nothingIsSelected && action.firstDocId) {\n\n          // Load doc in panel\n          project.panels[0].docId = action.firstDocId\n\n          // Select doc in the active project sidebar tab \n          activeSidebarTab.lastSelected = action.firstDocId\n          activeSidebarTab.selected = [action.firstDocId]\n\n        } else if (projectIsEmpty) {\n\n          project.panels[0].docId = 'newDoc'\n\n        }\n        break\n      }\n\n      case 'PROJECT_FILES_UPDATED': {\n        // Called whenever a Watcher instance catches a change\n        // and updates files (note: does not fire when a directory)\n        // is added or removed.\n\n        // See if project panels are effected\n        project.panels.forEach((panel) => {\n\n          // Get watcher\n          const watcher = global.watchers.find((w) => {\n            return w.id == window.projectId\n          })\n\n          // If panel is waiting for a new file, \n          // check files from watcher to see if it exists yet.\n          // If yes, set `panel.docId` to the file's id.\n          // This will load it in the editor.\n          if (panel.status == 'justSavedAsAndWaitingToLoadTheNewFile') {\n            const newDocId = watcher.files.allIds.find((id) => {\n              const file = watcher.files.byId[id]\n              return file.path == panel.pendingFilePathToLoad\n            })\n            if (newDocId) {\n              panel.docId = newDocId\n              panel.status = ''\n              delete panel.pendingFilePathToLoad\n\n              // Select doc in sidebar\n              const activeTab = project.sidebar.tabsById[project.sidebar.activeTabId]\n              activeTab.selected = [newDocId]\n            }\n          } else {\n\n            // Else, check if panel's file was deleted.\n            // If yes, show an empty doc.\n            const panelFileWasDeleted = !watcher.files.allIds.includes(panel.docId)\n            if (panelFileWasDeleted) {\n              panel.docId = 'newDoc'\n              panel.unsavedChanges = false\n            }\n          }\n        })\n\n        // Are any of the project panels waiting for a file?\n        const aPanelIsWaitingForAFile = project.panels.some((p) => {\n          return p.status == 'justSavedAsAndWaitingToLoadTheNewFile'\n        })\n\n        // If yes, check if the file exists yet\n        if (aPanelIsWaitingForAFile) {\n\n          // Get watcher\n          const watcher = global.watchers.find((w) => {\n            return w.id == window.projectId\n          })\n\n          // For each panel that is waiting for a new file, \n          // check files from watcher to see if it exists yet.\n          // If yes, `panel.docId` to the file's id.\n          // This will load it in the editor.\n          project.panels.forEach((panel) => {\n            if (panel.status == 'justSavedAsAndWaitingToLoadTheNewFile') {\n              const newDocId = watcher.files.allIds.find((id) => {\n                const file = watcher.files.byId[id]\n                return file.path == panel.pendingFilePathToLoad\n              })\n              if (newDocId) {\n                panel.docId = newDocId\n                panel.status = ''\n                delete panel.pendingFilePathToLoad\n\n                // Select doc in sidebar\n                const activeTab = project.sidebar.tabsById[project.sidebar.activeTabId]\n                activeTab.selected = [newDocId]\n              }\n            }\n          })\n        }\n\n\n        break\n      }\n\n      // PROJECT WINDOW\n\n      case 'OPENED_PROJECT_WINDOW': {\n        // Update window status\n        project.window.status = 'open'\n        break\n      }\n\n      // If window is already safe to close, do it\n      // Else, start to close window by setting 'wantsToClose'\n      // Editor instances in the window catch this store change\n      // and if the have unsaved changes, save them.\n      // As each save is mode, 'SAVE_DOC_SUCCESS' is dispatched\n      // If app wants\n\n      case 'START_TO_CLOSE_PROJECT_WINDOW': {\n        const allPanelsAreSafeToClose = project.panels.every((p) => !p.unsavedChanges)\n        if (allPanelsAreSafeToClose) {\n          // Close the window by setting 'safeToClose'. \n          // ProjectManager catches this, and closes the window.\n          project.window.status = 'safeToClose'\n        } else {\n          // Start closing the window\n          project.window.status = 'wantsToClose'\n        }\n        break\n      }\n\n      // case 'CAN_SAFELY_CLOSE_PROJECT_WINDOW': {\n\n      //   project.window.status = 'safeToClose'\n\n      //   // Every time a window marks itself 'safeToClose', check if the app is quitting. If true, check if all windows are 'safeToClose' yet. If true, we can safely quit the app.\n\n      //   if (draft.appStatus == 'wantsToQuit') {\n\n      //     const allWindowsAreSafeToClose = draft.projects.allIds.every((id) => {\n      //       const windowStatus = draft.projects.byId[id].window.status\n      //       return windowStatus == 'safeToClose'\n      //     })\n\n      //     if (allWindowsAreSafeToClose) {\n      //       draft.appStatus = 'canSafelyQuit'\n      //     }\n      //   }\n\n      //   break\n      // }\n\n      // Save window bounds to state, so we can restore later\n      case 'SAVE_PROJECT_WINDOW_BOUNDS': {\n        project.window.bounds = action.windowBounds\n        break\n      }\n\n      case 'PROJECT_WINDOW_DRAG_OVER': {\n        project.window.isDraggedOver = true\n        break\n      }\n\n      case 'PROJECT_WINDOW_DRAG_LEAVE': {\n        project.window.isDraggedOver = false\n        break\n      }\n\n      case 'SET_LAYOUT_FOCUS': {\n        project.focusedSectionId = action.section\n        break\n      }\n\n      // case 'SET_DRAGGED_FILE': {\n      //   project.draggedFileId = action.id\n      //   break\n      // }\n\n      // SIDEBAR\n\n      case 'SIDEBAR_SET_OPEN_CLOSED': {\n        project.sidebar.isOpen = action.value\n        break\n      }\n\n      case 'SELECT_SIDEBAR_TAB_BY_ID': {\n        project.sidebar.activeTabId = action.id\n        project.focusedSectionId = 'sidebar'\n        // Make sure sidebar is open\n        project.sidebar.isOpen = true\n        break\n      }\n\n      case 'SIDEBAR_SET_WIDTH': {\n        project.sidebar.width = action.value\n        break\n      }\n\n      case 'SIDEBAR_SHOW_SEARCH_TAB': {\n\n        // Make sure sidebar is open, and focus it.\n        project.sidebar.isOpen = true\n        project.focusedSectionId = 'sidebar'\n        \n        // Select search tab\n        project.sidebar.activeTabId = 'search'\n\n        // Select the correct input (search or replace), \n        // if user has specified `action.inputToFocus` value.\n        if (action.inputToFocus !== undefined) {\n          const searchTab = project.sidebar.tabsById.search\n          \n          // `inputToFocus` will equal \"search\", \"replace\" or undefined.\n          searchTab.inputToFocusOnOpen = action.inputToFocus\n\n          // Set search input value, if user has specified\n          if (action.queryValue) searchTab.queryValue = action.queryValue\n\n          // Make sure Replace expandable is open\n          if (action.inputToFocus == 'replace') {\n            searchTab.replace.isOpen = true\n          }\n        }\n\n        break\n      }\n\n      case 'SAVE_SEARCH_QUERY_VALUE': {\n        project.sidebar.tabsById.search.queryValue = action.value\n        break\n      }\n\n      case 'SIDEBAR_SET_SORTING': {\n        const tab = project.sidebar.tabsById[action.tabId]\n        if (tab.sortBy) {\n          tab.sortBy = action.sortBy\n        }\n        if (tab.sortOrder) {\n          tab.sortOrder = action.sortOrder\n        }\n        break\n      }\n\n      case 'SIDEBAR_SET_EXPANDED': {\n        const tab = project.sidebar.tabsById[action.tabId]\n        tab.expanded = action.expanded\n        break\n      }\n\n      case 'SIDEBAR_SET_SELECTED': {\n        const tab = project.sidebar.tabsById[action.tabId]\n        tab.lastSelected = action.lastSelected\n        tab.selected = action.selected\n        break\n      }\n\n      case 'SIDEBAR_SELECT_TAGS': {\n        // Switch to Tags tab, if we're not already viewing it\n        project.sidebar.activeTabId = 'tags'\n        // Set tags to `tags` argument. \n        // Should be an array of strings, eg: [\"climate\", \"water\"]\n        project.sidebar.tabsById.tags.selectedTags = action.tags\n        break\n      }\n\n      case 'SIDEBAR_SET_SEARCH_OPTIONS': {\n        const tab = project.sidebar.tabsById.search\n        tab.options = action.options\n        break\n      }\n\n      case 'SIDEBAR_TOGGLE_EXPANDABLE': {\n        const tab = project.sidebar.tabsById[action.tabId]\n        tab[action.expandable].isOpen = !tab[action.expandable].isOpen\n        break\n      }\n\n      case 'TOGGLE_SIDEBAR_PREVIEW': {\n        project.sidebar.isPreviewOpen = !project.sidebar.isPreviewOpen\n        break\n      }\n\n      // PANEL\n\n      case 'CREATE_NEW_DOC': {\n        // Tell the focused panel to load a new (empty) doc \n        const panel = project.panels[project.focusedPanelIndex]\n        panel.docId = 'newDoc'\n        // Focus the editor\n        project.focusedSectionId = 'editor'\n        // Deselect everything in active sidebar tab\n        const activeTab = project.sidebar.tabsById[project.sidebar.activeTabId]\n        activeTab.selected = []\n        break\n      }\n\n      case 'OPEN_NEW_DOC_IN_PANEL': {\n\n        const panel = project.panels[action.panelIndex]\n\n        const canCreateNewDoc =\n          action.saveOutcome == \"noUnsavedChanges\" ||\n          action.saveOutcome == \"saved\" ||\n          action.saveOutcome == \"dontSave\"\n\n        if (canCreateNewDoc) {\n          panel.docId = 'newDoc'\n          panel.unsavedChanges = false\n        } else {\n          // Do nothing\n        }\n\n        break\n      }\n\n      case 'OPEN_DOC_IN_PANEL': {\n\n        const panel = project.panels[action.panelIndex]\n\n        const canOpenDoc =\n          action.saveOutcome == \"noUnsavedChanges\" ||\n          action.saveOutcome == \"saved\" ||\n          action.saveOutcome == \"dontSave\"\n\n        // If we can open the doc, do so. Else, do nothing. \n        if (canOpenDoc) {\n          // Open doc\n          panel.docId = action.doc.id\n          panel.unsavedChanges = false\n          // Select doc in sidebar \n          if (action.selectInSideBar) {\n            const tab = project.sidebar.tabsById[project.sidebar.activeTabId]\n            tab.lastSelected = action.doc.id\n            tab.selected = [action.doc.id]\n          }\n        } else {\n          // Do nothing\n        }\n\n        break\n      }\n\n      case 'OPEN_NEW_PANEL': {\n\n        // Insert new panel at specified index\n        project.panels.splice(action.panelIndex, 0, {\n          ...newPanel,\n          id: nanoid(),\n          docId: action.docId,\n        })\n\n        // Update panel indexes\n        project.panels.forEach((p, i) => p.index = i)\n\n        // Focus new panel\n        project.focusedPanelIndex = action.panelIndex\n\n        // Set all panels equal width\n        const panelWidth = (100 / project.panels.length).toFixed(1)\n        project.panels.forEach((p) => p.width = panelWidth)\n\n        break\n      }\n\n      case 'MOVE_PANEL': {\n\n        // Delete the panel from it's current position.\n        // Splice returns the moved panel's array item.\n        const movedPanel = project.panels.splice(action.fromIndex, 1);\n\n        // Move the item to its new position\n        project.panels.splice(action.toIndex, 0, movedPanel[0]);\n\n        // Update panel indexes\n        project.panels.forEach((p, i) => p.index = i)\n\n        // Focus the panel  \n        project.focusedPanelIndex = action.toIndex\n\n        break\n      }\n\n      case 'CLOSE_PANEL': {\n\n        const canClosePanel =\n          action.saveOutcome == \"noUnsavedChanges\" ||\n          action.saveOutcome == \"saved\" ||\n          action.saveOutcome == \"dontSave\"\n\n        // If it's safe to close the panel, do so. \n        // Else, do nothing. \n        if (canClosePanel) {\n          closePanel(project, action.panelIndex)\n        } else {\n          // Do nothing\n        }\n\n        break\n      }\n\n      case 'SAVE_PANEL_CHANGES_SO_WE_CAN_CLOSE_WINDOW': {\n\n        const panel = project.panels[action.panelIndex]\n\n        const panelChangesAreSaved =\n          action.saveOutcome == 'noUnsavedChanges' ||\n          action.saveOutcome == 'saved' ||\n          action.saveOutcome == 'dontSave'\n\n        // If there are no unsaved changes in any panels,\n        // mark the window `safeToClose`.\n        // Else, if the user cancelled a save flow.\n        // cancel the window closing.\n        if (panelChangesAreSaved && project.window.status == 'wantsToClose') {\n\n          panel.unsavedChanges = false\n\n          const allPanelsHaveSaved = project.panels.every((p) => !p.unsavedChanges)\n          if (allPanelsHaveSaved) {\n            project.window.status = 'safeToClose'\n          }\n\n        } else if (action.saveOutcome == 'cancelled' && project.window.status == 'wantsToClose') {\n\n          // Cancel window closing\n          project.window.status = 'open'\n\n          // Cancel app quitting (if it's in progress)\n          if (draft.appStatus == 'wantsToQuit') {\n            draft.appStatus = 'open'\n          }\n\n        }\n\n        break\n      }\n\n      case 'SET_PANEL_WIDTHS': {\n        project.panels.forEach((panel, i) => panel.width = action.widths[i])\n        break\n      }\n\n      case 'FOCUS_PANEL': {\n        project.focusedPanelIndex = action.panelIndex\n        const panel = project.panels[action.panelIndex]\n        // Select the file in the sidebar\n        const activeSideBarTab = project.sidebar.tabsById[project.sidebar.activeTabId]\n        activeSideBarTab.lastSelected = panel.docId\n        activeSideBarTab.selected = [panel.docId]\n        break\n      }\n\n      // EDITING\n\n      case 'SET_SOURCE_MODE': {\n        draft.sourceMode = action.enabled\n        break\n      }\n\n      case 'SET_FRONT_MATTER_COLLAPSED': {\n        draft.frontMatterCollapsed = action.value\n        break\n      }\n\n      case 'SET_UNSAVED_CHANGES': {\n        const panel = project.panels[action.panelIndex]\n        panel.unsavedChanges = action.value\n        break\n      }\n\n      case 'SAVE_DOC': {\n        const panel = project.panels[action.panelIndex]\n        if (action.saveOutcome == 'saved') {\n          panel.unsavedChanges = false\n        }\n        break\n      }\n\n      case 'SAVE_DOC_AS': {\n        const panel = project.panels[action.panelIndex]\n\n        // If saved successfully, set unsavedChanges false,\n        // and tell panel to load the new file.\n        if (action.saveOutcome == 'saved') {\n          panel.unsavedChanges = false\n          panel.status = 'justSavedAsAndWaitingToLoadTheNewFile'\n          panel.pendingFilePathToLoad = action.saveToPath\n        }\n\n        break\n      }\n\n      case 'SAVE_CURSOR_POSITION': {\n        draft.cursorPositionHistory[action.docId] = {\n          line: action.line,\n          ch: action.ch\n        }\n        break\n      }\n\n      // WIZARD\n\n      case 'TOGGLE_WIZARD_OPTIONAL_LINK_FIELDS': {\n        draft.wizard.showOptionalLinkFields = action.value\n        break\n      }\n\n      case 'TOGGLE_WIZARD_OPTIONAL_IMAGE_FIELDS': {\n        draft.wizard.showOptionalImageFields = action.value\n        break\n      }\n\n      // LIGHTBOX\n\n      case 'OPEN_LIGHTBOX': {\n        draft.lightbox.open = true\n        draft.lightbox.selectedIndex = action.selectedIndex\n        draft.lightbox.images = action.images\n        break\n      }\n\n      case 'CLOSE_LIGHTBOX': {\n        draft.lightbox.open = false\n        draft.lightbox.selectedIndex = 0\n        draft.lightbox.images = []\n        break\n      }\n\n      case 'LIGHTBOX_PREV': {\n        draft.lightbox.selectedIndex -= 1\n        break\n      }\n      \n      case 'LIGHTBOX_NEXT': {\n        draft.lightbox.selectedIndex += 1\n        break\n      }\n\n    }\n  }, (patches) => {\n    // Update `global.patches`\n    global.patches = patches\n  }\n  )\n\n/**\n * Remove panel from the `panels` index of the selected project.\n * Then update index of other panels as needed.\n */\nfunction closePanel(project, panelIndex) {\n  project.panels.splice(panelIndex, 1)\n\n  // Set all panels to equal percentage of total\n  const panelWidth = (100 / project.panels.length).toFixed(1)\n  project.panels.forEach((p) => p.width = panelWidth)\n\n  // Update focusedPanel:\n  // If there is only one panel left, focus it. Else...\n  // * If it was to LEFT of the closed panel, the value is unchanged.\n  // * If it WAS closed the closed panel, the value is unchanged (this will focus the adjacent panel).\n  // * ...unless it was the panel furthest right, in which case we focus the new last panel.\n  // * If it was to RIGHT of the closed panel, decrement the value by one.\n\n  if (project.panels.length == 1) {\n    project.focusedPanelIndex = 0\n  } else {\n    const closedPanelWasLeftOfFocusedPanel = panelIndex < project.focusedPanelIndex\n    const closedPanelWasFocusedAndFurthestRight = panelIndex == project.focusedPanelIndex && panelIndex == project.panels.length\n\n    if (closedPanelWasLeftOfFocusedPanel) {\n      project.focusedPanelIndex = project.focusedPanelIndex - 1\n    } else if (closedPanelWasFocusedAndFurthestRight) {\n      project.focusedPanelIndex = project.panels.length - 1\n    }\n  }\n\n  // Update panel indexes\n  project.panels.forEach((p, i) => p.index = i)\n}\n\n\n/**\n* Each project needs to store the ID of the window it's associated with. The BrowserWindow hasn't been created yet for this project (that's handled by WindowManager), but we know what ID the window will be: BrowserWindow ids start at 1 and go up. And removed BrowserWindows do not release their IDs back into the available set. So the next BrowserWindow id is always +1 of the highest existing.\n*/\nfunction getNextWindowId() {\n  const existingWindowIds = BrowserWindow.getAllWindows()\n    .map((win) => win.id)\n  const nextWindowId = Math.max(existingWindowIds) + 1\n  return nextWindowId\n}\n\n/**\n * Insert a new blank project into state.projects array\n */\nfunction createNewProject() {\n  const project = { ...newProject, id: nanoid() }\n  // Immer won't let us assign `window.id = getNextWindowId()`.\n  // Because window is itself an object, we need to immutably modify it.\n  // By assigning it a new object (instead of modifying the original).\n  project.window = { ...project.window, id: getNextWindowId() }\n  return project\n}\n\n/**\n * Check that directory exists, and we can write to it.\n * @param {} directory - System path to check\n */\nfunction isDirectoryAccessible(directory) {\n  try {\n    accessSync(directory, fs.constants.W_OK)\n    return true\n  } catch (err) {\n    return false\n  }\n}","import { app, BrowserWindow } from 'electron'\nimport ElectronStore from 'electron-store'\nimport { update } from './reducers'\n\nimport colors from 'colors'\n\n\nexport class Store extends ElectronStore {\n  constructor() {\n    // Note: `super` lets us access and call functions on object's parent (MDN)\n    // We pass in our config options for electron-store\n    // Per: https://github.com/sindresorhus/electron-store#options\n    super({\n      name: \"store\",\n      defaults: storeDefault\n      // schema: StoreSchema\n    })\n  }\n\n  async dispatch(action, window = undefined) {\n\n    if (!app.isPackaged) logTheAction(action)\n\n    // Get next state. \n    // `update` function also updates `global.patches`.\n    const nextState = update(store.store, action, window)\n\n    // Apply next state to Store\n    this.set(nextState)\n\n    // Send patches to render proces\n    const windows = BrowserWindow.getAllWindows()\n    if (windows.length) {\n      windows.forEach((win) => win.webContents.send('statePatchesFromMain', global.patches))\n    }\n  }\n}\n\nfunction logTheAction(action) {\n  console.log(\n    // `Action:`.bgBrightGreen.black,\n    `${action.type}`.bgBrightGreen.black.bold,\n    // `(Store.js)`.green\n  )\n}\n\nconst storeDefault = {\n\n  // ----------- APP ----------- //\n\n  platform: '', // 'mac' or 'windows'\n\n  appStatus: 'open',\n\n  darkMode: 'match-system',\n\n  theme: {\n    id: 'cupertino-light',\n    isDark: false,\n    installed: {\n      \"cupertino-light\": { name: \"Cupertino Light\", isDark: false },\n      \"cupertino-dark\": { name: \"Cupertino Dark\", isDark: true },\n    }\n  },\n\n  // Array of system colors. E.g.\n  // accentColor: \"#007aff\"\n  systemColors: {\n  },\n\n  developer: {\n    showGrid: false\n  },\n\n  editorFont: {\n    default: 15,\n    size: 15,\n    min: 12,\n    max: 18,\n    increment: 1\n  },\n\n  editorLineHeight: {\n    default: 1.6,\n    size: 1.6,\n    min: 1.2,\n    max: 2.0,\n    increment: 0.1,\n  },\n\n  editorMaxLineWidth: {\n    default: 38,\n    size: 38,\n    min: 30,\n    max: 50,\n    increment: 2,\n  },\n\n  system: {\n    // macos: We check using `systemPreferences.getUserDefault(AppleKeyboardUIMode, integer)`\n    keyboardNavEnabled: false\n  },\n\n  chromium: {\n    themeSource: 'system',\n    isDarkMode: false,\n    isHighContrast: false,\n    isInverted: false,\n    isReducedMotion: false,\n  },\n\n  lightbox: {\n    open: false,\n    selectedIndex: 0,\n    images: []\n  },\n\n  wizard: {\n    showOptionalLinkFields: false,\n    showOptionalImageFields: false\n  },\n\n  sourceMode: false,\n\n  frontMatterCollapsed: false,\n\n  focusedWindowId: 0,\n\n  prefs: {\n    isOpen: false\n  },\n\n  timing: {\n    treeListFolder: 300,\n  },\n\n  markdown: {\n    implicitFigures: true,\n    emoji: true,\n    strikethrough: true,\n    taskLists: true,\n    fencedCodeBlockHighlighting: false,\n    allowAtxHeaderWithoutSpace: false,\n    ulMarkerChar: '*',\n    strongChar: '**',\n    emphasisChar: '_'\n  },\n\n  // When tabbing through document, we can control which elements are tabbable\n  tabbables: {\n    blockquote: false,\n    citation: true,\n    code: false,\n    emphasis: false,\n    fencedcodeblock: false,\n    footnote: true,\n    // frontmatter: false // TODO\n    header: false,\n    hr: false,\n    image: true,\n    link: true,\n    list: false,\n    math: false,\n    strikethrough: false,\n    strong: false,\n    taskList: false,\n  },\n\n  // Set of objects where key is doc id, and cursor position is \n  // recorded in `line` and `ch` properties.\n  cursorPositionHistory: {},\n\n  // ----------- PROJECTS ----------- //\n\n  projects: {\n    allIds: [],\n    byId: {}\n  }\n\n  // projects: []\n\n}\n\nexport const newPanel = {\n  status: '', // E.g. 'userWantsToLoadDoc'\n  index: 0,\n  id: '', // Generate with nanoid\n  docId: '',\n  width: '100', // Percentage\n  unsavedChanges: false\n}\n\nexport const newProject = {\n\n  // Used to associate windows with projects. Generated by nanoid.\n  // id: '',\n\n  window: {\n    // Used to associate windows with projects\n    id: 0,\n    // Used when closing window (to check if it's safe to do so or not)\n    status: 'new',\n    isDraggedOver: false,\n    bounds: { x: 0, y: 0, width: 1600, height: 1200 }\n  },\n\n  // User specified directory to folder containing their project files\n  directory: '',\n\n  // User specified path to CSL-JSON file containing their citatons\n  citations: '',\n\n  focusedSectionId: 'sidebar',\n\n  // Index of focused panel\n  focusedPanelIndex: 0,\n\n  // draggedFileId: '',\n\n  // A copy of the object of the document currently visible in the editor.\n  // TODO: Is made obsolete by switch to panels. Remove.\n  openDoc: {},\n\n  // List of the open panels\n  // See `newPanel` for template\n  panels: [],\n\n  // SideBar\n  sidebar: {\n    isOpen: true,\n    isPreviewOpen: true,\n    activeTabId: 'project',\n    width: 250,\n    defaultWidth: 250,\n    tabsById: {\n      project: {\n        title: 'Project',\n        lastSelected: {}, // id\n        selected: [], // Array of ids\n        expanded: [], // Array of folder ids\n        sortBy: 'By Title',\n        sortOrder: 'Ascending'\n      },\n      allDocs: {\n        title: 'All Documents',\n        lastSelected: {},\n        selected: [],\n        sortBy: 'By Title',\n        sortOrder: 'Ascending'\n      },\n      mostRecent: {\n        title: 'Most Recent',\n        lastSelected: {},\n        selected: [],\n        sortBy: 'By Title',\n        sortOrder: 'Ascending'\n      },\n      tags: {\n        title: 'Tags',\n        lastSelected: {},\n        selected: [],\n        sortBy: 'By Title',\n        sortOrder: 'Ascending',\n        selectedTags: []\n      },\n      media: {\n        title: 'Media',\n        lastSelected: {},\n        selected: [],\n        sortBy: 'By Name',\n        sortOrder: 'Ascending'\n      },\n      // citations: {\n      //   title: 'Citations',\n      //   lastSelected: {},\n      //   selected: [],\n      // },\n      search: {\n        title: 'Search',\n        lastSelected: {},\n        selected: [],\n        queryValue: '',\n        inputToFocusOnOpen: 'search',\n        options: {\n          isOpen: false,\n          matchCase: false,\n          matchExactPhrase: false,\n          lookIn: '*',\n          tags: []\n        },\n        replace: {\n          isOpen: false,\n        }\n      }\n    },\n    tabsAll: ['project', 'allDocs', 'mostRecent', 'tags', 'media', 'search']\n    // tabsAll: ['project', 'allDocs', 'mostRecent', 'tags', 'media', 'citations', 'search']\n  }\n}\n","import deepEql from 'deep-eql'\n// import path from 'path'\n// import mime from 'mime-types'\n\n\n/* -------------------------------------------------------------------------- */\n/*                            PROTOTYPE EXTENSIONS                            */\n/* -------------------------------------------------------------------------- */\n\n/**\n * Return true if array has ALL of the items\n * @param  {...any} items - One or more strings\n */\nArray.prototype.hasAll = function (...items) {\n  return items.every((i) => this.includes(i))\n}\n\n/**\n * Return true if array has ANY of the items\n * @param  {...any} items - One or more strings\n */\nArray.prototype.hasAny = function (...items) {\n  return items.some((i) => this.includes(i))\n}\n\n/**\n * Return true if string includes any of the items.\n * E.g. Returns true if item is `-span` and string is `text-span`\n * @param  {...any} items - One or more strings\n */\nString.prototype.includesAny = function (...items) {\n  return items.some((i) => this.includes(i))\n}\n\n/**\n * Return true if string includes ALL of the items.\n * E.g. Returns true if string is \"reference-full\" and items\n * are \"reference\" and \"full\"\n * @param  {...any} items - One or more strings\n */\nString.prototype.includesAll = function (...items) {\n  return items.every((i) => this.includes(i))\n}\n\n/**\n * Return true if string equals any of the items.\n * E.g. Returns true if item is `hello` and string is `hello`\n * @param  {...any} items - One or more strings\n */\nString.prototype.equalsAny = function (...items) {\n  return items.some((i) => i === this)\n}\n\n/**\n * Return first character of string\n */\nString.prototype.firstChar = function () {\n  return this.charAt(0)\n}\n\n/**\n * Return last character of string\n */\nString.prototype.lastChar = function () {\n  return this.charAt(this.length - 1)\n}\n\n/**\n * Round a number to two decimal places\n * From: https://www.delftstack.com/howto/javascript/javascript-round-to-2-decimal-places/\n */\nNumber.prototype.roundToTwo = function() {\n  return +(Math.round(this + \"e+2\")  + \"e-2\")\n}\n\n\n\n/* -------------------------------------------------------------------------- */\n/*                                MISC HELPERS                                */\n/* -------------------------------------------------------------------------- */\n\n/**\n * Call the specified function after the specified delay.\n * Used to throttle functions that we don't want to fire\n * too rapidly. E.g. we're calling a complicated resize \n * function from `mousemove` listener.\n * From: https://codeburst.io/throttling-and-debouncing-in-javascript-646d076d0a44\n */\nexport function throttle(delay, fn) {\n  let lastCall = 0;\n  return function (...args) {\n    const now = (new Date).getTime();\n    if (now - lastCall < delay) {\n      return;\n    }\n    lastCall = now;\n    return fn(...args);\n  }\n}\n\n/**\n * Return true if element has ancestor with specified id.\n * (or if the element itself has the id)\n * From: https://flaviocopes.com/how-to-check-element-descendant/\n * @param {object} el - DOM element.\n * @param {string} parentId - E.g. 'wizard'\n */\nexport function isDescendantOfId(el, parentId) {\n  let isDescendant = false\n\n  // First check if `el` is parentId.\n  // If no, iterate up ancestors using while loop,\n  // until there are no more parent nodes. In which case\n  // `el.parentNode` returns null, and loop ends.\n\n  if (el.id === parentId) {\n    isDescendant = true\n  } else {\n    while (el = el.parentNode) {\n      if (el.id == parentId) {\n        isDescendant = true\n      }\n    }\n  }\n\n  return isDescendant\n}\n\n/**\n * Return true if element has ancestor with specified class.\n * (or if the element itself has the class)\n * @param {object} el - DOM element.\n * @param {string} parentClass - E.g. 'frontmatter'\n * @returns \n */\nexport function isDescendantOfClass(el, parentClass) {\n  let isDescendant = false\n\n  // First check if `el` contains parentClass.\n  // If no, iterate up ancestors using while loop,\n  // until there are no more parent nodes. In which case\n  // `el.parentNode` returns null, and loop ends.\n\n  if (el.classList?.contains(parentClass)) {\n    isDescendant = true\n  } else {\n    while (el = el.parentNode) {\n      if (el.classList?.contains(parentClass)) {\n        isDescendant = true\n      }\n    }\n  }\n\n  return isDescendant\n}\n\n/**\n  * From: https://stackoverflow.com/a/53187807\n  * Returns the index of the last element in the array where predicate is true, and -1\n  * otherwise.\n  * @param array - The source array to search in\n  * @param predicate - Calls predicate once for each element of the array, in descending\n  * order, until it finds one where predicate returns true. If such an element is found,\n  * findLastIndex immediately returns that element index. Otherwise, findLastIndex returns -1.\n  * predicate receives 1) array item the index of l, 2) index l, and 3) the whole array.\n  */\n// export function findLastIndex(array, predicate: (value: T, index: number, obj: T[]) => boolean): number {\nexport function findLastIndex(array, predicate) {\n  let l = array.length;\n  while (l--) {\n    if (predicate(array[l], l, array))\n      return l;\n  }\n  return -1;\n}\n\n/**\n * Returns true if arrays have same items in same order\n * From: https://gomakethings.com/how-to-check-if-two-arrays-are-equal-with-vanilla-js/\n */\nexport function arraysEqual(arr1, arr2) {\n\n  // Check if the arrays are the same length\n  if (arr1.length !== arr2.length) return false\n\n  // Check if all items exist and are in the same order\n  for (var i = 0; i < arr1.length; i++) {\n    if (arr1[i] !== arr2[i]) return false\n  }\n\n  return true\n}\n\n/**\n * Get the diff between two arrays\n * For [1, 2, 3] and [1, 2], it will return [3]\n * From: https://stackoverflow.com/a/33034768\n */\nexport function getArrayDiff(arr1, arr2) {\n  return arr1.filter(x => !arr2.includes(x));\n}\n\n/**\n * Get file size in KB, MB, GB, or TB (whatever is closest), from bytes.\n * From: https://gist.github.com/lanqy/5193417#gistcomment-3240729\n * @param {*} bytes\n * @param {*} separator \n * @param {*} postFix \n */\nexport function prettySize(bytes, separator = ' ', postFix = '') {\n  if (bytes) {\n    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n    const i = Math.min(parseInt(Math.floor(Math.log(bytes) / Math.log(1024)).toString(), 10), sizes.length - 1);\n    return `${(bytes / (1024 ** i)).toFixed(i ? 1 : 0)}${separator}${sizes[i]}${postFix}`;\n  }\n  return 'n/a';\n}\n\n/**\n * Shorthand function for `JSON.stringify`\n * @param {*} value \n */\nexport function stringify(value) {\n  return JSON.stringify(value, null, '\\t')\n}\n\n/**\n * Wrap setTimeout in a promise so we can use with async/await. \n * Use like: `await wait(1000);`\n * @param {*} ms \n */\nexport async function wait(ms) {\n  return new Promise(resolve => {\n    setTimeout(resolve, ms);\n  });\n}\n\nexport function findInTree(tree, value, key = 'id', reverse = false) {\n  const stack = [tree[0]]\n  while (stack.length) {\n    const node = stack[reverse ? 'pop' : 'shift']()\n    if (node[key] === value) return node\n    node.children && stack.push(...node.children)\n  }\n  return null\n}\n\n// Copied from:\n// https://github.com/Rich-Harris/yootils/blob/master/src/number/clamp.ts\nexport function clamp(num, min, max) {\n  return num < min ? min : num > max ? max : num;\n}\n\n\n/* -------------------------------------------------------------------------- */\n/*                                CHECK FORMAT                                */\n/* -------------------------------------------------------------------------- */\n\nconst formats = {\n  document: ['.md', '.markdown'],\n  image: ['.apng', '.bmp', '.gif', '.jpg', '.jpeg', '.jfif', '.pjpeg', '.pjp', '.png', '.svg', '.tif', '.tiff', '.webp'],\n  av: ['.flac', '.mp4', '.m4a', '.mp3', '.ogv', '.ogm', '.ogg', '.oga', '.opus', '.webm'],\n  \n  // Video containers (file types)\n  // If a container supports both audio and video (e.g. WebM), we categorize as video,\n  // since <video> also works for audio, but <audio> does not work for video.\n  // See: https://developer.mozilla.org/en-US/docs/Web/Media/Formats/Containers#index_of_media_container_formats_file_types\n  // video: [\n    \n  //   // Mp4\n  //   // Supported by Chrome? - Y\n  //   '.mp4', \n\n  //   // WebM\n  //   // Supported by Chrome? - Y\n  //   '.webm',\n    \n  //   // Ogg\n  //   // Supported by Chrome? - Y\n  //   '.ogg',\n\n  //   // QuickTime\n  //   // Supported by Chrome? - N\n  //   '.mov',\n\n  //   // The OGM file format is a compressed video container file format. The files can contain streams of audio and video data as well as text and metadata. OGM files use the Ogg Vorbis compression technology and contain audio and video stream files that can be played on a user's computer.\n  //   '.ogm', \n\n  //   // An OGV file is a video file saved in the Xiph.Org open source Ogg container format. It contains video streams that may use one or more different codecs, such as Theora, Dirac, or Daala.\n  //   '.ogv',\n\n  //   // The 3GP or 3GPP media container is used to encapsulate audio and/or video that is specifically intended for transmission over cellular networks for consumption on mobile devices.\n  //   '.3gp'\n  // ],\n\n  // audio: [\n    \n  //   // \"The Free Lossless Audio Codec (FLAC) is a lossless audio codec; there is also an associated simple container format, also called FLAC, that can contain this audio.\"\n  //   // https://developer.mozilla.org/en-US/docs/Web/Media/Formats/Containers#flac\n  //   '.flac', \n\n  //   // M4A is a file extension for an audio file encoded with advanced audio coding (AAC) which is a lossy compression. M4A was generally intended as the successor to MP3, which had not been originally designed for audio only but was layer III in an MPEG 1 or 2 video files. M4A stands for MPEG 4 Audio.\n  //   '.m4a', \n\n  //   // Mp4s are MPEG files that contain Layer_III/MP3 sound data.\n  //   '.mp3', \n  //   ''\n  // ]\n}\n\nexport const urlRE = new RegExp(/^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\\.beep|\\.lwz|\\.xpc|\\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\\.beeps?|xmpp|xri|ymsgr|z39\\.50[rs]?):(?:\\/{1,3}|[a-z0-9%])|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}\\/)(?:[^\\s()<>]|\\([^\\s()<>]*\\))+(?:\\([^\\s()<>]*\\)|[^\\s`*!()\\[\\]{};:'\".,<>?«»“”‘’]))/i)\n\nconst imagePathRE = new RegExp(/^.*?\\.(apng|bmp|gif|jpg|jpeg|jfif|pjpeg|pjp|png|svg|tif|tiff|webp)$/i)\n\nexport const htmlRE = new RegExp(/<\\/?[a-z][\\s\\S]*>/)\n\n\n/**\n * Return true if URL tests positive against GitHub's URL regex.\n * https://github.com/codemirror/CodeMirror/blob/master/mode/gfm/gfm.js#L14\n */\nexport function isUrl(string) {\n  return urlRE.test(string)\n}\n\n/**\n * Return true if `string` is URL and protocol is http or https.\n * Uses browser `URL` interface.\n * @param {*} string - url to text\n */\nexport function isValidHttpUrl(string) {\n  let url;\n\n  try {\n    url = new URL(string);\n  } catch (_) {\n    return false;\n  }\n\n  return url.protocol === \"http:\" || url.protocol === \"https:\";\n}\n\n/**\n * Return true if string has valid image file format extension\n * E.g. .jpg, .gif, .apng.\n */\nexport function isImagePath(string) {\n  return imagePathRE.test(string)\n}\n\n/**\n * Return true if file extension is among valid doc formats.\n */\nexport function isDoc(extension) {\n  return formats.document.includes(extension)\n}\n\n/**\n * Return true if Content-Type of file is \n */\nexport function isMedia(extension) {\n\n  // Return false if json. Helps prevent error from mime package.\n  // if (filepath.includesAny('.DS_Store', '.json')) return false\n\n  // const contentType = mime.lookup(filepath)\n\n  // return contentType.includesAny('video', 'audio', 'image')\n\n  const isImage = formats.image.includes(extension)\n  const isAV = formats.av.includes(extension)\n  return isImage || isAV\n}\n\n/**\n * Check if string contains HTML. Uses regexp from StackOverflow:\n * https://stackoverflow.com/a/15458987\n */\nexport function isHTML(string) {\n  return htmlRE.test(string)\n}\n\n/**\n * Return media type ('img' or 'av'), based on file extension.\n */\nexport function getMediaType(extension) {\n  const isImage = formats.image.includes(extension)\n  const isAV = formats.av.includes(extension)\n  if (isImage) {\n    return 'img'\n  } else if (isAV) {\n    return 'av'\n  } else {\n    console.error('File extension does not match supported media types')\n  }\n}\n\n/**\n * Return file type ('doc', 'img', 'av'), based on file extension.\n */\nexport function getFileType(extension) {\n  if (isDoc(extension)) {\n    return 'doc'\n  } else if (isMedia(extension)) {\n    return getMediaType(extension)\n  }\n}\n\n\n/* -------------------------------------------------------------------------- */\n/*                               COMPARE PATCHES                              */\n/* -------------------------------------------------------------------------- */\n\n/**\n * Check if state property has changed by comparing Immer patches. And (optionally) if property now equals a specified value. For each patch, check if `path` array contains specified `props`, and if `value` value equals specified `toValue`.\n * @param {*} props - Either a string, or an array (for more precision).\n * @param {*} [toValue] - Optional value to check prop against\n */\nexport function stateHasChanged(patches, props, toValue = '') {\n  return patches.some((patch) => {\n\n    const pathAsString = patch.path.toString()\n    const checkMultipleProps = Array.isArray(props)\n\n    const hasChanged = checkMultipleProps ?\n      props.every((key) => pathAsString.includes(key)) :\n      pathAsString.includes(props)\n\n    // If optional 'toValue' argument is specified, check it.\n    // Else, only check `hasChanged`\n    if (toValue) {\n      const equalsValue = patch.value == toValue\n      return hasChanged && equalsValue\n    } else {\n      return hasChanged\n    }\n  })\n}\n\n\n/* -------------------------------------------------------------------------- */\n/*                              WORK WITH OBJECTS                             */\n/* -------------------------------------------------------------------------- */\n\n/**\n * Check if object is empty\" {}\n */\n// Taken from https://coderwall.com/p/_g3x9q/how-to-check-if-javascript-object-is-empty\nexport function isEmpty(obj) {\n  for (var key in obj) {\n    if (obj.hasOwnProperty(key))\n      return false\n  }\n  return true\n}\n\n/**\n * Return true if property values of two objects do not match.\n */\nexport function hasChanged(key, objA, objB) {\n  return objA[key] !== objB[key]\n}\n\n/**\n * Compare two objects and return `true` if they differ.\n * @param {*} objA \n * @param {*} objB \n */\nexport function objHasChanged(objA, objB) {\n  return !deepEql(objA, objB)\n}\n\n/**\n * Check if an object property has changed, \n * by comparing two versions of the object.\n * @param {*} keysAsString - Path of property to check. E.g. 'colors.systemBlue'\n * @param {*} objA - Old version of object\n * @param {*} objB - New version of object\n */\nexport function propHasChanged(keysAsString, objA, objB) {\n  const keys = extractKeysFromString(keysAsString)\n  const objAVal = getNestedObject(objA, keys)\n  const objBVal = getNestedObject(objB, keys)\n  if (objAVal == undefined || objBVal == undefined) {\n    // If either is undefined, return undefined\n    return undefined\n  } else if (typeof objAVal == 'object' && typeof objBVal == 'object') {\n    // If both are objects, do a deep object comparison\n    return !deepEql(objAVal, objBVal)\n  } else {\n    // Else, compare values\n    return objAVal !== objBVal\n  }\n}\n\n/**\n * Check if an object property has changed to a specific value,\n * by comparing old and new versions of the object.\n * @param {*} keysAsString \n * @param {*} value \n * @param {*} objTo \n * @param {*} objFrom \n */\nexport function propHasChangedTo(keysAsString, value, objTo, objFrom) {\n  if (!keysAsString || !value) {\n    // If either required arguments are missing or empty, return undefined\n    return undefined\n  } else {\n    const keys = extractKeysFromString(keysAsString)\n    const objToVal = getNestedObject(objTo, keys)\n    const objFromVal = getNestedObject(objFrom, keys)\n    if (typeof objToVal == 'object' || typeof objFromVal == 'object') {\n      // If either value is an object, return undefined.\n      // For now, we don't allow checking against objects.\n      return undefined\n    } else if (objToVal === objFromVal) {\n      // If no change, return false\n      return false\n    } else {\n      // Else, check if objTo equals value\n      return objToVal === value\n    }\n  }\n}\n\n/**\n * Utility function for `propHasChangedTo`. \n * Convert propAddress string to array of keys.\n * Before: \"projects[5].window\"\n * After: [\"projects\", 5, \"window\"]\n * @param {*} keyAsString \n */\nfunction extractKeysFromString(keyAsString) {\n  const regex = /[^\\.\\[\\]]+?(?=\\.|\\[|\\]|$)/g\n  const keys = keyAsString.match(regex)\n  if (keys && keys.length) {\n    keys.forEach((p, index, thisArray) => {\n      // Find strings that are just integers, and convert to integers\n      if (/\\d/.test(p)) {\n        thisArray[index] = parseInt(p, 10)\n      }\n    })\n  }\n  return keys\n}\n\n/**\n * Utility function for ``propHasChangedTo``. \n * @param {*} nestedObj \n * @param {*} pathArr \n */\nconst getNestedObject = (nestedObj, pathArr) => {\n  return pathArr.reduce((obj, key) =>\n    (obj && obj[key] !== 'undefined') ? obj[key] : undefined, nestedObj);\n}\n\n\n/* -------------------------------------------------------------------------- */\n/*                             RENDER-PROCESS ONLY                            */\n/* -------------------------------------------------------------------------- */\n// Main process cannot use these functions\n\n/**\n * Take a CSS time value, like \"500ms\", and return as milliseconds.\n * \"500ms\" --> 500\n * \"2.5s\" --> 2500\n */\nexport function convertCSSTimeToMilliseconds(time) {\n\n  // If it's not a string, it's not a CSS value. \n  // Return the value unchanged.\n  if (typeof time !== 'string') return time\n\n  const isInSeconds = time.match(/\\d+s/)\n\n  // Use parseFloat to strip CSS <time> prefix \"ms\" or \"s\" values.\n  time = parseFloat(time)\n\n  // If format was seconds, convert to milliseconds\n  if (isInSeconds) time = time * 1000\n\n  return time\n}\n\n/**\n * Return the value of the CSS custom property of the\n * specified name, on the body element.\n * All this does is make declaration more compact.\n * @param {string} propName - Property name, without double dashes. E.g. \"sidebar-color\". \n */\nexport function getCssProp(propName) {\n  return window.getComputedStyle(document.body).getPropertyValue(propName)\n}\n\n/**\n * Mount Svelte component without the unnecessary empty parent frag.\n * From: https://github.com/sveltejs/svelte/issues/1549#issuecomment-397819063\n * @param {*} Component - To be rendered\n * @param {*} options - For the component (e.g. target)\n */\nexport function mountComponent(Component, options) {\n  const frag = document.createDocumentFragment();\n  const component = new Component({ ...options, target: frag });\n  options.target.parentNode.replaceChild(frag, options.target);\n  return component;\n}\n\n/**\n * Select the contents of a target input element or content editable.\n * @param {*} target \n */\nexport function selectInputContents(target) {\n  let selection = window.getSelection();\n  let range = document.createRange();\n  range.selectNodeContents(target);\n  selection.removeAllRanges();\n  selection.addRange(range);\n}\n\n/**\n * For the element (e.g. contenteditable or input), set the caret \n * to the specified position (e.g. 6 character in).\n * @param {dom element} element \n * @param {integer} index - To place caret at\n */\nexport function setCaretPositionByIndex(element, index) {\n  const range = document.createRange()\n  const sel = window.getSelection()\n  range.setStart(element.childNodes[0], index)\n  range.collapse(true)\n  sel.removeAllRanges()\n  sel.addRange(range)\n}\n\n\n/**\n * Return array of focusable elements for the given element.\n */\nexport function getFocusableElements(el) {\n\n  const focusables = 'button:not(disabled), [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n  return el.querySelectorAll(focusables)\n\n}","import { BrowserWindow, app, nativeTheme, systemPreferences } from 'electron'\nimport chroma from 'chroma-js'\nimport { stateHasChanged } from '../shared/utils'\n\nconst isMac = process.platform == 'darwin'\nconst isWin = process.platform == 'win32'\n\n/**\n * User changes value in OS (e.g. accent color)\n * Or we manually set value (e.g. dark mode)\n * Could be dark mode, accent color, etc.\n * Native theme updates.\n * \n * \n */\n\n/**\n * Setup listeners and get initial values.\n */\nexport function init() {\n\n  // When user changes theme, update chromium dark mode to match\n  global.store.onDidAnyChange((state, oldState) => {\n    \n    const hasThemeChanged = stateHasChanged(global.patches, \"theme\")\n    if (hasThemeChanged) setChromiumDarkMode(false)\n    \n    // When user makes changes to View > Dark Mode option, set the \n    // `nativeTheme.themeSource` value on Chromium to match.\n    // const darkModeChanged = stateHasChanged(global.patches, \"darkMode\")\n    // if (darkModeChanged) setNativeTheme(false)\n  })\n\n  // When nativeTheme changes for any reason, save updated \n  // chromium and system color values to store.\n  // Can be triggered by either user app interaction or the OS:\n  // 1) App: User changes theme and we set `nativeTheme.themeSource` to match.\n  // 2) OS: User turns on OS high contrast accessibility option.\n  nativeTheme.on('updated', () => {\n    saveChromiumValues()\n    saveSystemColors()\n  })\n\n\n  // Set initial Chromium dark mode value, per theme\n  setChromiumDarkMode(true)\n}\n\n\n/**\n * When user changes theme, update chromium dark mode to match\n * @param {boolean} isFirstRun \n */\nfunction setChromiumDarkMode(isFirstRun) {\n\n  nativeTheme.themeSource = global.state().theme.isDark ? 'dark' : 'light'\n\n  if (!isFirstRun) {\n    // If dev tools is open, reload (close then open) to force it to load the new theme. Unfortunately it doesn't do so automatically, in either Electron or Chrome.\n    const win = BrowserWindow.getFocusedWindow()\n    const devToolsIsOpen = !app.isPackaged && win?.webContents?.isDevToolsOpened()\n    if (devToolsIsOpen) {\n      win.webContents.closeDevTools()\n      win.webContents.openDevTools()\n    }\n  }\n}\n\n/**\n * Save Chromium appearance-related values to store.\n */\n function saveChromiumValues() {\n  store.dispatch({\n    type: 'SAVE_CHROMIUM_VALUES',\n    values: {\n      themeSource: nativeTheme.themeSource,\n      isDarkMode: nativeTheme.shouldUseDarkColors,\n      isHighContrast: nativeTheme.shouldUseHighContrastColors,\n      isInverted: nativeTheme.shouldUseInvertedColorScheme,\n      isReducedMotion: systemPreferences.getAnimationSettings().prefersReducedMotion\n    }\n  })\n}\n\n\n/**\n * Save system colors to store.\n */\n export async function saveSystemColors() {\n  \n  const accentColor = chroma(systemPreferences.getAccentColor()).hex()\n  let accentColor_h = chroma(accentColor).get(\"hsl.h\").roundToTwo() \n  const accentColor_s = (chroma(accentColor).get(\"hsl.s\") * 100).roundToTwo().toString() + \"%\"\n  const accentColor_l = (chroma(accentColor).get(\"hsl.l\") * 100).roundToTwo().toString() + \"%\"\n  \n  // Annoyingly, Chroma sets 0 hue values to NaN.\n  // so we have to manually correct them to zero.\n  if (!accentColor_h) accentColor_H = 0 \n\n  let systemColors = {\n    accentColor,\n    accentColor_h,\n    accentColor_s,\n    accentColor_l,\n    ...getSystemColors()\n  }\n\n\n  await global.store.dispatch({ \n    type: 'SAVE_SYSTEM_COLORS', \n    colors: systemColors\n  })\n}\n\n\n/**\n * Return macOS system colors.\n * TODO: Dynamically get these once this electron issue is fixed:\n * https://github.com/electron/electron/issues/26628\n * For now we have to hard code these values.\n * NOTE: Commented-out values are unused, so we comment them\n * to keep them from cluttering our CSS variables.\n * @returns Object with system colors\n */\nfunction getSystemColors() {\n  \n  if (global.state().theme.isDark) {\n    return {\n      // alternateSelectedControlTextColor: '#FFFFFFFF',\n      // findHighlightColor: '#FFFF00FF',\n      // highlightColor: '#B4B4B4FF',\n      // linkColor: '#419CFFFF',\n      // selectedTextColor: '#FFFFFFFF',\n      // textBackgroundColor: '#1E1E1EFF',\n      // unemphasizedSelectedContentBackgroundColor: '#464646FF',\n      // unemphasizedSelectedTextBackgroundColor: '#464646FF',\n      // unemphasizedSelectedTextColor: '#FFFFFFFF',\n      // windowFrameTextColor: '#FFFFFFD8',\n      controlBackgroundColor: '#1E1E1EFF',\n      controlColor: '#FFFFFF3F',\n      controlTextColor: '#FFFFFFD8',\n      disabledControlTextColor: '#FFFFFF3F',\n      gridColor: '#FFFFFF19',\n      headerTextColor: '#FFFFFFFF',\n      labelColor: '#FFFFFFD8',\n      placeholderTextColor: '#FFFFFF3F',\n      quaternaryLabelColor: '#FFFFFF19',\n      secondaryLabelColor: '#FFFFFF8C',\n      selectedControlTextColor: '#FFFFFFD8',\n      selectedMenuItemTextColor: '#FFFFFFFF',\n      separatorColor: '#FFFFFF19',\n      shadowColor: '#000000FF',\n      tertiaryLabelColor: '#FFFFFF3F',\n      textColor: '#FFFFFFFF',\n      windowBackgroundColor: '#323232FF',\n    }\n  } else {\n    return {\n      // alternateSelectedControlTextColor: '#FFFFFFFF',\n      // findHighlightColor: '#FFFF00FF',\n      // highlightColor: '#FFFFFFFF',\n      // linkColor: '#0068DAFF',\n      // selectedTextColor: '#000000FF',\n      // textBackgroundColor: '#FFFFFFFF',\n      // unemphasizedSelectedContentBackgroundColor: '#DCDCDCFF',\n      // unemphasizedSelectedTextBackgroundColor: '#DCDCDCFF',\n      // unemphasizedSelectedTextColor: '#000000FF',\n      // windowFrameTextColor: '#000000D8',  \n      controlBackgroundColor: '#FFFFFFFF',\n      controlColor: '#FFFFFFFF',\n      controlTextColor: '#000000D8',\n      disabledControlTextColor: '#0000003F',\n      gridColor: '#E6E6E6FF',\n      headerTextColor: '#000000D8',\n      labelColor: '#000000D8',\n      placeholderTextColor: '#0000003F',\n      quaternaryLabelColor: '#00000019',\n      secondaryLabelColor: '#0000007F',\n      selectedControlTextColor: '#000000D8',\n      selectedMenuItemTextColor: '#FFFFFFFF',\n      separatorColor: '#00000019',\n      shadowColor: '#000000FF',\n      tertiaryLabelColor: '#00000042',\n      textColor: '#000000FF',\n      windowBackgroundColor: '#ECECECFF',\n    }\n  }\n\n}\n\n\n\n\n\n\n\n\n\n/**\n * Update `nativeTheme` electron property\n * Setting `nativeTheme.themeSource` has several effects, including: it tells Chrome how to render UI elements such as menus, window frames, etc; it sets `prefers-color-scheme` css query; it sets `nativeTheme.shouldUseDarkColors` value.\n * Per: https://www.electronjs.org/docs/api/native-theme\n */\n// function setNativeTheme(isFirstRun) {\n//   const darkMode = global.state().darkMode\n//   switch (darkMode) {\n//     case 'match-system':\n//       nativeTheme.themeSource = 'system'\n//       break\n//     case 'light':\n//       nativeTheme.themeSource = 'light'\n//       break\n//     case 'dark':\n//       nativeTheme.themeSource = 'dark'\n//       break\n//   }\n\n//   if (!isFirstRun) {\n//     // If dev tools is open, reload (close then open) to force it to load the new theme. Unfortunately it doesn't do so automatically, in either Electron or Chrome.\n//     const win = BrowserWindow.getFocusedWindow()\n//     const devToolsIsOpen = !app.isPackaged && win?.webContents?.isDevToolsOpened()\n//     if (devToolsIsOpen) {\n//       win.webContents.closeDevTools()\n//       win.webContents.openDevTools()\n//     }\n//   }\n// }\n\n\n\n\n\n\n// -------- COLORS -------- //\n\n\n\n/**\n * Return an object with list of named colors. \n * These are turned into CSS variables by the render process.\n * Colors start off taken from the operating system, and (optionally)\n * overrides are applied by the loaded theme.\n * @param {*} observeThemeValues - If true, adhere to theme overrides.\n */\n// export function getSystemColorsOld(observeThemeValues = true) {\n\n//   let colors = {}\n//   let overriddenVariables = []\n//   const state = global.state()\n\n//   // Get initial colors. By default, we match what Chromium's state.\n//   // E.g. If Chromium isDarkMode is true, we return dark colors.\n//   // Themes can override this with `theme.baseColorScheme` value.\n//   // If `observeThemeValues` is true, we use this value.\n//   if (!observeThemeValues) {\n//     colors = state.chromium.isDarkMode ? getDarkColors() : getLightColors()\n//   } else {\n//     switch (state.theme.baseColorScheme) {\n//       case 'match-app':\n//         if (state.chromium.isDarkMode) {\n//           colors = getDarkColors()\n//         } else {\n//           colors = getLightColors()\n//         }\n//         break\n//       case 'dark':\n//         colors = getDarkColors()\n//         break\n//       case 'light':\n//         colors = getLightColors()\n//         break\n//     }\n//   }\n\n\n//   // Apply color overrides. Themes can specify overrides for\n//   // individual color variables. `withMode` specifies when they\n//   // apply. Always, or only when app is in light or dark mode.\n//   if (observeThemeValues) {\n//     state.theme.colorOverrides.forEach(({ variable, newValue, withMode }) => {\n\n//       const appliesToCurrentMode =\n//         withMode == 'always' ||\n//         withMode == 'dark' && state.chromium.isDarkMode ||\n//         withMode == 'light' && !state.chromium.isDarkMode\n\n//       if (appliesToCurrentMode) {\n//         colors[variable] = newValue\n//         overriddenVariables.push(variable)\n//         // If overrides sets `controlAccentColor` variable (and only it), \n//         // we need to also generate the darker variation.\n//         if (variable == 'controlAccentColor') {\n//           colors.darkerControlAccentColor = getDarkerAccentColor(colors.controlAccentColor)\n//         }\n//       }\n//     })\n//   }\n\n//   return {\n//     colors,\n//     overriddenVariables\n//   }\n// }\n\n\n// function getDarkColors() {\n//   return {\n\n//     // Gambier-specific colors\n//     // errorColor: '#FA6E50',\n\n//     // macOS \"Dynamic colors\":\n//     // https://developer.apple.com/design/human-interface-guidelines/ios/visual-design/color#dynamic-system-colors\n//     ...getAccentColors(true),\n//     alternateSelectedControlTextColor: '#FFFFFFFF',\n//     controlBackgroundColor: '#1E1E1EFF',\n//     controlColor: '#FFFFFF3F',\n//     controlTextColor: '#FFFFFFD8',\n//     disabledControlTextColor: '#FFFFFF3F',\n//     findHighlightColor: '#FFFF00FF',\n//     gridColor: '#FFFFFF19',\n//     headerTextColor: '#FFFFFFFF',\n//     highlightColor: '#B4B4B4FF',\n//     labelColor: '#FFFFFFD8',\n//     linkColor: '#419CFFFF',\n//     placeholderTextColor: '#FFFFFF3F',\n//     quaternaryLabelColor: '#FFFFFF19',\n//     secondaryLabelColor: '#FFFFFF8C',\n//     selectedControlTextColor: '#FFFFFFD8',\n//     selectedMenuItemTextColor: '#FFFFFFFF',\n//     selectedTextColor: '#FFFFFFFF',\n//     separatorColor: '#FFFFFF19',\n//     shadowColor: '#000000FF',\n//     tertiaryLabelColor: '#FFFFFF3F',\n//     textBackgroundColor: '#1E1E1EFF',\n//     textColor: '#FFFFFFFF',\n//     unemphasizedSelectedContentBackgroundColor: '#464646FF',\n//     unemphasizedSelectedTextBackgroundColor: '#464646FF',\n//     unemphasizedSelectedTextColor: '#FFFFFFFF',\n//     windowBackgroundColor: '#323232FF',\n//     windowFrameTextColor: '#FFFFFFD8',\n\n//   }\n// }\n\n// function getLightColors() {\n//   return {\n\n//     // Gambier-specific colors\n//     // errorColor: '#FA6E50',\n\n//     // macOS \"Dynamic colors\":\n//     // https://developer.apple.com/design/human-interface-guidelines/ios/visual-design/color#dynamic-system-colors\n//     ...getAccentColors(false),\n//     alternateSelectedControlTextColor: '#FFFFFFFF',\n//     controlBackgroundColor: '#FFFFFFFF',\n//     controlColor: '#FFFFFFFF',\n//     controlTextColor: '#000000D8',\n//     disabledControlTextColor: '#0000003F',\n//     findHighlightColor: '#FFFF00FF',\n//     gridColor: '#E6E6E6FF',\n//     headerTextColor: '#000000D8',\n//     highlightColor: '#FFFFFFFF',\n//     labelColor: '#000000D8',\n//     linkColor: '#0068DAFF',\n//     placeholderTextColor: '#0000003F',\n//     quaternaryLabelColor: '#00000019',\n//     secondaryLabelColor: '#0000007F',\n//     selectedControlTextColor: '#000000D8',\n//     selectedMenuItemTextColor: '#FFFFFFFF',\n//     selectedTextColor: '#000000FF',\n//     separatorColor: '#00000019',\n//     shadowColor: '#000000FF',\n//     tertiaryLabelColor: '#00000042',\n//     textBackgroundColor: '#FFFFFFFF',\n//     textColor: '#000000FF',\n//     unemphasizedSelectedContentBackgroundColor: '#DCDCDCFF',\n//     unemphasizedSelectedTextBackgroundColor: '#DCDCDCFF',\n//     unemphasizedSelectedTextColor: '#000000FF',\n//     windowBackgroundColor: '#ECECECFF',\n//     windowFrameTextColor: '#000000D8',\n//   }\n// }\n\n// /**\n//  * TEMPORARY: Electron returns incorrect values for controlAccentColor. So we have to hard-code the correct values. Filed issue here: https://github.com/electron/electron/issues/27048\n//  */\n// function getAccentColors(isDarkMode) {\n\n//   const allegedAccentColor = `#${systemPreferences.getAccentColor().toUpperCase()}`\n\n//   // console.log(systemPreferences.getAccentColor())\n//   // console.log(systemPreferences.getColor('keyboard-focus-indicator')) // keyboardFocusIndicatorColor\n//   // console.log(systemPreferences.getColor('selected-content-background')) // selectedContentBackgroundColor\n//   // console.log(systemPreferences.getColor('selected-control')) // selectedControlColor\n//   // console.log(systemPreferences.getColor('text-selected-background')) // selectedTextBackgroundColor\n\n//   switch (allegedAccentColor) {\n\n//     // ------------ BLUE ------------ //\n//     case '#0A5FFFFF':\n//       if (isDarkMode) {\n//         return {\n//           iconAccentColor: '#007AFFFF',\n//           controlAccentColor: '#007AFFFF',\n//           darkerControlAccentColor: getDarkerAccentColor('#007AFFFF'),\n//           keyboardFocusIndicatorColor: '#1AA9FF4C',\n//           selectedContentBackgroundColor: '#0058D0FF',\n//           selectedControlColor: '#3F638BFF',\n//           selectedTextBackgroundColor: '#3F638BFF',\n//         }\n//       } else {\n//         return {\n//           iconAccentColor: '#007AFFFF',\n//           controlAccentColor: '#007AFFFF',\n//           darkerControlAccentColor: getDarkerAccentColor('#007AFFFF'),\n//           keyboardFocusIndicatorColor: '#0067F43F',\n//           selectedContentBackgroundColor: '#0063E1FF',\n//           selectedControlColor: '#B3D7FFFF',\n//           selectedTextBackgroundColor: '#B3D7FFFF',\n//         }\n//       }\n\n//     // ------------ PURPLE ------------ //\n//     case '#923796FF': // Dark\n//       return {\n//         iconAccentColor: '#A550A7FF',\n//         controlAccentColor: '#A550A7FF',\n//         darkerControlAccentColor: getDarkerAccentColor('#A550A7FF'),\n//         keyboardFocusIndicatorColor: '#DB78DE4C',\n//         selectedContentBackgroundColor: '#7F3280FF',\n//         selectedControlColor: '#705670FF',\n//         selectedTextBackgroundColor: '#705670FF',\n//       }\n//     case '#812684FF': // Light\n//       return {\n//         iconAccentColor: '#953D96FF',\n//         controlAccentColor: '#953D96FF',\n//         darkerControlAccentColor: getDarkerAccentColor('#953D96FF'),\n//         keyboardFocusIndicatorColor: '#8326843F',\n//         selectedContentBackgroundColor: '#7D2A7EFF',\n//         selectedControlColor: '#DFC5DFFF',\n//         selectedTextBackgroundColor: '#DFC5DFFF',\n//       }\n\n//     // ------------ PINK ------------ //\n//     case '#F2318DFF':\n//       if (isDarkMode) {\n//         return {\n//           iconAccentColor: '#F74F9EFF',\n//           controlAccentColor: '#F74F9EFF',\n//           darkerControlAccentColor: getDarkerAccentColor('#F74F9EFF'),\n//           keyboardFocusIndicatorColor: '#FF76D34C',\n//           selectedContentBackgroundColor: '#C83179FF',\n//           selectedControlColor: '#88566EFF',\n//           selectedTextBackgroundColor: '#88566EFF',\n//         }\n//       } else {\n//         return {\n//           iconAccentColor: '#F74F9EFF',\n//           controlAccentColor: '#F74F9EFF',\n//           darkerControlAccentColor: getDarkerAccentColor('#F74F9EFF'),\n//           keyboardFocusIndicatorColor: '#EB398D3F',\n//           selectedContentBackgroundColor: '#D93B85FF',\n//           selectedControlColor: '#FCCAE2FF',\n//           selectedTextBackgroundColor: '#FCCAE2FF',\n//         }\n//       }\n\n//     // ------------ RED ------------ //\n//     case '#FC3845FF': // Dark\n//       return {\n//         iconAccentColor: '#FF5257FF',\n//         controlAccentColor: '#FF5257FF',\n//         darkerControlAccentColor: getDarkerAccentColor('#FF5257FF'),\n//         keyboardFocusIndicatorColor: '#FF7A804C',\n//         selectedContentBackgroundColor: '#D03439FF',\n//         selectedControlColor: '#8B5758FF',\n//         selectedTextBackgroundColor: '#8B5758FF',\n//       }\n//     case '#D62130FF': // Light\n//       return {\n//         iconAccentColor: '#E0383EFF',\n//         controlAccentColor: '#E0383EFF',\n//         darkerControlAccentColor: getDarkerAccentColor('#E0383EFF'),\n//         keyboardFocusIndicatorColor: '#D320273F',\n//         selectedContentBackgroundColor: '#C3252BFF',\n//         selectedControlColor: '#F5C3C5FF',\n//         selectedTextBackgroundColor: '#F5C3C5FF',\n//       }\n\n\n//     // ------------ ORANGE ------------ //\n//     case '#F36D16FF':\n//       if (isDarkMode) {\n//         return {\n//           iconAccentColor: '#F7821BFF',\n//           controlAccentColor: '#F7821BFF',\n//           darkerControlAccentColor: getDarkerAccentColor('#F7821BFF'),\n//           keyboardFocusIndicatorColor: '#FFB2394C',\n//           selectedContentBackgroundColor: '#C86003FF',\n//           selectedControlColor: '#886547FF',\n//           selectedTextBackgroundColor: '#886547FF',\n//         }\n//       } else {\n//         return {\n//           iconAccentColor: '#F7821BFF',\n//           controlAccentColor: '#F7821BFF',\n//           darkerControlAccentColor: getDarkerAccentColor('#F7821BFF'),\n//           keyboardFocusIndicatorColor: '#EB6F023F',\n//           selectedContentBackgroundColor: '#D96B0AFF',\n//           selectedControlColor: '#FCD9BBFF',\n//           selectedTextBackgroundColor: '#FCD9BBFF',\n//         }\n//       }\n\n//     // ------------ YELLOW ------------ //\n//     case '#FEBC09FF': // Dark\n//       return {\n//         iconAccentColor: '#FFC600FF',\n//         controlAccentColor: '#FFC600FF',\n//         darkerControlAccentColor: getDarkerAccentColor('#FFC600FF'),\n//         keyboardFocusIndicatorColor: '#FFFF1A4C',\n//         selectedContentBackgroundColor: '#D09C00FF',\n//         selectedControlColor: '#8B7A3FFF',\n//         selectedTextBackgroundColor: '#8B7A3FFF',\n//       }\n//     case '#FEBD1EFF': // Light\n//       return {\n//         iconAccentColor: '#FFC726FF',\n//         controlAccentColor: '#FFC726FF',\n//         darkerControlAccentColor: getDarkerAccentColor('#FFC726FF'),\n//         keyboardFocusIndicatorColor: '#F4B80D3F',\n//         selectedContentBackgroundColor: '#E1AC14FF',\n//         selectedControlColor: '#FFEEBEFF',\n//         selectedTextBackgroundColor: '#FFEEBEFF',\n//       }\n\n//     // ------------ GREEN ------------ //\n//     case '#53B036FF':\n//       if (isDarkMode) {\n//         return {\n//           iconAccentColor: '#62BA46FF',\n//           controlAccentColor: '#62BA46FF',\n//           darkerControlAccentColor: getDarkerAccentColor('#62BA46FF'),\n//           keyboardFocusIndicatorColor: '#8DF46C4C',\n//           selectedContentBackgroundColor: '#42912AFF',\n//           selectedControlColor: '#5C7653FF',\n//           selectedTextBackgroundColor: '#5C7653FF',\n//         }\n//       } else {\n//         return {\n//           iconAccentColor: '#62BA46FF',\n//           controlAccentColor: '#62BA46FF',\n//           darkerControlAccentColor: getDarkerAccentColor('#62BA46FF'),\n//           keyboardFocusIndicatorColor: '#4DAB2F3F',\n//           selectedContentBackgroundColor: '#4DA032FF',\n//           selectedControlColor: '#D0EAC7FF',\n//           selectedTextBackgroundColor: '#D0EAC7FF',\n//         }\n//       }\n\n//     // ------------ GRAPHITE ------------ //\n//     case '#797979FF': // Dark\n//       return {\n//         iconAccentColor: '#8C8C8CFF',\n//         controlAccentColor: '#8C8C8CFF',\n//         darkerControlAccentColor: getDarkerAccentColor('#8C8C8CFF'),\n//         keyboardFocusIndicatorColor: '#C3C3C37F',\n//         selectedContentBackgroundColor: '#686868FF',\n//         selectedControlColor: '#FFFFFF3F',\n//         selectedTextBackgroundColor: '#FFFFFF3F',\n//       }\n//     case '#868686FF': // Light\n//       return {\n//         iconAccentColor: '#989898FF',\n//         controlAccentColor: '#989898FF',\n//         darkerControlAccentColor: getDarkerAccentColor('#989898FF'),\n//         controlAccentColor: '#989898FF',\n//         keyboardFocusIndicatorColor: '#99999EFF',\n//         selectedContentBackgroundColor: '#808080FF',\n//         selectedControlColor: '#E0E0E0FF',\n//         selectedTextBackgroundColor: '#E0E0E0FF',\n//       }\n//   }\n// }\n","import Database from 'better-sqlite3'\nimport { ipcMain } from 'electron'\n\nexport class DbManager {\n  constructor() {\n\n    // Create database\n    // Pass \":memory:\" as the first argument to create an in-memory db.\n    this.db = new Database(':memory:')\n    // this.db = new Database(':memory:', { verbose: console.log })\n\n    // Create table\n    this.table = this.db.prepare(`\n      CREATE VIRTUAL TABLE docs \n      USING FTS5(id, name, title, path, body)\n    `).run()\n\n    // Statement for inserting new docs\n\n    // Using `INSERT OR REPLACE` means we replace the row, if it already exists. Else, we create (insert) it. \n\n    // The following says: \"Does a row with the same id already exist? If yes, get it's rowid. And insert the new values at that same rowid, thereby replacing the original row. Else, insert a new row.\" `rowid` is a unique integer index value automatically assigned to each row on creation, in FTS tables (or any sqlite table where we don't specify a primary key).\n\n    // This is all a bit convuluted. That's because we're using FTS tables. Normally we could jusy, say, set the `id` column as the primary key, and sqlite would automatically trigger the replace action if we tried to add a row with the same id. But FTS tables don't allow primary key declaration or constraints (the other tool we could use). So instead we have to insert at specific rowid's, ala working with arrays by indexes.\n    this.insert_stmt = this.db.prepare(`\n      INSERT OR REPLACE INTO docs (rowid, id, name, title, path, body) \n      VALUES ((SELECT rowid FROM docs WHERE id = @id LIMIT 1), @id, @name, @title, @path, @body)\n    `)\n\n    this.insert_many_stmt = this.db.transaction((docs) => {\n      for (const doc of docs) {\n        this.insert_stmt.run(doc)\n      };\n    });\n\n    this.delete_stmt = this.db.prepare(`\n      DELETE FROM docs\n      WHERE id = ?\n      LIMIT 1\n    `)\n\n    // Statement for full text search\n    this.fts_stmt = this.db.prepare(`\n      SELECT id,\n             title,\n             highlight(docs, 4, '<span class=\"highlight\">', '</span>') body\n      FROM docs \n      WHERE docs MATCH ?\n      ORDER BY rank\n    `)\n\n    // Setup listener to handle queries from renderer. Take the provided paramaters for query string (e.g. 'dogs'), matchExactPhrase (boolean), and path (e.g. '/User/Documents/ClimateResearch'), and create the string we'll pass into \n\n    // We use column filters to specify which columns to search. We only want params.path to search the `path` column, for example. And we never want to search `id` column. For example: `body: \"Rex\" *` says \"Search body column for tokens that start with 'Rex'`. Per: https://www.sqlite.org/fts5.html#fts5_column_filters\n\n    // If `matchExactPhrase` is false, we add a '*' after our query string, which tells sqlite to treat the string as a \"prefix token\", and match any tokens that start with the query. Per: https://www.sqlite.org/fts5.html#fts5_prefix_queries\n\n    // For `path`, we're inserting `^` before the string, to tell sqlite to only match if the string starts at the first token in the column. Like ^ works in regex. Per: https://www.sqlite.org/fts5.html#fts5_initial_token_queries\n\n    // We wrap our strings in double-quotation marks to escape characters such as - and /, which would otherwise trigger sql errors. Forward slashes will always appear in paths, and other characters may appear in the query string.\n\n    // We use boolean operators to combine our phrases. Matches MUST be descendants of the specified `params.path` (folder path), AND have query matches in either `body`, `title`, or `name` columns.\n\n    // Docs: https://www.sqlite.org/fts5.html#extending_fts5\n    ipcMain.handle('queryDb', (evt, params) => {\n\n      // Create the query string\n      const body = `body:\"${params.query}\"${params.matchExactPhrase ? '' : ' *'}`\n      const title = `title:\"${params.query}\"${params.matchExactPhrase ? '' : ' *'}`\n      const name = `name:\"${params.query}\"${params.matchExactPhrase ? '' : ' *'}`\n      const path = `path:^ \"${params.path}\"${params.matchExactPhrase ? '' : ' *'}`\n      const query = `${path} AND (${body} OR ${title} OR ${name})`\n\n      // Run the full text search statement with the query string.\n      let results = this.fts_stmt.all(query)\n\n      // Return the results. Will be array of objects; one for each row.\n      return results\n    })\n  }\n\n  /**\n   * Insert single row into database.\n   */\n  insert(doc = {\n    id: '',\n    name: '',\n    title: '',\n    path: '',\n    body: ''\n  }) {\n    this.insert_stmt.run(doc)\n  }\n\n  /**\n   * Insert multiple rows into the database.\n   * @param {} docs - Array of docs\n   */\n  insertMany(docs) {\n    this.insert_many_stmt(docs)\n  }\n\n  /**\n   * Delete single row from database.\n   */\n  delete(id) {\n    this.delete_stmt.run(id)\n  }\n\n  init() {\n\n    // const insertTest = global.db.prepare('INSERT INTO docs (title, path) VALUES (?, ?)')\n    // const info = insertTest.run(\"My time in Tuscany\", \"Was mostly unremarkable, to be perfectly honest.\")\n    // console.log(info.changes)\n\n    // const insert = global.db.prepare('INSERT INTO docs (id, name, title, body) VALUES (?, ?, ?, ?)');\n\n    // const insertMany = global.db.transaction((data) => {\n    //   for (const item of data) {\n    //     insert.run(item)\n    //   }\n    // });\n\n    // insertMany([\n    //   { title: 'Joey', path: 'docs/joey.md' },\n    //   { title: 'Sally', path: 'docs/salley.md' },\n    //   { title: 'Junior', path: 'docs/junior.md' },\n    // ]);\n\n    // const joey = global.db.prepare('SELECT * FROM docs WHERE title = ?').get('Junior')\n    // console.log(joey)\n\n    // const deleteTest = global.db.prepare('DELETE FROM docs WHERE title = ?').run(\"Sally\")\n\n    // const getAll = global.db.prepare('SELECT * FROM docs')\n    // console.log(getAll.all())\n\n    // const updateTest = global.db.prepare('UPDATE docs SET title = ? WHERE title = ?').run('Zelda!', 'Joey')\n\n    // console.log(getAll.all())\n  }\n}","import { remove } from 'fs-extra'\n\nexport default async function(path) {\n  try {\n\t\tawait remove(path)\n\t\treturn { type: 'DELETE_FILE_SUCCESS', path: path }\n\t} catch(err) {\n\t\treturn { type: 'DELETE_FILE_FAIL', err: err }\n\t}\n}","import { remove } from 'fs-extra'\n\nexport default async function(paths) {\n  try {\n    let deletedPaths = await Promise.all(\n      paths.map(async (path) => {\n        await remove(path)\n      })\n    )\n\t\treturn { type: 'DELETE_FILES_SUCCESS', paths: deletedPaths }\n\t} catch(err) {\n\t\treturn { type: 'DELETE_FILES_FAIL', err: err }\n\t}\n}","import { BrowserWindow, dialog } from 'electron'\n\nexport default async function () {\n\n  console.log(\"selectProjectDirectoryFromDialog\")\n\n  const win = BrowserWindow.getFocusedWindow()\n\n  const selection = await dialog.showOpenDialog(win, {\n    title: 'Select Project Folder',\n    properties: ['openDirectory', 'createDirectory']\n  })\n\n  if (!selection.canceled) {\n    return { \n      type: 'SET_PROJECT_DIRECTORY', \n      directory: selection.filePaths[0] \n    }\n  }\n}","import { app } from \"electron\";\nimport { readFile } from \"fs-extra\";\nimport convert from \"xml-js\";\nimport path from \"path\";\nimport CSL from \"citeproc\";\n\n// Find citation keys in strings of text. Supports prefix, id, locator, suffix.\n// Simple: [@timothy2019]\n// Complex: [As written in @timothy2019, pp. 22-25, at least allegedly].\n// Demo: https://regex101.com/r/LG0Ipi/1\nconst citekeyRE = /\\[[^\\[\\]\\(\\)]*?-?@[a-z0-9_][a-z0-9_:.#$%&\\-+?<>~/]*?.*?\\](?!\\()/gm\n\n// Find components of cite keys (prefix, id, label, locator)\n// Does not support suffic yet.\n// Demo: https://regex101.com/r/QfLdwI/1\nconst citekeyComponentsRE = /(?<prefix>[^\\n\\[\\]\\(\\)]*?)?@(?<id>[a-zA-Z0-9_][^\\s,;\\]]+)(?:,\\s(?<label>[\\D]+)\\s?(?<locator>[\\w\\-,:]+))?(?<suffix>.*)?/\n\n// Variable for our citeproc engine. We'll only populate this once.\nlet citeproc\n\n\n/**\n * Create instance of the citeproc engine.\n * Load our custom CSL, and the en-US locale.\n * @returns \n */\nasync function makeCiteprocEngine() {\n\n  const stylePath = path.join(app.getAppPath(), 'app/references/joshcarpenter-custom-csl.csl')\n  const localePath = path.join(app.getAppPath(), 'app/references/locales-en-US.xml')\n  \n  const style = await readFile(stylePath, 'utf8')\n  const locale = await readFile(localePath, 'utf8')\n\n  const engine = new CSL.Engine({\n\n    // We'll populate this with citable items\n    items: {},\n\n    // An array of valid locator labels. Each formatted as follows:\n    // {\n    //   term: \"p.\",\n    //   form: \"short\",\n    //   plural: \"single\",\n    //   parentTerm: \"page\"\n    // }\n    locatorLabels: getCitationLocatorLabels(locale),\n\n    // Given a language tag in RFC-4646 form, this method retrieves the\n    // locale definition file.  This method must return a valid *serialized*\n    // CSL locale. (In other words, an blob of XML as an unparsed string.  The\n    // processor will fail on a native XML object or buffer).\n    retrieveLocale: () => locale,\n\n    // Given an identifier, this retrieves one citation item.  This method\n    // must return a valid CSL-JSON object.\n    retrieveItem: (id) => {\n      return engine.sys.items[id]\n    }\n  }, style)\n\n  return engine\n}\n\n\n/**\n * Get valid locators from the provided locale file.\n * Locale files specify the valid terms (locator and otherwise), for the locale.\n * See: https://docs.citationstyles.org/en/stable/specification.html#locators\n * for the list of valid locator terms in the CSL spec.\n * Each locators can also have multiple short, long, singular and pluralized versions.\n * E.g. \"page\" can be written as \"p.\" (short, singlular), \"pages\" (long, multiple), etc.\n * Locators are specified in the locale files as follows:\n * ```\n * <term name=\"page\" form=\"short\">\n *    <single>p.</single>\n *    <multiple>pp.</multiple>\n * </term>\n * ```\n * We extract these from the locale file, and return an array of objects, where\n * each object is a unique locator term (e.g. \"p.\"), in the following format:\n * ```\n * {\n *   term: \"p.\",\n *   form: \"short\",\n *   plural: \"single\",\n *   parentTerm: \"page\"\n * }\n * ```\n * @param {*} locale: Loaded xml file contents. See CSL repo for full list of locales.\n */\nfunction getCitationLocatorLabels(locale) {\n\n  // Convert XML to JS object.\n  // `compact: false` to preserve positions of comments (otherwise they get batched)\n  // `trim: true` to remove white space.\n  const localeJs = convert.xml2js(locale, { compact: false, trim: true, spaces: 4 })\n\n  // Get \"terms\" array. \n  // Yes, this is ugly; log localeJs to console to see the hierarchy.\n  const allTerms = localeJs.elements[0].elements.find((e) => e.name == \"terms\").elements\n\n  // Find all locator terms from \"terms\" array.\n  // This is a PITA because terms is flat, and the XML comments are the only demarcations,\n  // e.g. <!-- LONG LOCATOR FORMS --> and <!-- SHORT LOCATOR FORMS -->, which prececed\n  // lists of terms, respectively (long, short, and symbol). The following logic looks \n  // for those, and starts adding the items that follow, up until the next comment block.\n  // If that comment block is also a LOCATOR block, it keeps on adding. Else, it stops.\n  let locatorTerms = []\n  let isLocator = false\n  allTerms.map((t) => {\n\n    if (isLocator) {\n      if (t.type !== \"comment\")\n        locatorTerms.push(t)\n    }\n\n    if (t.type == \"comment\") {\n      if (t.comment.includes(\"LOCATOR\")) {\n        isLocator = true\n      } else {\n        isLocator = false\n      }\n    }\n  })\n\n  // Build array of objects. This is what we'll return.\n  // One object per locator.\n  let locators = []\n\n  locatorTerms.map((l) => {\n\n    // Skip \"number-of-pages\" locators.\n    // `locales-en-US` includes them, but they're not in the official list:\n    // https://docs.citationstyles.org/en/stable/specification.html#locators\n    // ...and they're identical to `pages`, causing needless parsing confusion.\n    if (l.attributes.name == \"number-of-pages\") return\n\n    // In source locale, term `form` attribute is either missing, or `form=\"short\"`.\n    // E.g. https://github.com/citation-style-language/locales/blob/master/locales-en-US.xml#L166\n    // Hence the ternary operators for `form` key, below:\n\n    // Get singular version\n    let singleVersion = {\n      term: l.elements[0].elements[0].text,\n      form: l.attributes.form ? l.attributes.form : \"long\",\n      plural: false,\n      parentTerm: l.attributes.name\n    }\n\n    // Get pluralized version\n    let multipleVersion = {\n      term: l.elements[1].elements[0].text,\n      form: l.attributes.form ? l.attributes.form : \"long\",\n      plural: true,\n      parentTerm: l.attributes.name\n    }\n\n    locators.push(singleVersion, multipleVersion)\n  })\n\n  // Sort locators alphabetically. They're\n  locators.sort((a, b) => (a.term > b.term) ? 1 : -1)\n\n  return locators\n}\n\n\nexport default async function (bibliographyPath, citekey) {\n\n  // Setup citeproc engine the first time through\n  if (!citeproc) citeproc = await makeCiteprocEngine()\n\n  // Load bibliography (list of CSL \"items\")\n  // Per https://citeproc-js.readthedocs.io/en/latest/csl-json/markup.html\n  const bibliographyString = await readFile(bibliographyPath, 'utf8')\n  const arrayOfItems = JSON.parse(bibliographyString)\n  arrayOfItems.forEach((item) => citeproc.sys.items[item.id] = item)\n  citeproc.updateItems(Object.keys(citeproc.sys.items))\n\n  // Get citekey components (prefix, id, etc)\n  // Groups return as \"According to\", \"@dole2012\", \"pp.\", \"3-4\"\n  // First use slice to remove enclosing square brackets\n  // [@tim2020] --> tim2020\n  let {\n    prefix = undefined,\n    id = '',\n    label = '',\n    locator = '',\n    suffix = '',\n  } = citekey.slice(1, citekey.length - 1).match(citekeyComponentsRE)?.groups\n\n  if (label) {\n\n    // If label is present, we need to get the full parent term name, \n    // E.g. the parent term name of \"pp.\" is \"page\"\n    // Citeproc only accepts parent term names (which is annoying)\n\n    // There might be multiple qualifying parent labels. E.g. \"page\" and \"pages\" will\n    // both return for \"@marlee98 page 22\". This will usually be because the singular is \n    // subset of the plural, so in these cases, match the plural.\n    // Else, if there's only one match, use it.\n    const matchingLabels = citeproc.sys.locatorLabels.filter(({ term }) => label.includes(term))\n    label = matchingLabels.length > 1 ?\n      matchingLabels.find((m) => m.plural).parentTerm :\n      matchingLabels[0].parentTerm\n  }\n\n  // Remove ugly timestamp locator labels\n  // t. 19:31 -> 19.31\n  // Demo: https://regex101.com/r/Uh1KAd/2/\n  // if (label) label = label.replace(/(t\\.|tt\\.|times|time)\\s?/, '')\n\n  let renderedCitation = citeproc.previewCitationCluster({\n    citationItems: [{\n      prefix,\n      id,\n      label,\n      locator,\n      suffix\n    }],\n    properties: {\n      noteIndex: 0\n    }\n  }, [], [], 'text')\n\n  // Strip {{html}} and {{/html}} from rendered output\n  renderedCitation = renderedCitation.replaceAll(/{{html}}|{{\\/html}}/g, \"\")\n\n  return renderedCitation\n}","import { app, BrowserWindow, clipboard, dialog, ipcMain, screen, shell, systemPreferences, nativeTheme, webFrame } from 'electron'\nimport { readFile, writeFile, renameSync, copyFileSync, existsSync, readdirSync } from 'fs-extra'\nimport path from 'path'\nimport { deleteFile, deleteFiles, selectProjectDirectoryFromDialog } from './actions/index.js'\nimport matter from 'gray-matter'\nimport { isValidHttpUrl } from '../shared/utils.js'\nimport getCitation from './getCitation.js'\n\nexport function init() {\n\n\n  // -------- IPC: Renderer \"sends\" to Main -------- //\n\n  ipcMain.on('saveImageFromClipboard', async (evt) => {\n    const win = BrowserWindow.fromWebContents(evt.sender)\n    const project = global.state().projects.byId[win.projectId]\n    const img = clipboard.readImage()\n    const png = img.toPNG()\n    await writeFile(`${project.directory}/test.png`, png)\n  })\n\n  ipcMain.on('showWindow', (evt) => {\n    const win = BrowserWindow.fromWebContents(evt.sender)\n    win.show()\n  })\n\n  ipcMain.on('openUrlInDefaultBrowser', (evt, url) => {\n    // Check if URL is valid.\n    // Per https://stackoverflow.com/a/43467144\n    // If no, try appending protocol and check again.\n    // This handles cases like `apple.com`, where user\n    // leaves off protocol for sake of brevity.\n    // \n    let isValid = isValidHttpUrl(url)\n    if (!isValid) {\n      url = `http://${url}`\n      isValid = isValidHttpUrl(url)\n    }\n    try {\n      shell.openExternal(url)\n    } catch (err) {\n      console.log('Bar URL')\n    }\n  })\n\n  ipcMain.on('replaceAll', (evt, query, replaceWith, filePaths, isMatchCase, isMatchExactPhrase, isMetaKeyPressed) => {\n\n    // Define our regex for finding matches in the specified files.\n    // Demo: https://jsfiddle.net/m17zhoyj/1/\n    let queryRegex = undefined\n    if (isMatchExactPhrase) {\n      // If `matchExactPhrase`, make sure there are no word characters immediately before or after the query phrase, using negative look behind and look ahead.\n      // Demo: https://regex101.com/r/Toj4WF/1\n      queryRegex = new RegExp(String.raw`(?<!\\w)${query}(?!\\w)`, isMatchCase ? 'g' : 'gi')\n    } else {\n      queryRegex = new RegExp(`${query}`, isMatchCase ? 'g' : 'gi')\n    }\n\n    // Ask user to confirm replacment, unless meta key was held down (provides a fast path).\n    if (!isMetaKeyPressed) {\n      const confirmReplacement = dialog.showMessageBoxSync({\n        type: 'warning',\n        message: `Are you sure you want to replace \"${query}\" with \"${replaceWith}\" in ${filePaths.length} document${filePaths.length > 1 ? 's' : ''}?`,\n        buttons: ['Cancel', 'Replace'],\n        cancelId: 0\n      })\n\n      // If user does not press `Replace` (1), then `return` prematurely.\n      if (confirmReplacement !== 1) return\n    }\n\n    // Open each file in `filePaths`, find all instances of `query`, replace, and write file.\n    filePaths.forEach(async (filePath) => {\n      let file = await readFile(filePath, 'utf8')\n      file = file.replaceAll(queryRegex, replaceWith)\n      await writeFile(filePath, file, 'utf8')\n    })\n  })\n\n\n  ipcMain.on('dispatch', async (evt, action) => {\n\n    const win = BrowserWindow.fromWebContents(evt.sender)\n\n    switch (action.type) {\n\n      case ('SELECT_PROJECT_DIRECTORY_FROM_DIALOG'):\n        store.dispatch(await selectProjectDirectoryFromDialog(), win)\n        break\n\n      // The following actions all \n      case ('SAVE_PANEL_CHANGES_SO_WE_CAN_CLOSE_WINDOW'):\n      case ('CLOSE_PANEL'):\n      case ('OPEN_NEW_DOC_IN_PANEL'):\n      case ('OPEN_DOC_IN_PANEL'): {\n\n        const project = global.state().projects.byId[win.projectId]\n        const panel = project.panels[action.panelIndex]\n\n        if (panel.unsavedChanges) {\n          promptToSaveChangesThenForwardAction(action, win)\n        } else {\n          // No unsaved changes. Forward the action.\n          store.dispatch({ ...action, saveOutcome: 'noUnsavedChanges' }, win)\n        }\n\n        break\n      }\n\n      case ('SAVE_DOC'):\n        saveDoc(action, win)\n        break\n\n      case ('SAVE_DOC_AS'):\n        saveDocAs(action, win)\n        break\n\n      case ('DELETE_FILE'):\n        store.dispatch(await deleteFile(action.path), win)\n        break\n\n      case ('DELETE_FILES'):\n        store.dispatch(await deleteFiles(action.paths), win)\n        break\n\n      default:\n        store.dispatch(action, win)\n        break\n    }\n  })\n\n  // -------- IPC: Invoke -------- //\n\n  ipcMain.handle('getBibliography', async (evt, bibliographyPath) => {\n    const bibliography = await readFile(bibliographyPath, 'utf8')\n    return bibliography\n  })\n\n  ipcMain.handle('getCitation', async (evt, bibliographyPath, citekey) => {\n    return await getCitation(bibliographyPath, citekey)\n  })\n\n  // Return x/y coordinates of cursor inside sender window\n  // Return null if cursor is outside the window bounds.\n  ipcMain.handle('getCursorWindowPosition', (evt) => {\n    const win = BrowserWindow.fromWebContents(evt.sender)\n    const point = screen.getCursorScreenPoint()\n    const bounds = win.getBounds()\n    const pos = {\n      x: point.x - bounds.x,\n      y: point.y - bounds.y\n    }\n\n    const cursorIsOutsideBounds = \n      pos.x < 0 || // left of window\n      pos.y < 0 || // above window\n      pos.x > bounds.width || // right of window\n      pos.y > bounds.height // below window\n    \n    return cursorIsOutsideBounds ? null : pos\n  })\n  \n  ipcMain.handle('getState', (evt) => {\n    return global.state()\n  })\n\n  ipcMain.handle('getFiles', (evt) => {\n    const win = BrowserWindow.fromWebContents(evt.sender)\n    const watcher = global.watchers.find((watcher) => watcher.id == win.projectId)\n    return watcher ? watcher.files : undefined\n  })\n\n  // Load file and return text\n  ipcMain.handle('getFileByPath', async (evt, filePath, encoding = 'utf8') => {\n    let file = await readFile(filePath, encoding)\n    return file\n  })\n\n  ipcMain.handle('getHTMLFromClipboard', (evt) => {\n    return clipboard.readHTML()\n  })\n\n  ipcMain.handle('getFormatOfClipboard', (evt) => {\n    return clipboard.availableFormats()\n  })\n\n  ipcMain.handle('moveOrCopyFileIntoProject', async (evt, filePath, folderPath, isCopy) => {\n\n    let wasSuccess = false\n\n    // Get destination\n    const fileName = path.basename(filePath)\n    let destinationPath = path.format({\n      dir: folderPath,\n      base: fileName\n    })\n\n    // Does file already exist at destination?\n    const fileAlreadyExists = existsSync(destinationPath)\n\n    // If yes, prompt user to confirm overwrite. \n    // Else, just move/copy\n    if (fileAlreadyExists) {\n      const selectedButtonId = dialog.showMessageBoxSync({\n        type: 'question',\n        message: `An item named ${fileName} already exists in this location. Do you want to replace it with the one you’re moving?`,\n        buttons: ['Keep Both', 'Stop', 'Replace'],\n        cancelId: 1\n      })\n      switch (selectedButtonId) {\n\n        // Keep both\n        case 0:\n          destinationPath = getIncrementedFileName(destinationPath)\n          copyFileSync(filePath, destinationPath)\n          wasSuccess = true\n\n        // Stop (Do nothing)\n        case 1:\n          wasSuccess = false\n\n        // Replace\n        case 2:\n          if (isCopy) {\n            copyFileSync(filePath, destinationPath)\n          } else {\n            renameSync(filePath, destinationPath)\n          }\n          wasSuccess = true\n      }\n    } else {\n      if (isCopy) {\n        copyFileSync(filePath, destinationPath)\n      } else {\n        renameSync(filePath, destinationPath)\n      }\n      wasSuccess = true\n    }\n\n    return {\n      wasSuccess,\n      destinationPath\n    }\n  })\n\n\n\n\n}\n\n\n\n\n\n// -------- IPC: Invoke -------- //\n\n// // ipcMain.handle('getValidatedPathOrURL', async (event, docPath, pathToCheck) => {\n// //   // return path.resolve(basePath, filepath)\n\n// //   /*\n// //   Element: Image, link, backlink, link reference definition\n// //   File type: directory, html, png|jpg|gif, md|mmd|markdown\n// //   */\n\n// //   // console.log('- - - - - -')\n// //   // console.log(pathToCheck.match(/.{0,2}\\//))\n// //   const directory = path.parse(docPath).dir\n// //   const resolvedPath = path.resolve(directory, pathToCheck)\n\n// //   const docPathExists = await pathExists(docPath)\n// //   const pathToCheckExists = await pathExists(pathToCheck)\n// //   const resolvedPathExists = await pathExists(resolvedPath)\n\n// //   // console.log('docPath: ', docPath)\n// //   // console.log('pathToCheck: ', pathToCheck)\n// //   // console.log('resolvedPath: ', resolvedPath)\n// //   // console.log(docPathExists, pathToCheckExists, resolvedPathExists)\n\n// //   // if (pathToCheck.match(/.{0,2}\\//)) {\n// //   //   console.log()\n// //   // }\n// // })\n\n// // ipcMain.handle('getResolvedPath', async (event, basePath, filepath) => {\n// //   return path.resolve(basePath, filepath)\n// // })\n\n// // ipcMain.handle('getParsedPath', async (event, filepath) => {\n// //   return path.parse(filepath)\n// // })\n\n// // ipcMain.handle('ifPathExists', async (event, filepath) => {\n// //   const exists = await pathExists(filepath)\n// //   return { path: filepath, exists: exists }\n// // })\n\n\n// // ipcMain.handle('getFileById', async (event, id, encoding) => {\n\n// //   // Get path of file with matching id\n// //   const filePath = store.store.contents.find((f) => f.id == id).path\n\n// //   // Load file and return\n// //   let file = await readFile(filePath, encoding)\n// //   return file\n// // })\n\n// // ipcMain.handle('pathJoin', async (event, path1, path2) => {\n// //   return path.join(path1, path2)\n// // })\n\n\n/**\n * Save the selected doc\n */\nasync function saveDoc(action, win) {\n  try {\n\n    // Try to write file\n    await writeFile(action.doc.path, action.data, 'utf8')\n\n    // If save is successful, forward the original action\n    // along with save outcome.\n    store.dispatch({ ...action, saveOutcome: \"saved\" }, win)\n\n  } catch (err) {\n\n    // If save is unsuccessful, forward the original action\n    // along with save outcome.\n    // This shouldn't happen, but we catch it just in case.\n    store.dispatch({ ...action, saveOutcome: \"failed\" }, win)\n  }\n}\n\n\nfunction getTitleFromDoc(data) {\n  const { data: frontMatter, content, isEmpty } = matter(data)\n\n  // Get first header in content\n  // https://regex101.com/r/oR5sec/1\n\n  // Try to get title from front matter\n  if (!isEmpty && frontMatter.title) return frontMatter.title\n\n  // Try to get title from first header in content\n  const firstHeaderInContent = content.match(/^#{1,6}[ |\\t]*(.*)$/m)\n  if (firstHeaderInContent) return firstHeaderInContent[1]\n\n  // Try to get title from first 1-3 words of the doc\n  // Demo: https://regex101.com/r/QmWS6c/1\n  let firstWords = content.match(/^(\\w+\\s?){1,3}/)[0]\n  if (firstWords) {\n    // If last character is whitespace, trim it\n    firstWords = firstWords.replace(/\\s$/, '')\n    return firstWords\n  }\n\n  // Else, return 'Untitled'\n  return 'Untitled'\n\n}\n\n\n/**\n * Show 'Save As' dialog\n */\nasync function saveDocAs(action, win) {\n\n  const project = global.state().projects.byId[win.projectId]\n\n  // Suggested path varies depending on whether doc is new.\n  const defaultPath = action.isNewDoc ?\n    `${project.directory}/${getTitleFromDoc(action.data)}.md` :\n    action.doc.path\n\n  const { filePath, canceled } = await dialog.showSaveDialog(win, {\n    defaultPath\n  })\n\n  if (canceled) {\n\n    // Forward original action, \n    // with 'cancelled' saveOutcome\n    store.dispatch({ ...action, saveOutcome: \"cancelled\" }, win)\n\n  } else {\n\n    try {\n\n      // Try to write file\n      await writeFile(filePath, action.data, 'utf8')\n\n      // If save is successful, forward the original action\n      // along with save outcome, and chosen save path.\n      store.dispatch({\n        ...action,\n        saveOutcome: \"saved\",\n        saveToPath: filePath\n      }, win)\n\n    } catch (err) {\n\n      // If save is unsuccessful, forward the original action\n      // along with save outcome.\n      // This shouldn't happen, but we catch it just in case.\n      store.dispatch({ ...action, saveOutcome: \"failed\" }, win)\n\n    }\n  }\n}\n\n\n/**\n * \n * @param {*} action - With type, and assorted optional properties. \n */\nasync function promptToSaveChangesThenForwardAction(action, win) {\n\n  const project = global.state().projects.byId[win.projectId]\n\n  // Prompt's wording depends on whether doc is new...\n  const message = action.isNewDoc ?\n    'Do you want to save the changes you made to the new document?' :\n    `Do you want to save the changes you made to ${action.outgoingDoc.path.slice(action.outgoingDoc.path.lastIndexOf('/') + 1)}?`\n\n  // Show prompt\n  const { response } = await dialog.showMessageBox(win, {\n    message,\n    detail: \"Your changes will be lost if you don't save them.\",\n    type: \"warning\",\n    buttons: [\"Save\", \"Don't Save\", \"Cancel\"],\n    defaultId: 0,\n  })\n\n  // What button did the user select?\n  const userSelectedSave = response == 0\n  const userSelectedDontSave = response == 1\n  const userSelectedCancel = response == 2\n\n  if (userSelectedSave) {\n\n    // User selected \"Save\"...\n\n    // If doc is new, show \"Save As\" flow\n    // Else just save.\n    if (action.isNewDoc) {\n\n      // \"Save As\" prompt\n\n      const { filePath, canceled } = await dialog.showSaveDialog(window, {\n        defaultPath: `${project.directory}/Untitled.md`\n      })\n\n      if (canceled) {\n\n        // Forward original action, \n        // with 'cancelled' saveOutcome\n        store.dispatch({ ...action, saveOutcome: \"cancelled\" }, win)\n\n      } else {\n\n        // Save file\n        await writeFile(filePath, action.outgoingDocData, 'utf8')\n\n        // Then forward the original action, \n        // along with save outcome\n        store.dispatch({ ...action, saveOutcome: \"saved\" }, win)\n      }\n\n    } else {\n\n      try {\n\n        // Try to save the doc. \n        await writeFile(action.outgoingDoc.path, action.outgoingDocData, 'utf8')\n\n        // If save is successful, forward the original action\n        // along with save outcome.\n        store.dispatch({ ...action, saveOutcome: \"saved\" }, win)\n\n      } catch (err) {\n\n        // If save is unsuccessful, forward the original action\n        // along with save outcome.\n        // This shouldn't happen, but we catch it just in case.\n        store.dispatch({ ...action, saveOutcome: \"failed\" }, win)\n\n      }\n    }\n\n  } else if (userSelectedDontSave) {\n\n    // User selected \"Don't Save\"...\n    // Forward the original action,\n    // along with save outcome.\n\n    store.dispatch({ ...action, saveOutcome: \"dontSave\" }, win)\n\n  } else if (userSelectedCancel) {\n\n    // User selected \"Cancel\"...\n    // Forward the original action,\n    // along with save outcome.\n\n    store.dispatch({ ...action, saveOutcome: \"cancelled\" }, win)\n\n  }\n}\n\n\n\n/**\n * Return filename with incremented integer suffix. Used when moving files to avoid overwriting files of same name in destination directory, ala macOS. Looks to see if other files in same directory already have same name +_ integer suffix, and if so, increments.\n * Original:      /Users/Susan/Notes/ship.jpg\n * First copy:    /Users/Susan/Notes/ship 2.jpg\n * Second copy:   /Users/Susan/Notes/ship 3.jpg\n * @param {*} origName \n */\nfunction getIncrementedFileName(origPath) {\n\n  const directory = path.dirname(origPath) // /Users/Susan/Notes\n  const extension = path.extname(origPath) // .jpg\n  const name = path.basename(origPath, extension) // ship\n\n  const allFilesInDirectory = readdirSync(directory)\n\n  let increment = 2\n\n  // Basename in `path` is filename + extension. E.g. `ship.jpg`\n  // https://nodejs.org/api/path.html#path_path_basename_path_ext\n  let newBase = ''\n\n  // Keep looping until we find incremented name that's not already used\n  // Most of time this will be `ship 2.jpg`.\n  while (true) {\n    newBase = `${name} ${increment}${extension}` // ship 2.jpg\n    const alreadyExists = allFilesInDirectory.includes(newBase)\n    if (alreadyExists) {\n      increment++\n    } else {\n      break\n    }\n  }\n\n  // /Users/Susan/Notes/ship 2.jpg\n  return path.format({\n    dir: directory,\n    base: newBase\n  })\n}","import { MenuItem } from \"electron\"\n\nexport const ______________________________ = new MenuItem({ type: 'separator' })\n","import { app, MenuItem } from \"electron\";\nimport { ______________________________ } from './Separator.js'\n\nexport function create() {\n \n  return new MenuItem({\n    label: app.name,\n    submenu: [\n      { role: 'about' },\n      ______________________________,\n      new MenuItem({\n        id: 'app-preferences',\n        label: 'Preferences...',\n        accelerator: 'CmdOrCtrl+,',\n        click() {\n          const state = global.state()\n          const prefsIsAlreadyOpen = state.prefs.isOpen\n          const prefsIsNotFocused = state.focusedWindowId !== 'preferences'\n          if (prefsIsAlreadyOpen) {\n            if (prefsIsNotFocused) {\n              global.store.dispatch({ type: 'FOCUS_PREFERENCES_WINDOW' })\n            }\n          } else {\n            global.store.dispatch({ type: 'OPEN_PREFERENCES' })\n          }\n        }\n      }),\n      ______________________________,\n      { role: 'services', submenu: [] },\n      ______________________________,\n      { role: 'hide' },\n      { role: 'hideothers' },\n      { role: 'unhide' },\n      ______________________________,\n      { role: 'quit' }\n    ]\n  })\n}\n\n\nexport function update(applicationMenu) {\n\n  // Nothing in app menu is dynamic...\n\n}\n\nexport function onStateChanged(state, oldState, project, panel, prefsIsFocused, menu) {\n\n  // Nothing in app menu is dynamic...\n\n}","import { MenuItem } from \"electron\";\nimport { selectProjectDirectoryFromDialog } from \"../actions/index.js\";\nimport { ______________________________ } from './Separator.js'\n\n\nfunction isMoveToTrashEnabled() {\n  const state = global.state()\n  const project = state.projects.byId[state.focusedWindowId]\n  const sideBarIsOpen = project?.sidebar.isOpen\n  const selectedTab = project?.sidebar.tabsById[project?.sidebar.activeTabId]\n  const fileIsSelectedInSidebar = selectedTab?.selected.length\n  return sideBarIsOpen && fileIsSelectedInSidebar\n}\n\nexport function create() {\n\n  return new MenuItem({\n    label: 'File',\n    submenu: [\n  \n      new MenuItem({\n        label: 'New Document',\n        id: 'file-newDocument',\n        accelerator: 'CmdOrCtrl+N',\n        async click(item, focusedWindow) {\n          focusedWindow.webContents.send('mainRequestsCreateNewDocInFocusedPanel')\n        }\n      }),\n  \n      new MenuItem({\n        label: 'New Editor',\n        id: 'file-newEditor',\n        accelerator: 'CmdOrCtrl+T',\n        async click(item, focusedWindow) {\n          \n          const state = global.state()\n          const project = state.projects.byId[state.focusedWindowId]\n        \n          // Create new panel to right of the current focused panel\n          global.store.dispatch({\n            type: 'OPEN_NEW_PANEL',\n            docId: 'newDoc',\n            panelIndex: project.focusedPanelIndex + 1\n          }, focusedWindow)\n        }\n      }),\n  \n      new MenuItem({\n        label: 'New Window',\n        id: 'file-newWindow',\n        enabled: true,\n        accelerator: 'CmdOrCtrl+Shift+N',\n        async click(item, focusedWindow) {\n          global.store.dispatch({ type: 'CREATE_NEW_PROJECT' })\n        }\n      }),\n  \n      ______________________________,\n  \n      new MenuItem({\n        label: 'Open Project...',\n        id: 'file-openProject',\n        accelerator: 'CmdOrCtrl+Shift+O',\n        async click(item, focusedWindow) {\n          global.store.dispatch(await selectProjectDirectoryFromDialog(), focusedWindow)\n        }\n      }),\n  \n      ______________________________,\n  \n      new MenuItem({\n        label: 'Save',\n        id: 'file-save',\n        accelerator: 'CmdOrCtrl+S',\n        click(item, focusedWindow) {\n          const state = global.state()\n          const project = state.projects.byId[state.focusedWindowId]\n          const panel = project?.panels[project?.focusedPanelIndex]\n          if (panel?.unsavedChanges) {\n            focusedWindow.webContents.send('mainRequestsSaveFocusedPanel')\n          }\n        }\n      }),\n  \n      new MenuItem({\n        label: 'Save As',\n        id: 'file-saveAs',\n        accelerator: 'CmdOrCtrl+Shift+S',\n        click(item, focusedWindow) {\n          focusedWindow.webContents.send('mainRequestsSaveAsFocusedPanel')\n        }\n      }),\n  \n      new MenuItem({\n        label: 'Save All',\n        id: 'file-saveAll',\n        accelerator: 'CmdOrCtrl+Alt+S',\n        click(item, focusedWindow) {\n          focusedWindow.webContents.send('mainRequestsSaveAll')\n        }\n      }),\n  \n      new MenuItem({\n        label: 'Move to Trash',\n        id: 'file-moveToTrash',\n        accelerator: 'CmdOrCtrl+Backspace',\n        async click(item, focusedWindow) {\n      \n          // Get selected file paths\n          const state = global.state()\n          const project = state.projects.byId[state.focusedWindowId]\n          const watcher = global.watchers.find((w) => w.id == focusedWindow.projectId)\n  \n          const activeSidebarTab = project.sidebar.tabsById[project.sidebar.activeTabId]\n          let filePathsToDelete = []\n          activeSidebarTab.selected.forEach((id) => {\n            const filepath = watcher.files.byId[id]?.path\n            filePathsToDelete.push(filepath)\n          })\n      \n          // Delete\n          await Promise.all(\n            filePathsToDelete.map(async (filepath) => {\n              await remove(filepath)\n            })\n          )\n        }\n      }),\n  \n      ______________________________,\n  \n      new MenuItem({\n        label: 'Close Editor',\n        id: 'file-closeEditor',\n        accelerator: 'CmdOrCtrl+W',\n        click(item, focusedWindow) {\n      \n          const state = global.state()\n          const project = state.projects.byId[state.focusedWindowId]\n          const prefsIsFocused = state.focusedWindowId == 'preferences'  \n  \n          // In dev mode, we can get into state where there's no focused window, and/or no project. I think it may happen when dev tools is open in a panel. Check before proceeding, or we'll get errors.\n          if (!focusedWindow || !project) return\n      \n          // If prefs is open, Cmd-W should close it.\n          // Else, if there are multiple panels open, close focused one. \n          if (prefsIsFocused) {\n            focusedWindow.close()\n          } else if (project.panels.length >= 1) {\n            focusedWindow.webContents.send('mainRequestsCloseFocusedPanel')\n          }\n        }\n      }),\n  \n      new MenuItem({\n        label: 'Close Window',\n        id: 'file-closeWindow',\n        accelerator: 'CmdOrCtrl+Shift+W',\n        click(item, focusedWindow) {\n          focusedWindow.close()\n        }\n      })\n    ]\n  })\n}\n\n\n\nexport function update(appMenu) {\n\n  const m = appMenu\n  const state = global.state()\n  const project = state.projects.byId[state.focusedWindowId]\n  const panel = project?.panels[project?.focusedPanelIndex]\n  const prefsIsFocused = state.focusedWindowId == 'preferences'  \n\n  m.getMenuItemById('file-newDocument').enabled = project !== undefined\n  m.getMenuItemById('file-newEditor').enabled = project !== undefined\n  // m.getMenuItemById('file-newWindow').enabled = true\n  \n  m.getMenuItemById('file-openProject').enabled = project !== undefined\n  \n  m.getMenuItemById('file-save').enabled = project !== undefined\n  m.getMenuItemById('file-saveAs').enabled = project !== undefined\n  m.getMenuItemById('file-saveAll').enabled = project !== undefined\n  m.getMenuItemById('file-moveToTrash').enabled = isMoveToTrashEnabled()\n  \n  m.getMenuItemById('file-closeEditor').enabled = panel !== undefined\n  // m.getMenuItemById('file-closeWindow').label = prefsIsFocused ? 'Winder' : 'Close Window'\n  // m.getMenuItemById('file-closeWindow').accelerator = prefsIsFocused ? 'CmdOrCtrl+W' : 'CmdOrCtrl+Shift+W',\n  m.getMenuItemById('file-closeWindow').enabled = prefsIsFocused || project !== undefined\n\n}\n\nexport function onStateChanged(state, oldState, project, panel, prefsIsFocused, appMenu) {\n  update(appMenu)\n}","import { MenuItem } from \"electron\";\nimport { ______________________________ } from './Separator.js'\n\nexport function create() {\n\n  return new MenuItem({\n    label: 'Edit',\n    submenu: [\n  \n      new MenuItem({\n        label: 'Undo',\n        id: 'edit-undo',\n        accelerator: 'CmdOrCtrl+Z',\n        selector: 'undo:'\n      }),\n  \n      new MenuItem({\n        label: 'Redo',\n        id: 'edit-redo',\n        accelerator: 'CmdOrCtrl+Shift+Z',\n        selector: 'redo:'\n      }),\n  \n      ______________________________,\n  \n      new MenuItem({\n        label: 'Cut',\n        id: 'edit-cut',\n        accelerator: 'CmdOrCtrl+X',\n        selector: 'cut:'\n      }),\n  \n      new MenuItem({\n        label: 'Copy',\n        id: 'edit-copy',\n        accelerator: 'CmdOrCtrl+C',\n        selector: 'copy:'\n      }),\n  \n      new MenuItem({\n        label: 'Paste',\n        id: 'edit-paste',\n        accelerator: 'CmdOrCtrl+V',\n        selector: 'paste:'\n      }),\n  \n      new MenuItem({\n        label: 'Paste as Plain Text',\n        id: 'edit-pasteAsPlainText',\n        accelerator: 'CmdOrCtrl+Shift+Alt+V',\n        selector: 'paste:',\n      }),\n  \n      new MenuItem({\n        label: 'Select All',\n        id: 'edit-selectAll',\n        accelerator: 'CmdOrCtrl+A',\n        selector: 'selectAll:'\n      }),\n  \n      ______________________________,\n  \n      new MenuItem({\n        label: 'Find in Files',\n        id: 'edit-findInFiles',\n        accelerator: 'CmdOrCtrl+Shift+F',\n        click(item, focusedWindow) {\n          // Tell Search tab to open. And if there's text selected in \n          // the active editor instance, make it the query value.\n          focusedWindow.webContents.send('findInFiles')\n        }\n      }),\n  \n      new MenuItem({\n        label: 'Replace in Files',\n        id: 'edit-replaceInFiles',\n        accelerator: 'CmdOrCtrl+Shift+R',\n        click(item, focusedWindow) {\n          focusedWindow.webContents.send('replaceInFiles')\n        }\n      }),\n  \n      ______________________________,\n  \n      {\n        label: 'Speech',\n        submenu: [\n          { role: 'startspeaking' },\n          { role: 'stopspeaking' }\n        ]\n      }\n  \n    ]\n  })\n}\n\n\nexport function update(applicationMenu) {\n  const m = applicationMenu\n  const state = global.state()\n  const project = state.projects.byId[state.focusedWindowId]\n  const panel = project?.panels[project?.focusedPanelIndex]\n  const focusedSectionId = project?.focusedSectionId\n  const prefsIsFocused = state.focusedWindowId == 'preferences'  \n\n  const aProjectWindowIsFocused = project !== undefined\n  const isSideBarFocused = project && focusedSectionId == 'sidebar'\n  const isAPanelFocused = panel && focusedSectionId == 'editor'\n\n  m.getMenuItemById('edit-undo').enabled = isAPanelFocused\n  m.getMenuItemById('edit-redo').enabled = isAPanelFocused\n\n  m.getMenuItemById('edit-cut').enabled = isAPanelFocused\n  m.getMenuItemById('edit-copy').enabled = isAPanelFocused\n  m.getMenuItemById('edit-paste').enabled = isAPanelFocused\n  m.getMenuItemById('edit-pasteAsPlainText').enabled = isAPanelFocused\n  m.getMenuItemById('edit-selectAll').enabled = isAPanelFocused\n\n  m.getMenuItemById('edit-findInFiles').enabled = aProjectWindowIsFocused\n  m.getMenuItemById('edit-replaceInFiles').enabled = aProjectWindowIsFocused\n\n}\n\nexport function onStateChanged(state, oldState, project, panel, prefsIsFocused, applicationMenu) {\n  update(applicationMenu)\n}","import { MenuItem } from \"electron\";\nimport { selectProjectDirectoryFromDialog } from \"../actions/index.js\";\nimport { ______________________________ } from './Separator.js'\n\n\n// function isMoveToTrashEnabled() {\n//   const state = global.state()\n//   const project = state.projects.byId[state.focusedWindowId]\n//   const sideBarIsOpen = project?.sidebar.isOpen\n//   const selectedTab = project?.sidebar.tabsById[project?.sidebar.activeTabId]\n//   const fileIsSelectedInSidebar = selectedTab?.selected.length\n//   return sideBarIsOpen && fileIsSelectedInSidebar\n// }\n\nexport function create() {\n  return new MenuItem({\n    label: 'Select',\n    submenu: [      \n      new MenuItem({\n        label: 'Select Next Entity',\n        id: 'select-selectNextEntity',\n        accelerator: 'Alt+Tab',\n        async click(item, focusedWindow) {\n          focusedWindow.webContents.send('editorCommand', 'selectNextEntity')\n        }\n      }),\n      new MenuItem({\n        label: 'Select Previous Entity',\n        id: 'select-selectPrevEntity',\n        accelerator: 'Shift+Alt+Tab',\n        async click(item, focusedWindow) {\n          focusedWindow.webContents.send('editorCommand', 'selectPrevEntity')\n        }\n      }),\n      ______________________________,\n      new MenuItem({\n        label: 'Add Next Occurence',\n        id: 'select-selectNextOccurence',\n        accelerator: 'Cmd+D',\n        async click(item, focusedWindow) {\n          focusedWindow.webContents.send('editorCommand', 'selectNextOccurence')\n        }\n      }),\n      ______________________________,\n      new MenuItem({\n        label: 'Select Line',\n        id: 'select-selectLine',\n        accelerator: 'Cmd+L',\n        async click(item, focusedWindow) {\n          focusedWindow.webContents.send('editorCommand', 'selectLine')\n        }\n      }),\n\n      new MenuItem({\n        label: 'Cut Line',\n        id: 'select-cutLine',\n        accelerator: 'Cmd+X',\n        async click(item, focusedWindow) {\n          focusedWindow.webContents.send('editorCommand', 'cutLine')\n        }\n      }),\n      new MenuItem({\n        label: 'Delete Line',\n        id: 'select-deleteLine',\n        accelerator: 'Cmd+Shift+K',\n        async click(item, focusedWindow) {\n          focusedWindow.webContents.send('editorCommand', 'deleteLine')\n        }\n      }),\n      new MenuItem({\n        label: 'Duplicate Line',\n        id: 'select-duplicateLine',\n        accelerator: 'Shift+Alt+Down',\n        async click(item, focusedWindow) {\n          focusedWindow.webContents.send('editorCommand', 'duplicateLine')\n        }\n      }),\n      new MenuItem({\n        label: 'Move Line Up',\n        id: 'select-moveLineUp',\n        accelerator: 'Alt+Up',\n        async click(item, focusedWindow) {\n          focusedWindow.webContents.send('editorCommand', 'moveLineUp')\n        }\n      }),\n      new MenuItem({\n        label: 'Move Line Down',\n        id: 'select-moveLineDown',\n        accelerator: 'Alt+Down',\n        async click(item, focusedWindow) {\n          focusedWindow.webContents.send('editorCommand', 'moveLineDown')\n        }\n      }),\n      ______________________________,\n      new MenuItem({\n        label: 'Add Cursor to Previous Line',\n        id: 'select-addCursorToPrevLine',\n        accelerator: 'Cmd+Alt+Up',\n        async click(item, focusedWindow) {\n          focusedWindow.webContents.send('editorCommand', 'addCursorToPrevLine')\n        }\n      }),\n      new MenuItem({\n        label: 'Add Cursor to Next Line',\n        id: 'select-addCursorToNextLine',\n        accelerator: 'Cmd+Alt+Down',\n        async click(item, focusedWindow) {\n          focusedWindow.webContents.send('editorCommand', 'addCursorToNextLine')\n        }\n      }),\n    ]\n  })\n}\n\nexport function update(appMenu) {\n  const m = appMenu\n  const state = global.state()\n  const project = state.projects.byId[state.focusedWindowId]\n  const panel = project?.panels[project?.focusedPanelIndex]\n  const focusedSectionId = project?.focusedSectionId\n  const editorIsFocused = focusedSectionId == \"editor\"\n    \n  // Disable when editor is not focused\n\n  m.getMenuItemById('select-selectNextEntity').enabled = editorIsFocused\n  m.getMenuItemById('select-selectPrevEntity').enabled = editorIsFocused\n  m.getMenuItemById('select-selectNextOccurence').enabled = editorIsFocused\n  m.getMenuItemById('select-selectLine').enabled = editorIsFocused\n  m.getMenuItemById('select-cutLine').enabled = editorIsFocused\n  m.getMenuItemById('select-deleteLine').enabled = editorIsFocused\n  m.getMenuItemById('select-duplicateLine').enabled = editorIsFocused\n  m.getMenuItemById('select-moveLineUp').enabled = editorIsFocused\n  m.getMenuItemById('select-moveLineDown').enabled = editorIsFocused\n  m.getMenuItemById('select-addCursorToPrevLine').enabled = editorIsFocused\n  m.getMenuItemById('select-addCursorToNextLine').enabled = editorIsFocused\n\n}\n\n/**\n * Determine whether we need to update the menu,\n * based on what has changed.\n */\nexport function onStateChanged(state, oldState, project, panel, prefsIsFocused, appMenu) {\n  update(appMenu)\n}","import { MenuItem } from \"electron\";\nimport { ______________________________ } from './Separator.js'\n\nexport function create() {\n\n  return new MenuItem({\n    label: 'Format',\n    submenu: [\n\n      new MenuItem({\n        label: 'Plain Text',\n        id: 'format-plaintext',\n        accelerator: 'Cmd+Shift+P',\n        click(item, focusedWindow) {\n          focusedWindow.webContents.send('setFormat', 'plainText')\n        }\n      }),\n  \n      ______________________________,\n\n      new MenuItem({\n        label: 'Heading',\n        id: 'format-heading',\n        accelerator: 'Cmd+Shift+H',\n        // registerAccelerator: false,\n        click(item, focusedWindow) {\n          focusedWindow.webContents.send('setFormat', 'heading')\n        }\n      }),\n  \n      ______________________________,\n  \n      new MenuItem({\n        label: 'Strong',\n        id: 'format-strong',\n        accelerator: 'Cmd+B',\n        click(item, focusedWindow) {\n          focusedWindow.webContents.send('setFormat', 'strong')\n        }\n      }),\n  \n      new MenuItem({\n        label: 'Emphasis',\n        id: 'format-emphasis',\n        accelerator: 'Cmd+I',\n        click(item, focusedWindow) {\n          focusedWindow.webContents.send('setFormat', 'emphasis')\n        }\n      }),\n  \n      new MenuItem({\n        label: 'Code',\n        id: 'format-code',\n        accelerator: 'Cmd+Shift+D',\n        click(item, focusedWindow) {\n          focusedWindow.webContents.send('setFormat', 'code')\n        }\n      }),\n  \n      new MenuItem({\n        label: 'Strikethrough',\n        id: 'format-strikethrough',\n        accelerator: 'Cmd+Shift+X',\n        click(item, focusedWindow) {\n          focusedWindow.webContents.send('setFormat', 'strikethrough')\n        }\n      }),\n  \n      ______________________________,\n  \n      new MenuItem({\n        label: 'Link',\n        id: 'format-link',\n        accelerator: 'Cmd+K',\n        click(item, focusedWindow) {\n          focusedWindow.webContents.send('setFormat', 'link')\n        }\n      }),\n  \n      new MenuItem({\n        label: 'Image',\n        id: 'format-image',\n        accelerator: 'Cmd+G',\n        click(item, focusedWindow) {\n          focusedWindow.webContents.send('setFormat', 'image')\n        }\n      }),\n  \n      new MenuItem({\n        label: 'Footnote',\n        id: 'format-footnote',\n        accelerator: 'Cmd+Alt+T', // TODO: Figure something better\n        click(item, focusedWindow) {\n          focusedWindow.webContents.send('setFormat', 'footnote')\n        }\n      }),\n  \n      new MenuItem({\n        label: 'Citation',\n        id: 'format-citation',\n        accelerator: 'Cmd+Shift+C',\n        click(item, focusedWindow) {\n          focusedWindow.webContents.send('setFormat', 'citation')\n        }\n      }),\n  \n      ______________________________,\n  \n      new MenuItem({\n        label: 'Unordered List',\n        id: 'format-ul',\n        accelerator: 'Cmd+Shift+L',\n        click(item, focusedWindow) {\n          focusedWindow.webContents.send('setFormat', 'ul')\n        }\n      }),\n  \n      new MenuItem({\n        label: 'Ordered List',\n        id: 'format-ol',\n        accelerator: 'Cmd+Alt+L',\n        click(item, focusedWindow) {\n          focusedWindow.webContents.send('setFormat', 'ol')\n        }\n      }),\n  \n      ______________________________,\n  \n      new MenuItem({\n        label: 'Task List',\n        id: 'format-taskList',\n        accelerator: 'Cmd+Shift+T',\n        click(item, focusedWindow) {\n          focusedWindow.webContents.send('setFormat', 'taskList')\n        }\n      }),\n  \n      new MenuItem({\n        label: 'Toggle Checked',\n        id: 'format-taskChecked',\n        accelerator: 'Alt+Enter',\n        click(item, focusedWindow) {\n          focusedWindow.webContents.send('setFormat', 'taskChecked')\n        }\n      }),\n  \n      ______________________________,\n  \n    ]\n  })\n}\n\n\nexport function update(appMenu) {\n\n  const m = appMenu\n  const state = global.state()\n  const project = state.projects.byId[state.focusedWindowId];\n  const panel = project?.panels[project?.focusedPanelIndex];\n  const watcher = global.watchers.find((watcher) => watcher.id == state.focusedWindowId);\n  const activeDoc = watcher?.files?.byId[panel?.docId];\n  \n  const isActiveDocMarkdownAndEditorFocused = \n    activeDoc?.contentType == 'text/markdown' &&\n    project?.focusedSectionId == 'editor'\n\n  // Disable when editor is not focused,\n  // or if editor document is not markdown\n\n  m.getMenuItemById('format-citation').enabled = isActiveDocMarkdownAndEditorFocused\n  m.getMenuItemById('format-code').enabled = isActiveDocMarkdownAndEditorFocused\n  m.getMenuItemById('format-emphasis').enabled = isActiveDocMarkdownAndEditorFocused\n  m.getMenuItemById('format-footnote').enabled = isActiveDocMarkdownAndEditorFocused\n  m.getMenuItemById('format-heading').enabled = isActiveDocMarkdownAndEditorFocused\n  m.getMenuItemById('format-image').enabled = isActiveDocMarkdownAndEditorFocused\n  m.getMenuItemById('format-link').enabled = isActiveDocMarkdownAndEditorFocused\n  m.getMenuItemById('format-ol').enabled = isActiveDocMarkdownAndEditorFocused\n  m.getMenuItemById('format-plaintext').enabled = isActiveDocMarkdownAndEditorFocused\n  m.getMenuItemById('format-strikethrough').enabled = isActiveDocMarkdownAndEditorFocused\n  m.getMenuItemById('format-strikethrough').visible = state.markdown.strikethrough\n  m.getMenuItemById('format-strong').enabled = isActiveDocMarkdownAndEditorFocused\n  m.getMenuItemById('format-taskChecked').enabled = isActiveDocMarkdownAndEditorFocused\n  m.getMenuItemById('format-taskList').enabled = isActiveDocMarkdownAndEditorFocused\n  m.getMenuItemById('format-ul').enabled = isActiveDocMarkdownAndEditorFocused\n\n}\n\nexport function onStateChanged(state, oldState, project, panel, prefsIsFocused, appMenu) {\n  update(appMenu)\n}","\nimport { app, MenuItem } from \"electron\";\nimport { ______________________________ } from './Separator.js'\n\nconst isMac = process.platform === 'darwin'\n\nexport function create() {\n\n  return new MenuItem({\n    label: 'View',\n    submenu: [\n\n      new MenuItem({\n        label: 'Source mode',\n        id: 'view-sourceMode',\n        type: 'checkbox',\n        accelerator: 'CmdOrCtrl+/',\n        click(item, focusedWindow) {\n          if (focusedWindow) {\n            global.store.dispatch({\n              type: 'SET_SOURCE_MODE',\n              enabled: !global.state().sourceMode,\n            }, focusedWindow)\n          }\n        }\n      }),\n\n      // new MenuItem({\n      //   label: 'Toggle Frontmatter',\n      //   id: 'view-frontmatter',\n      //   type: 'checkbox',\n      //   accelerator: 'CmdOrCtrl+Shift+M',\n      //   click(item, focusedWindow) {\n\n      //     const state = global.state()\n      //     const project = state.projects.byId[state.focusedWindowId]\n      //     const panel = project?.panels[project?.focusedPanelIndex]\n      //     const watcher = global.watchers.find((watcher) => watcher.id == state.focusedWindowId)\n      //     const activeDoc = watcher.files.byId[panel.docId]\n          \n      //     if (focusedWindow) {\n      //       console.log(global.state().frontMatterCollapsed)\n      //       global.store.dispatch({\n      //         type: 'SET_FRONT_MATTER_COLLAPSED',\n      //         value: !global.state().frontMatterCollapsed,\n      //       }, focusedWindow)\n      //     }\n      //   }\n      // }),\n\n      ______________________________,\n\n      new MenuItem({\n        label: 'Sidebar',\n        id: 'view-sidebar',\n        type: 'checkbox',\n        accelerator: 'CmdOrCtrl+Alt+B',\n        click(item, focusedWindow) {\n          const state = global.state()\n          const project = state.projects.byId[state.focusedWindowId]\n          global.store.dispatch({\n            type: 'SIDEBAR_SET_OPEN_CLOSED',\n            value: !project.sidebar.isOpen\n          }, focusedWindow)\n        }\n      }),\n\n      ______________________________,\n\n      new MenuItem({\n        label: 'Project',\n        id: 'view-project',\n        type: 'checkbox',\n        accelerator: 'Cmd+1',\n        click(item, focusedWindow) {\n          global.store.dispatch({\n            type: 'SELECT_SIDEBAR_TAB_BY_ID',\n            id: 'project'\n          }, focusedWindow)\n        }\n      }),\n\n      new MenuItem({\n        label: 'Documents',\n        id: 'view-allDocs',\n        type: 'checkbox',\n        accelerator: 'Cmd+2',\n        click(item, focusedWindow) {\n          global.store.dispatch({\n            type: 'SELECT_SIDEBAR_TAB_BY_ID',\n            id: 'allDocs'\n          }, focusedWindow)\n        }\n      }),\n\n      new MenuItem({\n        label: 'Most Recent',\n        id: 'view-mostRecent',\n        type: 'checkbox',\n        accelerator: 'Cmd+3',\n        click(item, focusedWindow) {\n          global.store.dispatch({\n            type: 'SELECT_SIDEBAR_TAB_BY_ID',\n            id: 'mostRecent'\n          }, focusedWindow)\n        }\n      }),\n\n      new MenuItem({\n        label: 'Tags',\n        id: 'view-tags',\n        type: 'checkbox',\n        accelerator: 'Cmd+4',\n        click(item, focusedWindow) {\n          global.store.dispatch({\n            type: 'SELECT_SIDEBAR_TAB_BY_ID',\n            id: 'tags'\n          }, focusedWindow)\n        }\n      }),\n\n      new MenuItem({\n        label: 'Media',\n        id: 'view-media',\n        type: 'checkbox',\n        accelerator: 'Cmd+5',\n        click(item, focusedWindow) {\n          global.store.dispatch({\n            type: 'SELECT_SIDEBAR_TAB_BY_ID',\n            id: 'media'\n          }, focusedWindow)\n        }\n      }),\n\n      // new MenuItem({\n      //   label: 'Citations',\n      //   id: 'view-citations',\n      //   type: 'checkbox',\n      //   accelerator: 'Cmd+6',\n      //   click(item, focusedWindow) {\n      //     global.store.dispatch({\n      //       type: 'SELECT_SIDEBAR_TAB_BY_ID',\n      //       id: 'citations'\n      //     }, focusedWindow)\n      //   }\n      // }),\n\n      new MenuItem({\n        label: 'Search',\n        id: 'view-search',\n        type: 'checkbox',\n        accelerator: 'Cmd+6',\n        click(item, focusedWindow) {\n          global.store.dispatch({\n            type: 'SELECT_SIDEBAR_TAB_BY_ID',\n            id: 'search'\n          }, focusedWindow)\n        }\n      }),\n\n      ______________________________,\n\n      new MenuItem({\n        label: 'Font Size',\n        submenu: [\n          new MenuItem({\n            label: 'Default',\n            id: 'view-fontsize-default',\n            accelerator: 'CmdOrCtrl+0',\n            click() {\n              global.store.dispatch({\n                type: 'SET_EDITOR_FONT_SIZE',\n                value: global.state().editorFont.default\n              })\n            }\n          }),\n          ______________________________,\n          new MenuItem({\n            label: 'Increase',\n            id: 'view-fontsize-increase',\n            accelerator: 'CmdOrCtrl+=',\n            click() {\n              global.store.dispatch({ type: 'INCREASE_EDITOR_FONT_SIZE' })\n            }\n          }),\n          new MenuItem({\n            label: 'Decrease',\n            id: 'view-fontsize-decrease',\n            accelerator: 'CmdOrCtrl+-',\n            click() {\n              global.store.dispatch({ type: 'DECREASE_EDITOR_FONT_SIZE' })\n            }\n          })\n        ]\n      }),\n\n      new MenuItem({\n        label: 'Line Height',\n        submenu: [\n          new MenuItem({\n            label: 'Default',\n            id: 'view-lineheight-default',\n            accelerator: 'CmdOrCtrl+Alt+0',\n            click() {\n              global.store.dispatch({ type: 'SET_DEFAULT_EDITOR_LINE_HEIGHT' })\n            }\n          }),\n          ______________________________,\n          new MenuItem({\n            label: 'Increase',\n            id: 'view-lineheight-increase',\n            accelerator: 'CmdOrCtrl+Alt+=',\n            click() {\n              global.store.dispatch({ type: 'INCREASE_EDITOR_LINE_HEIGHT' })\n            }\n          }),\n          new MenuItem({\n            label: 'Decrease',\n            id: 'view-lineheight-decrease',\n            accelerator: 'CmdOrCtrl+Alt+-',\n            click() {\n              global.store.dispatch({ type: 'DECREASE_EDITOR_LINE_HEIGHT' })\n            }\n          })\n        ]\n      }),\n\n      ______________________________,\n\n      // TODO: Am hiding these commands for now, because of Electron bug.\n      // Labels are incorrect if accelerator uses Shift and `-` or `=` \n      // keys. For example, `Cmd+Shift+0` accelerator should display \n      // as `⇪⌘0`. Instead it’s `⌘)`. Will expose in Prefs instead.\n\n      // new MenuItem({\n      //   label: 'Line Height',\n      //   submenu: [\n      //     new MenuItem({\n      //       label: 'Default',\n      //       id: 'view-lineheight-default',\n      //       accelerator: 'CmdOrCtrl+Shift+0',\n      //       click() {\n      //         global.store.dispatch({ type: 'SET_DEFAULT_EDITOR_LINE_HEIGHT' })\n      //       }\n      //     }),\n      //     ______________________________,\n      //     new MenuItem({\n      //       label: 'Increase',\n      //       id: 'view-lineheight-increase',\n      //       accelerator: 'CmdOrCtrl+Shift+=',\n      //       click() {\n      //         global.store.dispatch({ type: 'INCREASE_EDITOR_LINE_HEIGHT' })\n      //       }\n      //     }),\n      //     new MenuItem({\n      //       label: 'Decrease',\n      //       id: 'view-lineheight-decrease',\n      //       accelerator: 'CmdOrCtrl+Shift+-',\n      //       click() {\n      //         global.store.dispatch({ type: 'DECREASE_EDITOR_LINE_HEIGHT' })\n      //       }\n      //     })\n      //   ]\n      // }),\n\n      ______________________________,\n\n      new MenuItem({\n        label: 'Dark Mode',\n        submenu: [\n          new MenuItem({\n            label: 'Match System',\n            type: 'checkbox',\n            checked: global.state().darkMode == 'match-system',\n            click() {\n              global.store.dispatch({ type: 'SET_DARK_MODE', value: 'match-system', })\n            }\n          }),\n          ______________________________,\n          new MenuItem({\n            label: 'Dark',\n            type: 'checkbox',\n            checked: global.state().darkMode == 'dark',\n            click() {\n              global.store.dispatch({ type: 'SET_DARK_MODE', value: 'dark' })\n            }\n          }),\n          new MenuItem({\n            label: 'Light',\n            type: 'checkbox',\n            checked: global.state().darkMode == 'light',\n            click() {\n              global.store.dispatch({ type: 'SET_DARK_MODE', value: 'light' })\n            }\n          })\n        ]\n      }),\n\n      new MenuItem({\n        label: 'Theme',\n        id: 'view-theme',\n        submenu: Object.entries(global.state().theme.installed).map(([id, theme]) => {\n          return new MenuItem({\n            label: theme.name,\n            id: `view-theme-${id}`,\n            type: 'checkbox',\n            checked: global.state().theme.id == id,\n            click(item) {\n              global.store.dispatch({ type: 'SET_THEME', id })\n            }\n          })\n        })\n      }),\n\n      ...app.isPackaged ? [] : [\n        ______________________________,\n        new MenuItem({\n          label: 'Developer',\n          submenu: [\n            new MenuItem({\n              label: 'Toggle Developer Tools',\n              accelerator: isMac ? 'Alt+Command+I' : 'Ctrl+Shift+I',\n              role: 'toggleDevTools',\n            }),\n            new MenuItem({\n              label: 'Reload',\n              accelerator: 'CmdOrCtrl+R',\n              role: 'reload'\n            }),\n            new MenuItem({\n              label: 'Toggle Grid',\n              accelerator: 'CmdOrCtrl+Alt+G',\n              click() {\n                global.store.dispatch({\n                  type: 'SET_DEVELOPER_OPTIONS',\n                  options: {\n                    ...global.state().developer,\n                    showGrid: !global.state().developer.showGrid\n                  }\n                })\n              }\n            })\n          ]\n        })\n      ],\n\n    ]\n  })\n}\n\n\n\nexport function update(appMenu) {\n\n  const m = appMenu\n  const state = global.state()\n  const project = state.projects.byId[state.focusedWindowId]\n  const panel = project?.panels[project?.focusedPanelIndex]\n  const watcher = global.watchers.find((watcher) => watcher.id == state.focusedWindowId)\n  // const activeDoc = watcher?.files.byId[panel.docId]\n  // const prefsIsFocused = state.focusedWindowId == 'preferences'\n\n  m.getMenuItemById('view-sourceMode').checked = state.sourceMode\n  m.getMenuItemById('view-fontsize-increase').enabled = state.editorFont.size < state.editorFont.max\n  m.getMenuItemById('view-fontsize-decrease').enabled = state.editorFont.size > state.editorFont.min\n  m.getMenuItemById('view-lineheight-increase').enabled = state.editorLineHeight.size < state.editorLineHeight.max\n  m.getMenuItemById('view-lineheight-decrease').enabled = state.editorLineHeight.size > state.editorLineHeight.min\n\n  m.getMenuItemById('view-sidebar').checked = project?.sidebar.isOpen\n\n  const sidebarTabs = ['project', 'allDocs', 'mostRecent', 'tags', 'media', 'search']\n  sidebarTabs.forEach((id) => {\n    const item = m.getMenuItemById(`view-${id}`)\n    item.enabled = project !== undefined\n    item.checked = project?.sidebar.activeTabId == id\n  })\n\n  // View > Theme submenu: set `checked`\n  m.getMenuItemById('view-theme').submenu.items.forEach((item) => {\n    const id = item.id.replace('view-theme-', '')\n    item.checked = id == state.theme.id\n  })\n}\n\n/**\n * Determine whether we need to update the menu,\n * based on what has changed.\n */\nexport function onStateChanged(state, oldState, project, panel, prefsIsFocused, appMenu) {\n\n  if (state.appStatus == 'coldStarting') {\n    update()\n    return\n  }\n\n  const oldProject = oldState.projects.byId[oldState.focusedWindowId]\n\n  const somethingChanged =\n    state.focusedWindowId !== oldState.focusedWindowId ||\n    state.sourceMode !== oldState.sourceMode ||\n    state.editorFont.size !== oldState.editorFont.size ||\n    state.editorLineHeight.size !== oldState.editorLineHeight.size ||\n    project?.sidebar.isOpen !== oldProject?.sidebar.isOpen ||\n    project?.sidebar.activeTabId !== oldProject?.sidebar.activeTabId ||\n    state.theme.id !== oldState.theme.id\n\n  if (somethingChanged) update(appMenu)\n}","import { MenuItem } from \"electron\";\nimport { ______________________________ } from './Separator.js'\n\nexport function create() {\n\n  return new MenuItem({\n    label: 'Window',\n    submenu: []\n  })\n}\n\n\nexport function update(applicationMenu) {\n  const m = applicationMenu\n  const state = global.state()\n  const project = state.projects.byId[state.focusedWindowId]\n  const panel = project?.panels[project?.focusedPanelIndex]\n  const prefsIsFocused = state.focusedWindowId == 'preferences'  \n\n}\n\nexport function onStateChanged(state, oldState, project, panel, prefsIsFocused, applicationMenu) {\n  update(applicationMenu)\n}","import { Menu } from 'electron'\nimport * as appMenu from './menus/App.js'\nimport * as fileMenu from './menus/File.js'\nimport * as editMenu from './menus/Edit.js'\nimport * as selectMenu from './menus/Select.js'\nimport * as formatMenu from './menus/Format.js'\nimport * as viewMenu from './menus/View.js'\nimport * as windowMenu from './menus/Window.js'\n\n/**\n * On startup, create initial menu bar, and create change listeners.\n * When state changes, we check if value we care about has changed.\n * If yes, we update the application menu.\n */\nexport function init() {\n\n  // const darkModeChanged = stateHasChanged(global.patches, \"darkMode\")\n  // if (darkModeChanged) setNativeTheme(false)\n\n  /*\n  If project directory is not yet specified, do not show menu?\n  */\n\n  // global.store.onDidAnyChange((state, oldState) => {\n\n  //   // Get window\n  //   // Get project\n  //   // Get project.directory\n\n  //   const project = state.projects.byId[state.focusedWindowId]\n  //   if (!)\n\n  // })\n\n  // Create menu\n  const menu = new Menu()\n  menu.append(appMenu.create())\n  menu.append(fileMenu.create())\n  menu.append(editMenu.create())\n  menu.append(selectMenu.create())\n  menu.append(formatMenu.create())\n  menu.append(viewMenu.create())\n  menu.append(windowMenu.create())\n  Menu.setApplicationMenu(menu)\n \n  // Set initial values by triggering update()\n  appMenu.update(menu)\n  fileMenu.update(menu)\n  editMenu.update(menu)\n  selectMenu.update(menu)\n  formatMenu.update(menu)\n  viewMenu.update(menu)\n  windowMenu.update(menu)\n\n  // On state change, trigger update() \n  global.store.onDidAnyChange((state, oldState) => {\n\n    const project = state.projects.byId[state.focusedWindowId]\n    const panel = project?.panels[project?.focusedPanelIndex]\n    const prefsIsFocused = state.focusedWindowId == 'preferences'  \n\n    appMenu.onStateChanged(state, oldState, project, panel, prefsIsFocused, menu)\n    fileMenu.onStateChanged(state, oldState, project, panel, prefsIsFocused, menu)\n    editMenu.onStateChanged(state, oldState, project, panel, prefsIsFocused, menu)\n    selectMenu.onStateChanged(state, oldState, project, panel, prefsIsFocused, menu)\n    formatMenu.onStateChanged(state, oldState, project, panel, prefsIsFocused, menu)\n    viewMenu.onStateChanged(state, oldState, project, panel, prefsIsFocused, menu)\n    windowMenu.onStateChanged(state, oldState, project, panel, prefsIsFocused, menu)\n  })  \n}\n","import { exists, stat } from 'fs-extra'\nimport matter from 'gray-matter'\nimport removeMd from 'remove-markdown'\nimport path from 'path'\nimport mime from 'mime-types'\nimport { readFile, existsSync } from 'fs-extra'\n\n/**\n * For specified path, return document details\n */\nexport async function mapDocument(filepath, parentId, nestDepth, stats = undefined) {\n\n\tif (stats == undefined) stats = await stat(filepath)\n\n\tconst file = {\n\t\tisDoc: true,\n\t\tisMedia: false,\n\t\tcontentType: mime.lookup(filepath), // 'text/markdown', etc\n\t\tname: '',\n\t\tpath: filepath,\n\t\tid: `doc-${stats.ino}`,\n\t\tparentId: parentId,\n\t\tcreated: stats.birthtime.toISOString(),\n\t\tmodified: stats.mtime.toISOString(),\n\t\tnestDepth: nestDepth,\n\t\t// --- Markdown-specific --- //\n\t\t// title: '',\n\t\t// excerpt: '',\n\t\t// tags: [],\n\t\t// bibliography: {\n\t\t// \tpath: \"\",\n\t\t// \texists: false,\n\t\t// \tisCslJson: false\n\t\t// }\n\t}\n\n\t// If file is markdown, get markdown-specific details\n\tconst isMarkdown = file.contentType == \"text/markdown\"\n\tif (isMarkdown) {\n\n\t\t// Get front matter\n\t\tconst gm = matter.read(filepath)\n\t\n\t\t// Set excerpt\n\t\t// `md.contents` is the original input string passed to gray-matter, stripped of front matter.\n\t\tfile.excerpt = removeMarkdown(gm.content, 350)\n\t\n\t\t// Set fields from front matter (if it exists)\n\t\t// gray-matter `isEmpty` property returns \"true if front-matter is empty\".\n\t\tconst hasFrontMatter = !gm.isEmpty\n\t\tif (hasFrontMatter) {\n\t\n\t\t\t// If `tags` exists in front matter, use it. Else, set as empty `[]`.\n\t\t\tfile.tags = gm.data.hasOwnProperty('tags') ? gm.data.tags : []\n\t\n\t\t\t// If tags is a single string, convert to array\n\t\t\t// We want to support single tag format, ala `tags: Kitten`\n\t\t\t// because it's supported by eleventy: \n\t\t\t// https://www.11ty.dev/docs/collections/#a-single-tag-cat\n\t\t\tif (typeof file.tags === 'string') {\n\t\t\t\tfile.tags = [file.tags]\n\t\t\t}\n\t\n\t\t\t// Get bibliography\n\t\t\tfile.bibliography = await getBibliography(file, gm.data)\n\t\n\t\t}\n\t\n\t\t// Set title, if present. E.g. \"Sea Level Rise\"\n\t\tfile.title = getTitle(gm, path.basename(filepath))\n\t}\n\n\t// Set name from filename (minus file extension)\n\tfile.name = path.basename(filepath)\n\t// file.name = file.name.slice(0, file.name.lastIndexOf('.'))\n\n\treturn file\n}\n\n/**\n * Set title, in following order of preference:\n * 1. From first h1 in content\n * 2. From `title` field of front matter\n * 3. Leave blank (means no title was found)\n */\nfunction getTitle(graymatter, filename) {\n\n\tlet titleFromH1 = graymatter.content.match(/^# (.*)$/m)\n\tif (titleFromH1) {\n\t\treturn titleFromH1[1]\n\t} else if (graymatter.data.hasOwnProperty('title')) {\n\t\treturn graymatter.data.title\n\t} else {\n\t\treturn ''\n\t\t// return filename.slice(0, filename.lastIndexOf('.'))\n\t}\n}\n\n\nconst blockQuotes = /^> /gm\nconst bracketedSpans = /:::.*?:::/gm\nconst citations = /\\[@.*?\\]/gm\n\n// New lines at start of doc\nconst newLines = /^\\n/gm\n\n// Replace with space:\n// - New lines in-line\n// - Artifact left from list replacement\n// - Extra spaces\nconst unwantedWhiteSpace = /\\n|\\t|\\s{2,}/gm\n\n/**\n * Return content stripped of markdown characters.\n * And (optionally) trimmed down to specific character length.\n * Per: https://github.com/jonschlinkert/gray-matter#optionsexcerpt\n * @param {*} content \n * @param {*} trimToLength \n */\nexport function removeMarkdown(content, trimToLength = undefined) {\n\n\t// Remove h1, if it exists. Currently atx-style only.\n\tlet text = content.replace(/^# (.*)\\n/gm, '')\n\n\t// If `trimToLength` is defined, do initial trim.\n\t// We will then remove markdown characters, and trim to final size.\n\t// We do initial trim for performance purposes: to reduce amount of\n\t// text that regex replacements below have to process. We add buffer\n\t// of 100 characters, or else trimming markdown characters could put\n\t// use under the specified `trimToLength` length.\n\tif (trimToLength) {\n\t\ttext = text.substring(0, trimToLength + 100)\n\t}\n\n\t// Remove markdown formatting. Start with remove-markdown rules.\n\t// Per: https://github.com/stiang/remove-markdown/blob/master/index.js\n\t// Then add whatever additional changes I want (e.g. new lines).\n\ttext = removeMd(text)\n\t\t.replace(blockQuotes, '')\n\t\t.replace(newLines, '')         // New lines at start of line (usually doc)\n\t\t.replace(unwantedWhiteSpace, ' ')\n\t\t.replace(bracketedSpans, ' ')\n\t// .replace(citations, '')\n\n\t// If `trimToLength` is defined, trim to final length.\n\tif (trimToLength) {\n\t\ttext = text.substring(0, trimToLength)\n\t}\n\n\treturn text\n}\n\n/**\n * Return the full path to the bibliography file specified, \n * along with details about it (e.g. does the path work).\n * @param {object} file\n * @param {object} frontmatter - Frontmatter loaded from document\n * @returns Object with absolute path to bibliography, and \n * booleans for whether 1) it exists, and 2) if it's CSL-JSON\n */\nasync function getBibliography(file, frontmatter) {\n\n\t// If bibliography is not specified, check for bibliography defined in\n\t// a top-level `data/` directory. \n\tif (!frontmatter.bibliography) {\n\t\treturn { path: \"\", exists: false, isCslJson: false }\n\t}\n\n\tconst absolutePath = path.resolve(path.dirname(file.path), frontmatter.bibliography)\n\tconst exists = await existsSync(absolutePath)\n\tconst isCslJson = path.extname(absolutePath).slice(1).toUpperCase() == \"JSON\"\n\t\n\t// If specified bibliography does not exist, warn\n\tif (!exists) {\n\t\tconsole.warn(`Bibliography ${frontmatter.bibliography} not found. File name: ${file.name}.`, \"— mapDocument.js\")\n\t}\n\n\t// If format is not JSON, warn\n\t// TODO: Validate that the JSON is also CSL-JSON s\n\t\n\t// Specified bibliography exists. Return.\n\treturn { path: absolutePath, exists, isCslJson }\n}\n\n/**\n * Return JSON object representing aggregate of data found in top-level \n * \"data\" directory. Mimimcs Hugo and Eleventy's global\n * data features:\n * - https://www.11ty.dev/docs/data-global/\n * - https://gohugo.io/templates/data-templates/\n * Currently we only support JSON.\n * TODO: \n * - Support \"_data\" folder, ala Eleventy \n * - Support other format. E.g. YAML, TOML, XML.\n */\nasync function getGlobalData() {\n\t// Check if directory exists\n\t// Need to know project directory\n\t// But functions that call this don't know anything about the project...\n\t// const dataDirectoryExists = existsSync()\n}","import { stat } from 'fs-extra'\nimport path from 'path'\nimport { getMediaType } from '../../shared/utils'\nimport sizeOf from 'image-size'\nimport mime from 'mime-types'\n\n/**\n * For specified path, return media file details\n */\nexport async function mapMedia (filepath, parentId, nestDepth, projectId, stats = undefined) {\n\n\tif (stats == undefined) stats = await stat(filepath)\n\tconst extension = path.extname(filepath)\n\tconst type = getMediaType(extension)\n\n\tconst file = {\n\t\tisDoc: false,\n\t\tisMedia: true,\n\t\tcontentType: mime.lookup(filepath), // 'image/png', 'video/mp4', etc.\n\t\tname: path.basename(filepath),\n\t\tpath: filepath,\n\t\tid: `${type}-${stats.ino}`,\n\t\tparentId,\n\t\tprojectId,\n\t\tcreated: stats.birthtime.toISOString(),\n\t\tmodified: stats.mtime.toISOString(),\n\t\tnestDepth,\n\t\t// --- Media-specific --- //\n\t\tsizeInBytes: stats.size,\n\t}\n\n\tif (file.contentType.includes('image'))\t{\n\t\tconst { width, height, type: format } = sizeOf(filepath)\n\t\tfile.dimensions = { width, height }\n\t\tfile.format = format\n\t}\n\n\treturn file\n}","import { stat, readdir } from 'fs-extra'\nimport path from 'path'\nimport { mapDocument } from './mapDocument'\nimport { mapMedia } from './mapMedia'\nimport mime from 'mime-types'\n\n/**\n * For specified folder path, map the folder and it's child  \n * documents, media, and citations, and return `contents` object\n * with four arrays (one for each type).\n * @param {*} files - Reference to shared object we write changes to, and then return\n * @param {*} parentTreeItem - Tree item to add self to\n * @param {*} folderPath - Path to map\n * @param {*} stats - Optional. Can pass in stats, or if undefined, will get them in function.\n * @param {*} parentId - Optional. If undefined, we regard the folder as `root`\n * @param {*} nestDepth - Optional.\n */\nexport async function mapFolder(files, parentTreeItem, folderPath, stats = undefined, parentId = '', nestDepth = 0) {\n\n  // -------- New Folder -------- //\n\n  if (!stats) stats = await stat(folderPath)\n\n  // Create and populate new folder\n  const folder = {\n    isFolder: true,\n    name: folderPath.substring(folderPath.lastIndexOf('/') + 1),\n    path: folderPath,\n    id: `folder-${stats.ino}`,\n    parentId: parentId,\n    created: stats.birthtime.toISOString(),\n    modified: stats.mtime.toISOString(),\n    nestDepth: nestDepth,\n    // --- Folder-specific --- //\n    numChildren: 0,\n    numDescendants: 0,\n  }\n\n  // Add to `files`\n  files.byId[folder.id] = folder\n  files.allIds.push(folder.id)\n\n  // Populate tree details\n  const treeItem = {\n    id: folder.id,\n    parentId: parentId,\n    children: []\n  }\n  parentTreeItem.push(treeItem)\n\n\n  // -------- Contents -------- //\n\n  // Get everything in directory with `readdir`.\n  // Returns array of `fs.Dirent` objects.\n  // https://nodejs.org/api/fs.html#fs_class_fs_dirent\n  let directoryContents = await readdir(folderPath, { withFileTypes: true })\n  directoryContents = directoryContents.filter(({ name }) => !name.includes(\".DS_Store\"))\n\n  await Promise.all(\n    directoryContents.map(async (f) => {\n\n      // Get path by combining folderPath with file name.\n      const filepath = path.join(folderPath, f.name)\n\n      // Get extension\n      const ext = path.extname(f.name)\n\n      // Determine type\n      const contentType = mime.lookup(filepath)\n      const isDirectory = f.isDirectory()\n      const isDoc = contentType && contentType.includes('markdown')\n      const isMedia = contentType && contentType.includesAny('video', 'audio', 'image')\n\n      if (isDirectory) {\n\n        const { numDescendants } = await mapFolder(files, treeItem.children, filepath, undefined, folder.id, nestDepth + 1)\n\n        // Increment child counters\n        folder.numChildren++\n        folder.numDescendants += numDescendants\n\n      } else {\n      // } else if (isDoc || isMedia) {\n\n        const file = isMedia ? \n          await mapMedia(filepath, folder.id, nestDepth + 1) :\n          await mapDocument(filepath, folder.id, nestDepth + 1)\n\n        files.byId[file.id] = file\n        files.allIds.push(file.id)\n        treeItem.children.push({\n          id: file.id,\n          parentId: folder.id,\n        })\n\n        // Increment child counters\n        folder.numChildren++\n      }\n    })\n  )\n\n  folder.numDescendants += folder.numChildren\n\n  return {\n    numDescendants: folder.numDescendants\n  }\n}","import { mapFolder } from './mapFolder'\n\n/**\n * Map project path recursively and dispatch results to store\n * @param {*} projectPath \n */\nexport async function mapProject (projectPath) {\n\n  try {\n\n    const files = {\n      tree: [],\n      byId: {},\n      allIds: []\n    }\n\n    // Map project path, recursively\n    await mapFolder(files, files.tree, projectPath)\n    \n    return files\n    \n  } catch (err) {\n    console.log(err)\n  }\n}","import { BrowserWindow } from 'electron'\nimport chokidar from 'chokidar'\nimport path from 'path'\nimport { pathExists } from 'fs-extra'\nimport produce, { enablePatches } from 'immer'\nimport { mapProject } from './mapProject'\nimport { mapDocument, removeMarkdown } from './mapDocument'\nimport { mapMedia } from './mapMedia'\nimport { findInTree, getFileType, isDoc, isMedia } from '../../shared/utils.js'\nimport matter from 'gray-matter'\nimport { debounce } from 'debounce'\n\nenablePatches()\n\n/**\n * Chokidar docs: https://www.npmjs.com/package/chokidar\n */\nconst chokidarConfig = {\n  ignored: /(^|[\\/\\\\])\\../, // Ignore dotfiles\n  ignoreInitial: true,\n  persistent: true,\n  awaitWriteFinish: {\n    stabilityThreshold: 200, // 3/9: Was 400\n    pollInterval: 50 // 3/9: Was 200\n  }\n}\n\nexport class Watcher {\n  constructor(id, project, window) {\n\n    this.id = id\n    this.directory = project.directory\n    this.window = window\n\n    // If directory is populated, create the watcher\n    if (this.directory) {\n      this.start()\n    }\n  }\n\n  // ------ VARIABLES ------ //\n\n  id = ''\n  directory = ''\n  window = undefined\n\n  files = {}\n  chokidarInstance = undefined\n  pendingChanges = []\n  changeTimer = undefined\n\n\n  // ------ METHODS ------ //\n\n  /**\n   * Start the chokidar instance. Called once `this.directory` is first defined.\n   */\n  async start() {\n\n    // Start watcher\n    this.chokidarInstance = chokidar.watch(this.directory, chokidarConfig)\n\n    // On any event, track changes. Some events include `stats`.\n    this.chokidarInstance\n      .on('change', (filePath) => this.batchChanges('change', filePath))\n      .on('add', (filePath) => this.batchChanges('add', filePath))\n      .on('unlink', (filePath) => this.batchChanges('unlink', filePath))\n      .on('addDir', (filePath) => this.batchChanges('addDir', filePath))\n      .on('unlinkDir', (filePath) => this.batchChanges('unlinkDir', filePath))\n\n    // Map project\n    this.files = await mapProject(this.directory)\n\n    // Send initial files to browser window\n    this.window.webContents.send('initialFilesFromMain', this.files)\n\n    // Tell reducers when first project map is complete, \n    // and pass along first file. If a file as not been \n    // selected yet, reducer selects this.\n    const firstDocId = this.files.allIds.find((id) => this.files.byId[id].isDoc)\n\n    global.store.dispatch({\n      type: 'PROJECT_FILES_MAPPED',\n      firstDocId\n    }, this.window)\n\n    // Index files into DB\n    insertAllDocsIntoDb(this.files)\n  }\n\n  changeDirectories(newDirectory) {\n    this.chokidarInstance.unwatch(this.directory)\n    this.directory = newDirectory\n    this.start()\n  }\n\n\n  /**\n   * Stop the chokidar instance. Called when project is closed.\n   */\n  stop() {\n    // TODO: Stop watcher when project is closed\n    this.chokidarInstance.close()\n  }\n\n\n  /**\n   * Create a tally of changes as they occur, and once things settle down, evaluate them. We do this because on directory changes in particular, chokidar lists each file modified, _and_ the directory modified. We don't want to trigger a bunch of file change handlers in this scenario, so we need to batch changes, so we can figure out they include directories.\n   */\n  debounceFunc = debounce(() => {\n    this.applyChanges(this.pendingChanges)\n    this.pendingChanges = [] // Reset\n  }, 200) // 3/9: Was 400\n\n  batchChanges(event, filePath, stats) {\n    const change = { event: event, path: filePath }\n\n    if (stats) change.stats = stats\n\n    // Push into list of pending changes\n    this.pendingChanges.push(change)\n\n    // Wait a bit, then apply the pending changes. Make the debounce timer longer if `addDir` event comes through. If it's too quick, subsequent `add` events are not caught by the timer.\n    // const debounceTimer = event == 'addDir' ? 500 : 100\n\n    this.debounceFunc()\n  }\n\n\n  /**\n   * Take batched changes and update `files`, then send patches to associated BrowserWindow. If a directory was added or removede, remap everything.\n   * @param {*} changes \n   */\n  async applyChanges(changes) {\n\n    // console.log(changes)\n\n    const directoryWasAddedOrRemoved = changes.some((c) => c.event == 'addDir' || c.event == 'unlinkDir')\n\n    if (directoryWasAddedOrRemoved) {\n\n      /* \n      NOTE: This code is identical to what we do in start()\n      If making changes, make sure to make them in both places.\n      Could abstract into one function, but I don't know what\n      to call it. `mapProject` is most logical, but already used.\n      */\n\n      // Map project\n      this.files = await mapProject(this.directory)\n\n      // Send initial files to browser window\n      this.window.webContents.send('initialFilesFromMain', this.files)\n\n      // Tell reducers when first project map is complete, \n      // and pass along first file. Reducer then sets this as\n      // file that the focused panel should display.\n      const firstDocId = this.files.allIds.find((id) => {\n        const file = this.files.byId[id]\n        return file.isDoc\n      })\n\n      global.store.dispatch({\n        type: 'PROJECT_FILES_MAPPED',\n        firstDocId\n      }, this.window)\n\n      // Index files into DB\n      insertAllDocsIntoDb(this.files)\n\n    } else {\n\n      // Do not proceed if app is quitting. At this point, `this.files` is destroyed, and Immer will throw error if we try to proceed.\n      if (global.state().appStatus == 'wantsToQuit') return\n\n      // Update `files` using Immer: \n\n      this.files = await produce(this.files, async (draft) => {\n        for (const c of changes) {\n          const ext = path.extname(c.path)\n          const parentPath = path.dirname(c.path)\n          const parentId = draft.allIds.find((id) => draft.byId[id].path == parentPath)\n          const parentFolder = draft.byId[parentId]\n          const parentTreeItem = findInTree(draft.tree, parentFolder.id, 'id')\n\n          if (isDoc(ext) || isMedia(ext)) {\n\n            switch (c.event) {\n\n              case 'add': {\n                const file = isDoc(ext) ?\n                  await mapDocument(c.path, parentFolder.id, parentFolder.nestDepth + 1, c.stats) :\n                  await mapMedia(c.path, parentFolder.id, parentFolder.nestDepth + 1, c.stats)\n                // Add to `byId`\n                draft.byId[file.id] = file\n                // Add to `allIds`\n                draft.allIds.push(file.id)\n                // Add to `tree`\n                parentTreeItem.children.push({\n                  id: file.id,\n                  parentId: file.parentId,\n                  // type: file.type\n                })\n                // Increment `numChildren` of parent folder\n                parentFolder.numChildren++\n                // Recursively increment parent folder(s) `numDescendants`\n                incrementNumDescendants(parentFolder)\n                function incrementNumDescendants(folder) {\n                  folder.numDescendants++\n                  if (folder.parentId !== '') {\n                    incrementNumDescendants(draft.byId[folder.parentId])\n                  }\n                }\n                // Add to database (if it's a doc)\n                if (isDoc(ext)) insertDocIntoDb(file)\n                break\n              }\n\n              case 'change': {\n                const file = isDoc(ext) ?\n                  await mapDocument(c.path, parentFolder.id, parentFolder.nestDepth + 1, c.stats) :\n                  await mapMedia(c.path, parentFolder.id, parentFolder.nestDepth + 1, c.stats)\n                draft.byId[file.id] = file\n                // If doc, update row in db\n                if (isDoc) insertDocIntoDb(file)\n                break\n              }\n\n              case 'unlink': {\n                const id = draft.allIds.find((id) => draft.byId[id].path == c.path)\n                // Remove from `byId`\n                delete draft.byId[id]\n                // Remove from `allIds`\n                draft.allIds.splice(draft.allIds.indexOf(id), 1)\n                // Remove from `tree`\n                parentTreeItem.children.splice(parentTreeItem.children.findIndex((child) => child.id == id), 1)\n                // Decrement `numChidren` of parent folder\n                parentFolder.numChildren--\n                // Recursively decrement parent folder(s) `numDescendants`\n                decrementNumDescendants(parentFolder)\n                function decrementNumDescendants(folder) {\n                  folder.numDescendants--\n                  if (folder.parentId !== '') {\n                    decrementNumDescendants(draft.byId[folder.parentId])\n                  }\n                }\n                // Delete from database (if it's a doc)\n                if (isDoc(ext)) global.db.delete(id)\n                break\n              }\n            }\n          }\n\n        }\n      }, (patches, inversePatches) => {\n        this.window.webContents.send('filesPatchesFromMain', patches)\n      })\n\n      // console.log(this.files, \"— Watcher.js\")\n\n      global.store.dispatch({ type: 'PROJECT_FILES_UPDATED' }, this.window)\n    }\n  }\n}\n\n\n\n\n// ------ UTILITY FUNCTIONS ------ //\n\n/**\n * For each doc found in files, add it to the sqlite database. Most important is the document body, which we need for full text search. We get it as plain text by 1) loading the doc using gray-matter, which returns `content` for us, without front matter, and 2) removing markdown formatting.\n */\nfunction insertAllDocsIntoDb(files) {\n  const filesForDb = []\n  files.allIds.forEach((id) => {\n    const file = files.byId[id]\n    if (file.isDoc) {\n      filesForDb.push(getDbReadyFile(file))\n    }\n  })\n  // Insert the files into the db\n  global.db.insertMany(filesForDb)\n}\n\n/** \n * Insert specified file in the sqlite database. If a row with the same `file.id` already exists, it will be replaced.\n */\nfunction insertDocIntoDb(file) {\n  global.db.insert(getDbReadyFile(file))\n}\n\n/**\n * Utility function that returns an object with 1) the file's metadata, and 2) it's full text content, stripped of markdown characters, excess whitespace, etc. We'll insert this object as a row in the sql database, for later full text searching.\n * @param {*} file - Taken from `files.byId`. Has title, path, etc.\n */\nfunction getDbReadyFile(file) {\n\n  // Get doc text, minus any front matter\n  let { content } = matter.read(file.path)\n\n  // Remove markdown formatting from text\n  content = removeMarkdown(content)\n\n  // Return object, ready for the db.\n  return {\n    id: file.id,\n    name: file.name,\n    title: file.title,\n    path: file.path,\n    body: content\n  }\n}","import { debounce } from 'debounce'\nimport { app, BrowserWindow, screen } from 'electron'\nimport path from 'path'\nimport url from 'url'\nimport { wait } from '../shared/utils'\n\nconst browserWindowConfig = {\n  show: false,\n  width: 700,\n  height: 500,\n  // vibrancy: 'sidebar', // Turning off due to poor performance.\n  // transparent: true,\n  titleBarStyle: 'hiddenInset',\n  webPreferences: {\n    scrollBounce: false,\n    // Security:\n    allowRunningInsecureContent: false,\n    contextIsolation: true,\n    enableRemoteModule: false,\n    nativeWindowOpen: false,\n    nodeIntegration: false,\n    nodeIntegrationInWorker: false,\n    nodeIntegrationInSubFrames: false,\n    safeDialogs: true,\n    sandbox: true,\n    webSecurity: true,\n    webviewTag: false,\n    // Preload\n    preload: path.join(__dirname, 'js/preload.js')\n  }\n}\n\n\nexport async function createWindow(id, project) {\n\n  const win = new BrowserWindow(browserWindowConfig)\n  win.projectId = id\n\n  // Set window background color.\n  // TODO: Setting backgroundColor is currently broken. \n  // Background always renders as black, regardless of the value. \n  // Bug: https://github.com/electron/electron/issues/26842\n  const backgroundColor = global.state().systemColors.windowBackgroundColor\n  if (backgroundColor) win.setBackgroundColor(backgroundColor)\n\n  const isNewProject = project.directory == ''\n\n  // Set size. If project directory is empty, it's a new project, and we manually set starting values. Else we restore the previous window size and position (stored in `bounds` property)/\n  // Else, create a new window centered on screen.\n  if (isNewProject) {\n    const menuBarHeight = 24\n    const padding = 200\n    const displayWidth = screen.getPrimaryDisplay().workAreaSize.width\n    const displayHeight = screen.getPrimaryDisplay().workAreaSize.height\n    let winWidth = displayWidth - (padding * 2)\n    let winHeight = displayHeight - (padding * 2)\n    winWidth = winWidth > 1600 ? 1600 : winWidth\n    winHeight = winHeight > 1200 ? 1200 : winHeight\n    const offset = win.id * 20\n    const centeredX = Math.round((displayWidth - winWidth) / 2 + offset)\n    const centeredY = Math.round((displayHeight - winHeight) / 2 + offset)\n    win.setBounds({\n      x: centeredX,\n      y: centeredY,\n      width: winWidth,\n      height: winHeight\n    }, false)\n  } else {\n    win.setBounds(project.window.bounds, false)\n\n  }\n\n  // Have to manually set this to 1.0. That should be the default, but I've had problem where something was setting it to 0.91, resulting in the UI being slightly too-small.\n  // win.webContents.zoomFactor = 1.0\n\n  // Listen for 'close' action. Can be triggered by either 1) manually closing individual window, (e.g. click close button on window, or type Cmd-W), or 2) quitting the app. \n\n  // If closed manually, this event is triggered twice. The first time, we prevent the default and tell webContents to save open documents. That process results in window.status being set to `safeToClose`. ProjectManager catches that state change, and tells this window to close again.\n  win.on('close', async (evt) => {\n\n    const userManuallyClosedWindow = global.state().appStatus !== 'canSafelyQuit'\n    const winStatus = global.state().projects.byId[id].window.status\n    const winWantsToClose = winStatus == 'wantsToClose'\n    const winIsSafeToClose = winStatus == 'safeToClose'\n\n    // If window is closing because user manually closed it (e.g. typed Cmd-W), then check if it's safe to close yet. If not, begin that process. ProjectManager will call close again once the window is safe to close, and this time, we won't preventDefault, and the window will close.\n    if (userManuallyClosedWindow && !winIsSafeToClose) {\n      // Tell window to close\n      evt.preventDefault()\n      if (!winWantsToClose) {\n        global.store.dispatch({ type: 'START_TO_CLOSE_PROJECT_WINDOW' }, win)\n      }\n    }\n  })\n\n  // If app is NOT quiting, we remove the project from store after closing the window. Because if the user manually closes a window, they mean to close the project. But if they quit the app, they want to their open projects to reopen, next session.\n  win.on('closed', async (evt) => {\n    \n    const appIsNotQuiting = global.state().appStatus == 'open'\n    if (appIsNotQuiting) {\n      await global.store.dispatch({ type: 'REMOVE_PROJECT' }, win)\n    }\n    \n    // If there are no other windows open, clear `focusedWindowId`\n    // Unless app is quitting, in which case it's too late to modify state.\n    // (Immer will throw a bug re: the object having been destroyed).\n    const otherWindowsAreOpen = BrowserWindow.getAllWindows().length\n    if (!otherWindowsAreOpen && appIsNotQuiting) {\n      global.store.dispatch({ type: 'NO_WINDOW_FOCUSED' })\n    }\n  })\n\n  // On resize or move, save bounds to state (wait 1 second to avoid unnecessary spamming). Using `debounce` package: https://www.npmjs.com/package/debounce\n  win.on('resize', debounce(() => { saveWindowBoundsToState(win) }, 1000))\n  win.on('move', debounce(() => { saveWindowBoundsToState(win) }, 1000))\n\n  // On focus, set `focusedWindowId` to win.id\n  win.on('focus', () => {\n    global.store.dispatch({ type: 'FOCUSED_WINDOW' }, win)\n  })\n\n  /*\n  On blur, wait a beat. If the user has clicked on another Gambier window it will fire `FOCUSED_WINDOW` and set itself as the `focusedWindowId`. In which case we don't want to do anything. But if the user has clicked outside the app, `focusedWindowId` will still equal this win.projectId after the beat. In which case, set `focusedWindowId` to zero, which we take to mean that the app is in the background.\n  */\n  win.on('blur', async () => {\n    await wait(50)\n    if (global.state().focusedWindowId == win.projectId) {\n      global.store.dispatch({ type: 'NO_WINDOW_FOCUSED' })\n    }\n  })\n\n  // De-focus window when a sheet is open\n  win.on('sheet-begin', () => {\n    global.store.dispatch({ type: 'NO_WINDOW_FOCUSED' })\n  })\n\n  // Focus window when a sheet closes\n  win.on('sheet-end', () => {\n    global.store.dispatch({ type: 'FOCUSED_WINDOW' }, win)\n  })\n\n  // Open DevTools\n  if (!app.isPackaged) win.webContents.openDevTools();\n \n  // Load index.html (old way)\n  // await win.loadFile(path.join(__dirname, 'index.html'), {\n  \n  // Load local index.html file\n  // \"Electron by default allows local resources to be accessed by render processes only when their html files are loaded from local sources with the file:// protocol for security reasons.\"\n\n  await win.loadURL(url.format({\n    pathname: 'index.html',\n    protocol: 'file:',\n    slashes: true,\n    query: {\n      id: win.projectId\n    }\n  }))\n\n  // Save window bounds\n  saveWindowBoundsToState(win)\n\n  // Set project window status to 'open'\n  global.store.dispatch({\n    type: 'OPENED_PROJECT_WINDOW',\n  }, win)\n\n  return win\n}\n\n/**\n * Save window bounds to state, so we can restore after restart.\n */\nfunction saveWindowBoundsToState(win) {\n  global.store.dispatch({\n    type: 'SAVE_PROJECT_WINDOW_BOUNDS',\n    windowBounds: win.getBounds()\n  }, win)\n}\n","import { BrowserWindow } from \"electron\"\nimport { copySync } from \"fs-extra\"\nimport { getArrayDiff, propHasChangedTo, stateHasChanged } from \"../shared/utils\"\nimport { Watcher } from \"./watcher/Watcher\"\nimport { createWindow } from \"./WindowManager\"\n\n// let projects = {\n//   allIds: [],\n//   byId: {}\n// }\n\nexport function init() {\n\n  // ------ SETUP CHANGE LISTENERS ------ //\n\n  global.store.onDidAnyChange(async (state, oldState) => {\n\n    const projectAdded = state.projects.allIds.length > oldState.projects.allIds.length\n\n    const projectRemoved = state.projects.allIds.length < oldState.projects.allIds.length\n\n    const aProjectDirectoryHasChanged = stateHasChanged(global.patches, ['projects', 'byId', 'directory'])\n\n    const aWindowIsSafeToClose = stateHasChanged(global.patches, ['window', 'status'], 'safeToClose')\n\n    const appIsQuitting = propHasChangedTo('appStatus', 'wantsToQuit', state, oldState)\n\n\n    // If project added, create a Window and Watcher \n    // Determine new project by comparing new and old `allIds`.\n    if (projectAdded) {\n      const id = getArrayDiff(state.projects.allIds, oldState.projects.allIds)[0]\n      createWindowAndWatcher(state, id)\n    }\n\n    // If project directory changed, update (or start) the Watcher\n    if (aProjectDirectoryHasChanged) {\n      const projectIds = getIdsOfProjectsWhoseDirectoriesHaveChanged(state, oldState)\n      projectIds.forEach((id) => {\n        const project = state.projects.byId[id]\n        const watcher = global.watchers.find((watcher) => watcher.id == id)\n        const watcherIsRunning = watcher.directory !== ''\n        if (!watcherIsRunning) {\n          watcher.directory = project.directory\n          watcher.start()\n        } else {\n          watcher.changeDirectories(project.directory)\n        }\n      })\n    }\n\n    // If project removed, stop the watcher, then remove from `global.watchers`.\n    // Determine removed project by comparing old and new `allIds`.\n    if (projectRemoved) {\n      const id = getArrayDiff(oldState.projects.allIds, state.projects.allIds)[0]\n      const watcher = global.watchers.find((w) => w.id == id)\n      const indexOfWatcher = global.watchers.findIndex((w) => w.id == id)\n      watcher.stop()\n      global.watchers.splice(indexOfWatcher, 1)\n    }\n\n    // Close any window whose `window.status` just changed to 'safeToClose'\n    if (aWindowIsSafeToClose) {\n      const windowsToClose = getWindowsThatAreSafeToClose(state, oldState)\n      windowsToClose.forEach((window) => window.close())\n    }\n\n    // If app is quitting, start to close all windows\n    if (appIsQuitting) {\n      const windows = BrowserWindow.getAllWindows()\n      if (windows.length) {\n        windows.forEach((win) => win.close())\n      }\n    }\n  })\n\n\n  // ------ DO INITIAL SETUP ------ //\n\n  const state = global.state()\n\n  // On startup, for each project, create a Window and Watcher\n  state.projects.allIds.forEach((id) => {\n    createWindowAndWatcher(state, id)\n  })\n}\n\n\n/**\n * Create a window and watcher for a project\n * @param {*} id - Of the project\n */\nasync function createWindowAndWatcher(state, id) {\n  const project = state.projects.byId[id]\n  const window = await createWindow(id, project)\n  const watcher = new Watcher(id, project, window)\n  global.watchers.push(watcher)\n}\n\n\n/**\n * Get projects whose directories have changed\n */\nfunction getIdsOfProjectsWhoseDirectoriesHaveChanged(state, oldState) {\n  let projects = []\n  state.projects.allIds.forEach((id) => {\n    const directory = state.projects.byId[id].directory\n    const oldDirectory = oldState.projects.byId[id].directory\n    if (directory !== oldDirectory) {\n      projects.push(id)\n    }\n  })\n  return projects\n}\n\n/**\n * Get windows that are safe to close\n */\nfunction getWindowsThatAreSafeToClose(state, oldState) {\n  let windows = []\n  state.projects.allIds.forEach((id) => {\n    const windowStatus = state.projects.byId[id].window.status\n    const oldWindowStatus = oldState.projects.byId[id]?.window.status\n    if (windowStatus == 'safeToClose' && oldWindowStatus !== 'safeToClose') {\n      const window = BrowserWindow.getAllWindows().find((win) => win.projectId == id)\n      windows.push(window)\n    }\n  })\n  return windows\n}\n\n","import { app, BrowserWindow } from 'electron'\nimport path from 'path'\nimport { stateHasChanged, wait } from '../shared/utils'\nimport url from 'url'\n\nconst preferencesWindowConfig = {\n  show: false,\n  // width: 1060, // With dev tools open\n  width: 700,\n  height: 480,\n  zoomFactor: 1.0,\n  titleBarStyle: 'hidden',\n  // resizable: false,\n  webPreferences: {\n    // Security:\n    allowRunningInsecureContent: false,\n    contextIsolation: true,\n    enableRemoteModule: false,\n    nativeWindowOpen: false,\n    nodeIntegration: false,\n    nodeIntegrationInWorker: false,\n    nodeIntegrationInSubFrames: false,\n    safeDialogs: true,\n    sandbox: true,\n    webSecurity: true,\n    webviewTag: false,\n    // Preload\n    preload: path.join(__dirname, 'js/preload.js')\n  }\n}\n\nexport function init() {\n\n  // ------ SETUP CHANGE LISTENERS ------ //\n\n  // Did `prefs: isOpen` change?\n  global.store.onDidAnyChange((state, oldState) => {\n    const shouldOpenPrefs = stateHasChanged(global.patches, [\"prefs\", \"isOpen\"], true)\n    if (shouldOpenPrefs) {\n      open()\n    }\n  })\n}\n\nasync function open() {\n\n  const win = new BrowserWindow(preferencesWindowConfig)\n\n  // Set window background color.\n  // TODO: Setting backgroundColor is currently broken. \n  // Background always renders as black, regardless of the value. \n  // Bug: https://github.com/electron/electron/issues/26842\n  const backgroundColor = global.state().systemColors.windowBackgroundColor\n  if (backgroundColor) win.setBackgroundColor(backgroundColor)\n  \n  win.once('ready-to-show', () => {\n    win.show()\n  })\n\n  // 'projectId' is a bit of a misnomer for Preferences, but we use it for the sake of consistency.\n  win.projectId = 'preferences'\n\n  // On focus, set `focusedWindowId` to win.id\n  win.on('focus', () => {\n    global.store.dispatch({ type: 'FOCUSED_WINDOW' }, win)\n  })\n\n  /*\n  On blur, wait a beat. If the user has clicked on another Gambier window it will fire `FOCUSED_WINDOW` and set itself as the `focusedWindowId`. In which case we don't want to do anything. But if the user has clicked outside the app, `focusedWindowId` will still equal this win.projectId after the beat. In which case, set `focusedWindowId` to zero, which we take to mean that the app is in the background.\n  */\n  win.on('blur', async () => {\n    await wait(50)\n    if (global.state().focusedWindowId == win.projectId) {\n      global.store.dispatch({ type: 'NO_WINDOW_FOCUSED' })\n    }\n  })\n\n  // De-focus window when a sheet is open\n  win.on('sheet-begin', () => {\n    global.store.dispatch({ type: 'NO_WINDOW_FOCUSED' })\n  })\n\n  // Focus window when a sheet closes\n  win.on('sheet-end', () => {\n    global.store.dispatch({ type: 'FOCUSED_WINDOW' }, win)\n  })\n\n  win.on('close', () => {\n    global.store.dispatch({ type: 'CLOSE_PREFERENCES' })\n  })\n\n  // if (!app.isPackaged) {\n  //   win.webContents.openDevTools();\n  //   win.setBounds({ width: 1000 })\n  // }\n\n  // Load index.html\n  // await win.loadFile(path.join(__dirname, 'preferences.html'), {\n  //   query: {\n  //     id: win.projectId\n  //   },\n  // })\n  await win.loadURL(url.format({\n    pathname: 'preferences.html',\n    protocol: 'file:',\n    slashes: true,\n    query: {\n      id: win.projectId\n    }\n  }))\n}\n\n","// External dependencies\nimport { app, BrowserWindow, clipboard, dialog, protocol, shell, systemPreferences, webFrame } from 'electron'\nimport path from 'path'\n\n// Bundled dependencies\nimport { Store } from './Store'\nimport * as AppearanceManager from './AppearanceManager'\nimport { DbManager } from './DbManager'\nimport * as IpcManager from './IpcManager'\nimport * as MenuBarManager from './MenuBarManager'\nimport * as ProjectManager from './ProjectManager'\nimport * as PreferencesManager from './PreferencesManager'\nimport { propHasChangedTo } from '../shared/utils'\nimport { userInfo } from 'os'\n\n\n// -------- Process variables -------- //\n\nprocess.env.ELECTRON_DISABLE_SECURITY_WARNINGS = true\n\n\n// -------- Reload (Development-only) -------- //\n\napp.commandLine.appendSwitch('inspect=5858')\napp.commandLine.appendSwitch('enable-transparent-visuals')\n\nif (!app.isPackaged) {\n\n  const thingsToWatchForReload = [\n    path.join(__dirname, '**/*.js'),\n    // path.join(__dirname, '**/*.html'),\n    path.join(__dirname, '**/*.css'),\n    // path.join(__dirname, '**/*.xml')\n    // 'main.js',\n    // '**/*.js',\n    // '**/*.html',\n    // '**/*.css',\n    // '**/*.xml',\n    // '**/*.png',\n    // '**/*.jpg',\n  ]\n\n  // We use `electron-reload` package to do a hard reset of electron\n  // every time a file changes.\n  require('electron-reload')(thingsToWatchForReload, {\n\n    // awaitWriteFinish: {\n    //   stabilityThreshold: 10,\n    //   pollInterval: 50\n    // },\n\n    // We reset electron each time (starting a new electron process, and\n    // not just restarting web contents, which the default) by specifying \n    // the path to the electron package.\n    electron: path.join(__dirname, '../node_modules', '.bin', 'electron'),\n\n    // \"If your app overrides some of the default quit or close actions \n    // (e.g. closing the last app window hides the window instead of \n    // quitting the app) then the default electron-reload hard restart \n    // could leave you with multiple instances of your app running. In \n    // these cases you can change the default hard restart action from \n    // app.quit() to app.exit() by specifying the hard reset method in \n    // the electron-reload options\"\n    // https://www.npmjs.com/package/electron-reload\n    // hardResetMethod: 'exit',\n\n    argv: ['--inspect=5858', '--enable-transparent-visuals'],\n  })\n\n  console.log('// - - - - - - - - - - - - - - - //')\n  console.log(`Gambier... Electron ${process.versions.electron}. Chrome ${process.versions['chrome']}`)\n}\n\n\n// -------- IPC TESTING -------- //\n\n// ipc.config.id = 'world';\n// ipc.config.retry = 1500;\n\n// ipc.serve(() => {\n\n//     ipc.server.on('message', (data, socket) => {\n//       ipc.log('got a message : '.debug, data)\n//       ipc.server.emit(\n//         socket,\n//         'message',  // This can be anything you want so long as your client knows.\n//         data + ' world!'\n//       )\n//     })\n\n//     ipc.server.on('socket.disconnected', (socket, destroyedSocketID) => {\n//       ipc.log('client ' + destroyedSocketID + ' has disconnected!')\n//     })\n//   }\n// )\n\n// ipc.server.start()\n\n\n\n// -------- SETUP -------- //\n\n// Set this to shut up console warnings re: deprecated default. If not set, it defaults to `false`, and console then warns us it will default `true` as of Electron 9. Per: https://github.com/electron/electron/issues/18397\napp.allowRendererProcessReuse = true\n\n// Create store (and global variables for store and state)\nglobal.store = new Store()\nglobal.state = () => global.store.store\nglobal.patches = [] // Most recent patches from Immer\nglobal.watchers = [] // Watchers. Are populdated by ProjectManager\n\n// Create Sqlite databaase (happens in the constructor). \n// Class instance has useful functions for interacting w/ the db.\n// E.g. Insert new row, update, etc.\nglobal.db = new DbManager()\n\n// Start app\napp.whenReady()\n  .then(async () => {\n\n\n    // Catch when user toggles macOS keyboard navigation by \n    // listening to system changes.\n    systemPreferences.subscribeNotification('com.apple.KeyboardUIModeDidChange', async (evt, userInfo, object) => {\n      await global.store.dispatch({\n        type: 'SET_SYSTEM_VALUES',\n        values: {\n          ...global.state().system,\n          keyboardNavEnabled: systemPreferences.getUserDefault('AppleKeyboardUIMode', 'boolean')\n        }\n      })\n    })\n\n    // Ensure app assets load reliably from both absolute and\n    // relative urls by intercepting, determining if the request\n    // is for an app asset (it doesn't start with `Users`, in\n    // case of macOS), and if so, inserting app path at start.\n    // Before we added this, absolute paths to app assets would\n    // fail.\n    // Before: `file:///img/arrow.svg`\n    // After: `file:///Users/josh/Desktop/gambier/img/arrow.svg`\n    protocol.interceptFileProtocol('file', (request, callback) => {\n      \n      // If the request url starts with `file:///Users`, it's\n      // not a request for an app asset, so we don't need to\n      // append the app path. This happens when user loads an \n      // image from the project, for example. We just cleanup\n      // the request url.\n      const isRequestForAppAsset = !request.url.startsWith('file:///Users/')\n      if (!isRequestForAppAsset) {\n        \n        // Clean up the request url by removing the file prefix\n        // and replacing ascii spaces with real spaces:\n        // Before: file:///Users/josh/Desktop/Notes/climate%20graph.jpg\n        // After:  /Users/josh/Desktop/Notes/climate graph.jpg\n        let url = request.url.substr('file://'.length)\n        url = path.normalize(url)\n        url = url.replaceAll('%20', ' ')\n        // console.log(url)\n        callback({ path: url })\n        return\n      }\n\n      let url = request.url.substr('file'.length + 1)\n\n      // Build complete path for node require function\n      url = path.join(__dirname, url)\n\n      const containsQuery = url.includes('?')\n      if (containsQuery) {\n        url = url.substring(0, url.lastIndexOf('?'))\n      }\n\n      // Replace backslashes by forward slashes (windows)\n      url = path.normalize(url)\n      \n      // console.log(url)\n\n      callback({ path: url })\n\n    })\n\n    // Create IPC listeners/handlers\n    IpcManager.init()\n\n    // Setup preferences manager\n    PreferencesManager.init()\n\n    // Prep state as necessary. E.g. Prune projects with bad directories.\n    await global.store.dispatch({ type: 'START_COLD_START' })\n\n    // Setup menu bar\n    MenuBarManager.init()\n\n    // Get initial system appearance values\n    AppearanceManager.init()\n\n    // Create windows and watchers for projects\n    ProjectManager.init()\n\n    // App startup complete!\n    await global.store.dispatch({ type: 'FINISH_COLD_START' })\n  })\n\n\n// -------- LISTENERS -------- //\n\n// Start to quit app: Set appStatus to 'safeToQuit'. This triggers windows to close. Once all of them have safely closed (e.g. open docs are saved), appStatus is updated to 'safeToQuit', and we call `app.quit` again. This time it will go through.\n\napp.on('before-quit', async (evt) => {\n  const appStatus = global.state().appStatus\n  switch (appStatus) {\n\n    // If app is open, preventDefault, and update appStatus state\n    // via reducer. \n    case 'open': {\n      evt.preventDefault()\n      await global.store.dispatch({\n        type: 'START_TO_QUIT'\n      })\n      break\n    }\n\n    // If quit has already started, preventDefault.\n    case 'wantsToQuit': {\n      evt.preventDefault()\n      break\n    }\n\n    // If app is safe to quit, do nothing; allow it to quit.\n    case 'safeToQuit': {\n      console.log(\"Quitting app!\")\n      // Do nothing\n      break\n    }\n  }\n})\n\n/**\n * Quit app when appStatus changes to 'safeToQuit'\n */\nglobal.store.onDidAnyChange(async (state, oldState) => {\n\n  const canSafelyQuit = propHasChangedTo('appStatus', 'safeToQuit', state, oldState)\n\n  if (canSafelyQuit) {\n    app.quit()\n  }\n})\n\n// On all windows closed, if app is quitting, set `safeToQuit` on appStatus\n// via 'CAN_SAFELY_QUIT' reducer. Else, do nothing.\napp.on('window-all-closed', async () => {\n\n  const appWantsToQuit = global.state().appStatus == 'wantsToQuit'\n  const isNotMacApp = process.platform !== 'darwin'\n\n  // \"On macOS it is common for applications and their menu bar to stay active until the user quits explicitly with Cmd + Q\" — https://www.geeksforgeeks.org/save-files-in-electronjs/\n  if (appWantsToQuit || isNotMacApp) {\n    await global.store.dispatch({\n      type: 'CAN_SAFELY_QUIT'\n    })\n  }\n})\n"],"names":["enablePatches","update","produce","systemPreferences","nanoid","BrowserWindow","accessSync","fs","ElectronStore","app","init","nativeTheme","chroma","Database","ipcMain","remove","dialog","path","readFile","CSL","convert","clipboard","writeFile","shell","screen","existsSync","copyFileSync","renameSync","matter","readdirSync","MenuItem","create","onStateChanged","Menu","appMenu.create","fileMenu.create","editMenu.create","selectMenu.create","formatMenu.create","viewMenu.create","windowMenu.create","fileMenu.update","editMenu.update","selectMenu.update","formatMenu.update","viewMenu.update","windowMenu.update","fileMenu.onStateChanged","editMenu.onStateChanged","selectMenu.onStateChanged","formatMenu.onStateChanged","viewMenu.onStateChanged","windowMenu.onStateChanged","stat","mime","removeMd","sizeOf","readdir","chokidar","debounce","url","protocol","IpcManager.init","PreferencesManager.init","MenuBarManager.init","AppearanceManager.init","ProjectManager.init"],"mappings":"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M,cAAc,EAAE,WAAW;AACjC,MAAM,WAAW,EAAE,WAAW;AAC9B,MAAM,kBAAkB,EAAE,WAAW;AACrC,MAAM,SAAS,EAAE,WAAW;AAC5B,MAAM,qBAAqB,EAAE,WAAW;AACxC,KAAK;AACL,GAAG,MAAM;AACT,IAAI,OAAO;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,sBAAsB,EAAE,WAAW;AACzC,MAAM,YAAY,EAAE,WAAW;AAC/B,MAAM,gBAAgB,EAAE,WAAW;AACnC,MAAM,wBAAwB,EAAE,WAAW;AAC3C,MAAM,SAAS,EAAE,WAAW;AAC5B,MAAM,eAAe,EAAE,WAAW;AAClC,MAAM,UAAU,EAAE,WAAW;AAC7B,MAAM,oBAAoB,EAAE,WAAW;AACvC,MAAM,oBAAoB,EAAE,WAAW;AACvC,MAAM,mBAAmB,EAAE,WAAW;AACtC,MAAM,wBAAwB,EAAE,WAAW;AAC3C,MAAM,yBAAyB,EAAE,WAAW;AAC5C,MAAM,cAAc,EAAE,WAAW;AACjC,MAAM,WAAW,EAAE,WAAW;AAC9B,MAAM,kBAAkB,EAAE,WAAW;AACrC,MAAM,SAAS,EAAE,WAAW;AAC5B,MAAM,qBAAqB,EAAE,WAAW;AACxC,KAAK;AACL,GAAG;AACH;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtkBO,MAAM,SAAS,CAAC;AACvB,EAAE,WAAW,GAAG;AAChB;AACA;AACA;AACA,IAAI,IAAI,CAAC,EAAE,GAAG,IAAIC,4BAAQ,CAAC,UAAU,EAAC;AACtC;AACA;AACA;AACA,IAAI,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC;AAClC;AACA;AACA,IAAI,CAAC,CAAC,CAAC,GAAG,GAAE;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC;AACxC;AACA;AACA,IAAI,CAAC,EAAC;AACN;AACA,IAAI,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,EAAE,CAAC,WAAW,CAAC,CAAC,IAAI,KAAK;AAC1D,MAAM,KAAK,MAAM,GAAG,IAAI,IAAI,EAAE;AAC9B,QAAQ,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,GAAG,EAAC;AACjC,OACA,KAAK,CAAC,CAAC;AACP;AACA,IAAI,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC;AACxC;AACA;AACA;AACA,IAAI,CAAC,EAAC;AACN;AACA;AACA,IAAI,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,CAAC,EAAC;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIC,gBAAO,CAA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"}